(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b57e1a54"],{1078:function(t,e,s){"use strict";e["a"]={backupList:"/backup/list",backupDetail:"/backup/detail/",backupReply:"/backup/post/reply/"}},"11a4":function(t,e,s){"use strict";var i=function(){var t,e=this,s=e._self._c;return s("div",{staticClass:"post-brief",attrs:{brief:e.brief}},[e.brief?e._e():s("div",{staticClass:"top"},[s("post-user",{attrs:{avatar:e.post.author.avatar,size:50,auth:e.post.author.auth,authentication:e.post.author.authentication,nickname:e.post.author.nickname,uid:e.post.author.uid,colors:e.levelLabel.color,level:e.level}},[s("template",{slot:"bottom"},[s("span",{staticClass:"post-time"},[e._v(e._s(e.postTime))])])],2),e.isMobile?e._e():e._t("right-top")],2),s("div",{staticClass:"content"},[s("post-content",{attrs:{title:e.post.title,content:e.post.content,labels:e.post.labels,pictures:e.post.pictures,author:e.post.author,"primary-pictures":e.post.primaryPictures,videos:e.post.videos,isMobile:e.isMobile,brief:e.brief,type:e.post.type,id:e.post.id,vote:null===(t=e.post)||void 0===t?void 0:t.vote}})],1),e.showHanserAction&&e.isLogin&&!e.brief?s("div",{staticClass:"hanser-action"},[e.post.hanserReply?s("div",{staticClass:"hanser-reply"},[s("icon",{attrs:{icon:"hanser icon-huifu"}}),e._v(" hanser回复过")],1):e._e(),e.post.hanserLike&&!e.post.hanserReply?s("div",{staticClass:"hanser-like"},[s("icon",{attrs:{icon:"hanser icon-dianzan"}}),e._v(" hanser赞过 ")],1):e._e()]):e._e(),e.brief?e._e():s("div",{staticClass:"bottom"},[s("ul",{staticClass:"tags",class:{"no-tags":!e.post.tags||!e.post.tags.length}},e._l(e.post.tags,(function(t){return s("li",{key:t.tagId,staticClass:"tag"},[s("router-link",{staticClass:"tag-link",attrs:{to:"/tag/"+t.tagId}},[e._v("#"+e._s(t.tagName))])],1)})),0),e.isLogin?s("div",{staticClass:"datas"},[s("div",{staticClass:"readings"},[s("div",{staticClass:"icon"},[s("div",{domProps:{innerHTML:e._s(e.readingsIcon)}})]),s("div",{staticClass:"data"},[e._v(e._s(e.post.readings))])]),s("div",{staticClass:"replies"},[s("div",{staticClass:"icon"},[s("div",{domProps:{innerHTML:e._s(e.repliesIcon)}})]),s("div",{staticClass:"data"},[e._v(e._s(e.post.replies))])]),s("div",{staticClass:"likes",class:{liked:e.post.liked},on:{click:function(t){return e.like(e.post)}}},[e.showLike?s("div",{staticClass:"like-animation",style:e.themeLikeAnimationStyle},[s("div",{domProps:{innerHTML:e._s(e.likeGif)}})]):e._e(),s("div",{staticClass:"icon"},[s("div",{domProps:{innerHTML:e._s(e.likeIcon(e.post.liked))}})]),s("div",{staticClass:"data"},[e._v(e._s(e.post.likes))])])]):e._e()]),e.brief?s("div",{staticClass:"divider"}):e._e()])},a=[],n=s("9579"),o=s("7b81"),r=s("808e"),l=s("ed08"),c=s.n(l),d=s("2f62"),u={name:"post-brief",props:["post","levels","author","brief"],data(){return{TEXT_COLOR:r["j"],showLike:!1}},components:{PostContent:o["a"],PostUser:n["a"]},computed:{...Object(d["d"])({user:t=>t.users.userInfo,isMobile:t=>t.media.isMobile,theme:t=>t.config.theme}),level(){const{exp:t}=this.author;let e=this.levels[0];return this.levels.forEach(s=>{s.exp<=t&&s.level>e.level&&(e=s)}),e},levelLabel(){const t=this.levels.find(t=>t.level===this.level.level);return t},lastReplyTime(){return c.a.dateFormat("mm-dd HH:MM",new Date(this.post.last_reply_time.replace(/-/g,"/")))},showHanserAction(){return this.post.hanserLike||this.post.hanserReply},isLogin(){return!!this.user.uid},postTime(){return c.a.dateFormat("YYYY-mm-dd HH:MM",new Date(this.post.post_time.replace(/-/g,"/")))},likeGif(){switch(this.theme){case"new-year-2023":return'<img src="https://cdn.2550505.com/share/legacy-sso/new-year-2023-like.gif" width="87" height="110" alt="点赞" />';default:return'<img src="https://cdn.2550505.com/share/legacy-sso/like.gif" width="64" height="42" alt="点赞" />'}},themeLikeAnimationStyle(){switch(this.theme){case"new-year-2023":return"top: -98px; right: -12px";default:return""}},readingsIcon(){switch(this.theme){case"new-year-2023":return'<img src="https://cdn.2550505.com/share/legacy-sso/new-year-2023-readings.png" width="25" height="15" alt="查看" />';case"new-year-2024":return'<img src="https://cdn.2550505.com/share/legacy-sso/new-year-2024-reading.png" width="28" height="28" alt="查看" />';default:return'<i class="hanser icon-chakan"></i>'}},repliesIcon(){switch(this.theme){case"new-year-2023":return'<img src="https://cdn.2550505.com/share/legacy-sso/new-year-2023-replies.png" width="20" height="20" alt="回复" />';case"new-year-2024":return'<img src="https://cdn.2550505.com/share/legacy-sso/new-year-2024-reply.png" width="20" height="17" alt="回复" />';default:return'<i class="hanser icon-huifu" />'}}},methods:{like(t){const e="new-year-2023"===this.theme?1300:1e3;!t.liked&&this.user.uid?(this.showLike=!0,setTimeout(()=>{this.showLike=!1},e)):this.showLike=!1,this.$emit("like")},likeIcon(t){return"new-year-2023"===this.theme?t?'<img src="https://cdn.2550505.com/share/legacy-sso/new-year-2023-like-click.png" width="20" height="20" alt="已点赞" />':'<img src="https://cdn.2550505.com/share/legacy-sso/new-year-2023-like.png" width="20" height="20" alt="点赞" />':"new-year-2024"===this.theme?t?'<img src="https://cdn.2550505.com/share/legacy-sso/new-year-2024-like_active.png" width="20" height="20" alt="已点赞" />':'<img src="https://cdn.2550505.com/share/legacy-sso/new-year-2024-like_default.png" width="20" height="20" alt="点赞" />':'<i class="hanser icon-dianzan"></i>'}}},h=u,p=(s("afc0"),s("2877")),g=Object(p["a"])(h,i,a,!1,null,"08176a4c",null);e["a"]=g.exports},"18dd":function(t,e,s){},"2b0f":function(t,e,s){},3752:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-skeleton"},[e("el-skeleton",{attrs:{animated:"",count:10}},[e("template",{slot:"template"},[e("div",{staticClass:"sk-top"},[e("el-skeleton-item",{staticStyle:{width:"50px",height:"50px"},attrs:{variant:"image"}}),e("div",{staticClass:"sk-info"},[e("div",{staticClass:"sk-nickname"},[e("el-skeleton-item",{staticStyle:{width:"64px"},attrs:{variant:"text"}})],1),e("div",{staticClass:"sk-time"},[e("el-skeleton-item",{staticStyle:{width:"64px"},attrs:{variant:"text"}})],1)]),e("el-skeleton-item",{staticStyle:{width:"80px"},attrs:{variant:"text"}})],1),e("el-skeleton-item",{staticStyle:{width:"200px",margin:"10px 0"},attrs:{variant:"h3"}}),e("el-skeleton-item",{staticStyle:{width:"100%"},attrs:{variant:"text"}}),e("el-skeleton-item",{staticStyle:{width:"100%"},attrs:{variant:"text"}}),e("div",{staticClass:"sk-divider"})],1)],2)],1)},a=[],n={name:"post-skeleton"},o=n,r=(s("dc2b"),s("2877")),l=Object(r["a"])(o,i,a,!1,null,"d50f0d4c",null);e["a"]=l.exports},5197:function(t,e,s){"use strict";s("f731")},"6c7a":function(t,e,s){"use strict";s("a6d0")},"6d9e":function(t,e,s){},7150:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"avatar",style:t.avatarStyle,on:{click:t.toHomepage}},[e("img",{attrs:{src:t.avatarUrl,width:t.size,height:t.size,alt:t.alt||""}})])},a=[],n={name:"avatar",props:["url","size","alt","uid"],computed:{avatarStyle(){return`width: ${this.size}px; height: ${this.size}px`},avatarUrl(){return this.url||"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png"}},methods:{toHomepage(){window.open("/space/"+this.uid)}}},o=n,r=(s("e9ec"),s("2877")),l=Object(r["a"])(o,i,a,!1,null,"5f6430d2",null);e["a"]=l.exports},"7ada":function(t,e,s){},"7b81":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-content"},[e("router-link",{staticClass:"title",attrs:{to:"/post/"+t.id,target:t.target}},[t.labels.length?e("ul",{staticClass:"labels"},t._l(t.labels,(function(s,i){return e("li",{key:i},[e("span",{staticClass:"label",style:t.labelStyle(s)},[t._v(t._s(s.labelName))])])})),0):t._e(),e("p",{staticClass:"title-text"},[t._v(t._s(t.title))])]),e("div",[e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.renderContent)}})]),t.brief||!t.videos||t.videos.length?t._e():e("div",{staticClass:"pictures"},[e("post-image",{attrs:{images:t.pictures,type:t.type,isMobile:t.isMobile,"primary-pictures":t.primaryPictures}})],1),t.videos&&t.videos.length?e("div",{staticClass:"video"},[e("iframe",{ref:"video",attrs:{src:t.videos[0],width:t.videoWidth,height:t.videoHeight,scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"allowfullscreen"}})]):t._e()],1)},a=[],n=function(){var t=this,e=t._self._c;return t.imageCount?e("div",{staticClass:"post-image"},[e("div",{class:t.imageClass},[t._l(t.showImages,(function(s,i){return e("el-image",{key:s+i,staticClass:"image",style:t.imageStyle,attrs:{lazy:"",fit:"cover",src:s},on:{click:function(e){return t.handlePreview(i)}}},[e("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e("img",{attrs:{width:"100",height:"100",alt:"loading",src:"https://cdn.2550505.com/share/legacy-sso/loading.jpg"}})]),e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("img",{attrs:{width:"100",height:"100",alt:"failed",src:"https://cdn.2550505.com/share/legacy-sso/fail.jpg"}})])])})),t.showViewer?e("el-image-viewer",{attrs:{"initial-index":t.initialIndex,maskClosable:!1,"on-close":t.onClose,"url-list":t.primaryPictures}}):t._e()],2)]):t._e()},o=[],r=s("08a9"),l={name:"post-image",props:["images","primaryPictures","type","isMobile"],components:{ElImageViewer:r["a"]},data(){return{showViewer:!1,initialIndex:0}},computed:{imageClass(){return 3===this.imageCount?"image-count-3":4===this.imageCount?"image-count-4":"image-list"},showImages(){return this.images.slice(0,9)},imageCount(){var t;return null===(t=this.images)||void 0===t?void 0:t.length},imageStyle(){return this.isMobile?[1,2,3].includes(this.type)?"width: 100%":"width: 100px; height: 100px":[1,2,3].includes(this.type)?"max-width: 300px;max-height: 300px":"width: 100px; height: 100px"}},methods:{changeIndex(t){this.initialIndex=t},handlePreview(t){this.initialIndex=t,this.showViewer=!0},onClose(){this.showViewer=!1,this.initialIndex=0}}},c=l,d=(s("eff9"),s("2877")),u=Object(d["a"])(c,n,o,!1,null,"18654413",null),h=u.exports,p={name:"post-content",data(){return{}},props:["labels","title","type","content","author","pictures","id","primaryPictures","isMobile","brief","videos","vote"],methods:{labelStyle(t){return`background: ${t.color};`}},computed:{isTop(){const t=this.labels.find(t=>1===t.labelId);return!!t},target(){if(this.isMobile)return"_blank";{const t=Number(window.localStorage.getItem("openType"));if(0===t)return"_self";if(1===t)return"_blank"}return"_self"},videoWidth(){return this.isMobile?"100%":"70%"},videoHeight(){return this.isMobile?"200":"400"},isLevelUpPost(){const t=this.labels.find(t=>7===t.id);return!!t},renderContent(){return 3===this.type?`<div class="birthday-sign"><div class="birthday-picture"><img src="https://cdn.2550505.com/share/legacy-sso/birthday-picture.png" class="birthday-img"><div class="birthday-avatar"><img src="${this.author.avatar}" width="100%" height="100%" alt="${this.author.nickname}" class="birthday-avatar-img"></div></div></div>`:this.content}},components:{PostImage:h}},g=p,m=(s("8d97"),Object(d["a"])(g,i,a,!1,null,"66b1417a",null));e["a"]=m.exports},"8b76":function(t,e,s){"use strict";s("d42e")},"8d97":function(t,e,s){"use strict";s("9947")},"98ce":function(t,e,s){},9947:function(t,e,s){},"9f8d":function(t,e,s){},a6d0:function(t,e,s){},adf1:function(t,e,s){"use strict";s("ebb2")},afc0:function(t,e,s){"use strict";s("6d9e")},c237:function(t,e,s){"use strict";s("98ce")},c3a8:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-index"},[e("nav",{staticClass:"nav-wrapper"},[e("ul",{staticClass:"nav-list"},[t._l(t.menu,(function(s){return e("li",{key:s.text,staticClass:"menu-item"},[e("router-link",{class:{selected:t.$route.hash===s.hash},attrs:{to:"/"+s.hash}},[t._v(t._s(s.text))])],1)})),e("li",{staticClass:"menu-item menu-item-icon"},[t.isMobile?e("div",{staticClass:"search",on:{click:t.search}},[e("i",{staticClass:"hanser icon-sousuo1"})]):t._e()]),t.isMobile&&1===t.living.status?e("li",{staticClass:"menu-item"},[t._m(0)]):t._e(),t.isMobile?e("li",{staticClass:"menu-item menu-item-icon"},[e("div",{staticClass:"download-icon",on:{click:t.showDownload}},[e("img",{attrs:{width:"18",src:s("f6f5"),alt:"download"}})])]):t._e()],2)]),e("div",{staticClass:"layout-post__banner"},[!t.isMobile&&t.guessInfo&&t.guessInfo.info&&t.guessInfo.info.id?e("Banner",{attrs:{guessInfo:t.guessInfo}}):e("img",{staticClass:"banner",attrs:{src:t.bannerImage}})],1),t.isMobile&&t.isLogin&&t.showSort?e("div",{staticClass:"sort"},[e("span",[t._v("帖子排序")]),e("div",{staticClass:"order__checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"order__checkbox-toggle",attrs:{id:"cb",type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:[function(e){var s=t.checked,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&(t.checked=s.concat([n])):o>-1&&(t.checked=s.slice(0,o).concat(s.slice(o+1)))}else t.checked=a},t.changeSort]}}),t._m(1)])]):t._e(),t.showBackup?e("div",{staticClass:"backup"},[e("list")],1):e("div",{staticClass:"layout-post__main"},[e("ul",{staticClass:"posts"},[t.isMobile?[t._l(t.topPost,(function(s){return e("li",{key:"top"+s.id,staticClass:"post"},[e("post-brief",{staticClass:"post-brief",attrs:{brief:!0,post:s,author:s.author,levels:t.levels},on:{like:function(e){return t.like(s)}}})],1)})),t._l(t.posts,(function(s){return e("li",{key:s.id,staticClass:"post"},[e("post-brief",{staticClass:"post-brief",attrs:{author:s.author,post:s,levels:t.levels},on:{like:function(e){return t.like(s)}}})],1)})),t.loading&&!t.loadDone?e("post-skeleton"):t._e()]:[t.loading&&!t.loadDone?e("post-skeleton"):[t._l(t.topPost,(function(s){return e("li",{key:"top"+s.id,staticClass:"post"},[e("post-brief",{staticClass:"post-brief",attrs:{author:s.author,brief:!0,post:s,levels:t.levels},on:{like:function(e){return t.like(s)}}})],1)})),t._l(t.posts,(function(s){return e("li",{key:s.id,staticClass:"post"},[e("post-brief",{staticClass:"post-brief",attrs:{author:s.author,post:s,levels:t.levels},on:{like:function(e){return t.like(s)}}})],1)}))]]],2),t.isMobile?e("load-more",{key:"post-list",attrs:{name:"post-list","have-more":!t.loadDone},on:{"load-more":t.loadMorePosts}}):e("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:t.totalPosts},on:{"current-change":t.handleCurrentChange}}),t.isMobile?t._e():e("div",{staticClass:"editor"},[e("editor",{ref:"editor",staticClass:"post-editor",attrs:{limitWords:1e4,loading:t.postLoading,draftKey:"post-page-editor"},on:{post:t.post},scopedSlots:t._u([t.user.uid&&1!==t.user.status?null:{key:"cover",fn:function(){return[t.user.uid?e("span",{staticClass:"tip-text"},[t._v(" 你已被封禁,封禁解除后才可发帖 ")]):e("span",{staticClass:"tip-text"},[e("router-link",{staticClass:"to-login",attrs:{to:"/login"}},[t._v("登录")]),t._v(" 后才可发帖 ")],1)]},proxy:!0}],null,!0)})],1),e("hanser-editor")],1),e("div",{ref:"layoutUser",staticClass:"layout-user"},[-1!==t.living.status?e("div",{staticClass:"living"},[e("div",{staticClass:"captain"},[t._v("直播间")]),1!==t.living.status?e("div",{staticClass:"not-living"},[e("a",{staticClass:"living-link",attrs:{href:"https://live.bilibili.com/255",target:"_blank"}},[t._v("还没开播呢，去直播间逛一逛~")])]):t._e(),1===t.living.status?e("div",{staticClass:"on-living"},[e("a",{staticClass:"living-cover",attrs:{href:"https://live.bilibili.com/255",target:"_blank"},on:{mouseenter:t.showFrame,mouseleave:t.hideFrame}},[t._m(2),e("img",{attrs:{referrerpolicy:"no-referrer",src:t.cover,width:"100%",alt:""}})]),e("h3",{staticClass:"living-title"},[t._v(t._s(t.living.title))])]):t._e()]):t._e(),e("div",{staticClass:"notification"},[e("div",{staticClass:"captain"},[t._v("公告栏")]),e("div",{staticClass:"layout-notice"},[e("el-carousel",{attrs:{height:"108px",interval:6e3,"indicator-position":"none"}},t._l(t.notices,(function(t,s){return e("el-carousel-item",{key:t.link+s},[e("router-link",{attrs:{to:t.link,title:t.text,target:"_blank"}},[e("img",{attrs:{width:"100%",height:"108",alt:t.text,src:t.image}})])],1)})),1)],1),e("div",{staticClass:"layout-user__manager"},[e("ul",{staticClass:"link-nav-list"},t._l(t.navList,(function(s){return e("li",{key:s.link,staticClass:"nav-item"},[e("el-popover",{attrs:{placement:"left",trigger:"hover"}},[e("p",[t._v(t._s(s.text))]),e("div",{attrs:{slot:"reference"},slot:"reference"},[e("router-link",{staticClass:"nav-link",attrs:{to:s.link}},[e("p",{staticClass:"nav-text"},[t.inWeek(s.time)?e("span",{staticClass:"new"},[t._v("NEW")]):t._e(),e("span",{staticClass:"nav-text-title"},[t._v(t._s(s.text))])]),e("div",{staticClass:"nav-time"},[t._v(t._s(t.formatTime(s.time)))])])],1)])],1)})),0)])]),t.managers.length?e("div",{staticClass:"manager"},[e("div",{staticClass:"manager-member"},[e("div",{staticClass:"manager-member--wrapper"},[e("div",{staticClass:"captain"},[t._v("管理员")]),e("div",{staticClass:"account-wrapper"},t._l(t.showManagers.slice(0,3),(function(s){return e("router-link",{key:s.uid,staticClass:"account",attrs:{to:"/space/"+s.uid,target:"_blank",title:s.nickname}},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:s.avatar,width:"40",height:"40",alt:s.nickname}})]),e("p",{staticClass:"nickname"},[t._v(t._s(s.nickname))])])})),1),e("div",{staticClass:"account-wrapper"},t._l(t.showManagers.slice(3),(function(s){return e("router-link",{key:s.uid,staticClass:"account",attrs:{to:"/space/"+s.uid,target:"_blank",title:s.nickname}},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:s.avatar,width:"40",height:"40",alt:s.nickname}})]),e("p",{staticClass:"nickname"},[t._v(t._s(s.nickname))])])})),1)])]),e("div",{staticClass:"pagination"},[e("div",{staticClass:"pagination-cart prev",class:{"pagination-disabled":0===t.start},on:{click:t.toPrev}},[e("i",{staticClass:"hanser icon-zuohuadong"})]),e("div",{staticClass:"pagination-cart next",class:{"pagination-disabled":t.end>=t.managers.length},on:{click:t.toNext}},[e("i",{staticClass:"hanser icon-youhuadong"})])])]):t._e(),e("div",{ref:"contributionRank",staticClass:"contribution-rank"},[e("div",{staticClass:"header"},[e("div",{staticClass:"header-title"},[e("div",{staticClass:"header-title--text"},[t._v("用户贡献榜")]),e("div",{staticClass:"header-title--help"},[e("el-popover",{attrs:{placement:"top-end","append-to-body":!1,title:"",width:"300",trigger:"hover"}},[e("div",{staticClass:"rule"},[e("div",{staticClass:"rule-header"},[t._v("规则")]),e("div",{staticClass:"content"},[e("div",{staticClass:"rule-title"},[t._v("贡献值和贡献榜")]),e("div",{staticClass:"rule-content"},[e("p",[t._v(" 用户通过在俱乐部主站或直播间的主动互动行为，可增加相应的贡献值。贡献值可用于兑换毛怪俱乐部主站的个性装扮、改名卡、补签卡等虚拟道具。 ")]),e("p",[t._v(" 用户贡献榜分为周榜和月榜，分别动态展示贡献值排行前100位的用户，每周/月最后一天晚上23:59重置榜单。 ")])]),e("div",{staticClass:"rule-title"},[t._v("获得贡献值的方法")]),e("div",{staticClass:"rule-content"},[e("p",[t._v(" 用户在主站发帖、评论或点赞可增加贡献值，评论的得分比点赞高，优质的帖子还能得到极大的加分！同时，关联账号在直播间投喂、点赞、发弹幕、持续观看直播也可获得贡献值！ ")])])])]),e("div",{staticClass:"more",attrs:{slot:"reference"},slot:"reference"},[e("i",{staticClass:"icon-help iconfont bangzhu"})])])],1)]),e("div",{staticClass:"contribution-rank--sort"},[e("div",{staticClass:"week",class:{"contribution-rank--sort__selected":"week"===t.contributionParams.sort},on:{click:function(e){return t.changeRankSort("week")}}},[t._v(" 周 ")]),e("div",{staticClass:"month",class:{"contribution-rank--sort__selected":"month"===t.contributionParams.sort},on:{click:function(e){return t.changeRankSort("month")}}},[t._v(" 月 ")])])]),t.contributionList.length?e("ul",{staticClass:"rank-list"},[t._l(t.contributionList,(function(s,i){return e("li",{key:s.uid,staticClass:"rank-position"},[e("div",{staticClass:"rank-num"},[t._v(" "+t._s((t.contributionParams.page-1)*t.contributionParams.pageSize+i+1)+" ")]),e("avatar",{attrs:{url:s.avatar,size:30,alt:s.nickname,uid:s.uid}}),e("div",{staticClass:"user-contribution"},[e("level-nickname",{attrs:{size:14,nickname:s.nickname,colors:t.MANAGER_TEXT_COLOR,uid:s.uid}}),e("div",{staticClass:"contribution-value"},[t._v("贡献值 "+t._s(s.contribution))])],1)],1)})),t.contributionList.length<10?t._l(10-t.contributionList.length,(function(s){return e("li",{key:"blank"+s,staticClass:"rank-position rank-position--blank"},[e("div",{staticClass:"rank-num"},[t._v(" "+t._s(t.contributionTotal+s)+" ")]),t._m(3,!0),e("div",{staticClass:"user-contribution--blank"},[t._v("虚位以待")])])})):t._e(),e("div",{staticClass:"contribution-pagination"},[e("i",{staticClass:"hanser icon-zuohuadong",class:{"contribution-pagination--disabled":1===t.contributionParams.page},on:{click:t.toPrevRank}}),e("i",{staticClass:"hanser icon-youhuadong",class:{"contribution-pagination--disabled":t.contributionParams.page*t.contributionParams.pageSize>=t.contributionTotal||t.contributionParams.page>=10},on:{click:t.toNextRank}})])],2):e("div",{staticClass:"no-data"},[t._v("暂无数据")])])])])},a=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"living-link-mobile",attrs:{href:"https://live.bilibili.com/255",target:"_blank"}},[e("div",{staticClass:"label-inner mobile"},[e("img",{attrs:{src:"https://cdn.2550505.com/share/legacy-sso/living.gif",width:"12"}}),e("span",[t._v("直播中")])])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"order__checkbox-toggle",attrs:{for:"cb"}},[e("span",{staticClass:"order__checkbox-toggle__item"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"living-label"},[e("div",{staticClass:"label-inner"},[e("img",{attrs:{src:"https://cdn.2550505.com/share/legacy-sso/living.gif",width:"12"}}),e("span",[t._v("直播中")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"blank-avatar"},[e("img",{attrs:{src:"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png",width:"30",height:"30",alt:"虚位以待"}})])}],n=(s("14d9"),s("11a4")),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list"},[e("ul",{staticClass:"posts"},[t.isMobile?[t._l(t.postList,(function(t){return e("li",{key:"backup"+t.postId,staticClass:"post"},[e("backup-post",{staticClass:"post-brief",attrs:{post:t}})],1)})),t.loading&&!t.loadDone?e("post-skeleton"):t._e()]:[t.loading&&!t.loadDone?e("post-skeleton"):t._l(t.postList,(function(t){return e("li",{key:"backup"+t.postId,staticClass:"post"},[e("backup-post",{staticClass:"post-brief",attrs:{post:t}})],1)}))]],2),t.isMobile?e("load-more",{key:"backup-list",attrs:{name:"backup-list","have-more":!t.loadDone},on:{"load-more":t.loadMorePosts}}):e("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:t.totalPosts},on:{"current-change":t.handleCurrentChange}})],1)},r=[],l=s("db04"),c=s("1078"),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"backup-post"},[e("div",{staticClass:"top"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.post.avatar,width:"50",height:"50",alt:t.post.nickname}})]),e("div",{staticClass:"info"},[e("div",{staticClass:"nickname"},[t._v(t._s(t.post.nickname))]),e("div",{staticClass:"time"},[t._v(t._s(t.post.time))])])]),e("div",{staticClass:"title"},[e("h3",[e("router-link",{staticClass:"title-link",attrs:{target:"_blank",to:"/backup/"+t.post.postId}},[t._v(t._s(t.post.title))])],1)]),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.post.content)}}),e("router-link",{staticClass:"show-all",attrs:{target:"_blank",to:"/backup/"+t.post.postId}},[t._v("查看全文>>")])],1)},u=[],h={name:"backup-post",props:["post"],data(){return{}}},p=h,g=(s("c237"),s("2877")),m=Object(g["a"])(p,d,u,!1,null,"c4c094c8",null),v=m.exports,f=s("4445"),b=s("3752"),k=s("2f62"),C={name:"list",data(){return{page:1,pageSize:20,totalPosts:0,loading:!1,loadDone:!1,postList:[]}},components:{BackupPost:v,LoadMore:f["a"],PostSkeleton:b["a"]},computed:{...Object(k["d"])({isMobile:t=>t.media.isMobile})},methods:{handleCurrentChange(t){this.page=t,this.getPosts()},loadMorePosts(){this.getPosts(),this.page++},getPosts(){this.loading||this.isMobile&&this.loadDone||(this.loading=!0,l["a"].get(c["a"].backupList,{params:{page:this.page,pageSize:this.pageSize}}).then(t=>{0===t.code?(this.isMobile?this.postList.push(...t.list):this.postList=t.list,this.totalPosts=t.total,t.list.length<this.pageSize&&(this.loadDone=!0)):this.$message({type:"warning",message:t.msg}),this.loading=!1}))}},mounted(){this.isMobile||this.getPosts()}},y=C,_=(s("e37e"),Object(g["a"])(y,o,r,!1,null,"e08b2ea8",null)),w=_.exports,x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hanser-editor"},[e("toolbar",{staticClass:"toolbar",attrs:{editor:t.editor,defaultConfig:t.toolbarConfig,mode:t.mode}}),e("editor",{staticClass:"editor",attrs:{defaultConfig:t.editorConfig,mode:t.mode},on:{onCreated:t.onCreated,customPaste:t.customPaste},model:{value:t.html,callback:function(e){t.html=e},expression:"html"}}),t.isShowModal?e("mention-modal",{attrs:{searchUserList:t.searchUserList},on:{hideMentionModal:t.hideMentionModal,insertMention:t.insertMention,"mention-update":t.mentionUpdate}}):t._e(),e("div",{staticClass:"operations"},[t._t("addition"),e("h-button",{staticClass:"btn",on:{click:t.getHtml}},[t._v(t._s(t.btnText))])],2)],1)},M=[],P=s("a026"),L=s("cb23"),S=function(){return S=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var a in e=arguments[s])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},S.apply(this,arguments)};function T(t){var e="请使用 '@".concat(t,"' 事件，不要放在 props 中");return e+"\nPlease use '@".concat(t,"' event instead of props")}var I=P["default"].extend({render:function(t){return t("div",{ref:"box"})},name:"Editor",data:function(){return{curValue:"",editor:null}},props:["defaultContent","defaultConfig","mode","defaultHtml","value"],mounted:function(){this.create()},watch:{value:function(t){t===this.curValue||this.setHtml(t)}},methods:{setHtml:function(t){var e=this.editor;null!=e&&e.setHtml(t)},create:function(){var t=this;if(null!=this.$refs.box){var e=this.defaultConfig||{},s=JSON.stringify(Array.isArray(this.defaultContent)?this.defaultContent:[]);Object(L["createEditor"])({selector:this.$refs.box,html:this.defaultHtml||this.value||"",config:S(S({},e),{onCreated:function(s){if(t.editor=Object.seal(s),t.$emit("onCreated",s),e.onCreated){var i=T("onCreated");throw new Error(i)}},onChange:function(s){var i=s.getHtml();if(t.curValue=i,t.$emit("input",i),t.$emit("onChange",s),e.onChange){var a=T("onChange");throw new Error(a)}},onDestroyed:function(s){if(t.$emit("onDestroyed",s),e.onDestroyed){var i=T("onDestroyed");throw new Error(i)}},onMaxLength:function(s){if(t.$emit("onMaxLength",s),e.onMaxLength){var i=T("onMaxLength");throw new Error(i)}},onFocus:function(s){if(t.$emit("onFocus",s),e.onFocus){var i=T("onFocus");throw new Error(i)}},onBlur:function(s){if(t.$emit("onBlur",s),e.onBlur){var i=T("onBlur");throw new Error(i)}},customAlert:function(s,i){if(t.$emit("customAlert",s,i),e.customAlert){var a=T("customAlert");throw new Error(a)}},customPaste:function(s,i){if(e.customPaste){var a=T("customPaste");throw new Error(a)}var n;return t.$emit("customPaste",s,i,(function(t){n=t})),n}}),content:JSON.parse(s),mode:this.mode||"default"})}}}}),$=P["default"].extend({name:"Toolbar",render:function(t){return t("div",{ref:"box"})},props:["editor","defaultConfig","mode"],methods:{create:function(t){null!=this.$refs.box&&null!=t&&(L["DomEditor"].getToolbar(t)||Object(L["createToolbar"])({editor:t,selector:this.$refs.box,config:this.defaultConfig||{},mode:this.mode||"default"}))}},watch:{editor:{handler:function(t){null!=t&&this.create(t)},immediate:!0}}}),E=s("c4eb"),O=s.n(E),z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mention-modal",style:t.modalStyle},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchVal,expression:"searchVal"}],ref:"input",staticClass:"mention-input",domProps:{value:t.searchVal},on:{keyup:t.inputKeyupHandler,input:function(e){e.target.composing||(t.searchVal=e.target.value)}}}),e("ul",{staticClass:"mention-list"},t._l(t.searchUserList,(function(s){return e("li",{key:s.uid,on:{click:function(e){return t.insertMentionHandler(s)}}},[t._v(t._s(s.nickname))])})),0)])},j=[],D={name:"MentionModal",props:["searchUserList"],data(){return{top:"",left:"",timer:null,interval:1e3,searchVal:""}},computed:{searchedList(){const t=this.searchVal.trim().toLowerCase();return this.list.filter(e=>{const s=e.name.toLowerCase();return s.indexOf(t)>=0})},modalStyle(){return{top:this.top,left:this.left}}},methods:{clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)},setTimer(){this.timer||(this.timer=setTimeout(()=>{this.clearTimer(),this.$emit("mention-update",this.searchVal)},this.interval))},resetTimer(){this.clearTimer(),this.timer=setTimeout(()=>{this.clearTimer(),this.$emit("mention-update",this.searchVal)},this.interval)},inputKeyupHandler(t){if(this.timer)this.resetTimer();else{if("Escape"===t.key&&this.$emit("hideMentionModal"),"Enter"===t.key){const t=this.searchedList[0];t&&this.insertMentionHandler(t)}this.searchVal&&this.$emit("mention-update",this.searchVal),this.setTimer()}},insertMentionHandler(t){this.$emit("insertMention",t),this.$emit("hideMentionModal")}},mounted(){const t=document.getSelection(),e=null===t||void 0===t?void 0:t.getRangeAt(0);if(null==e)return;const{offsetWidth:s,offsetHeight:i,offsetTop:a,offsetLeft:n}=e.endContainer.parentElement;this.top=a+i+30+"px",this.left=n+s+5+"px",this.$refs.input.focus()}},H=D,R=(s("8b76"),Object(g["a"])(H,z,j,!1,null,null,null)),N=R.exports,A=s("dbbe"),B=(s("d9e2"),s("3786")),U=s("4360"),V=s("0e5c");const F=20971520,K=20,W=["image/*"],G=async(t,e=!1)=>{if(!U["a"].state.users.userInfo.uid)throw new Error("必须登录后才能上传图片");try{const s=await l["a"].get(B["a"].upload);if(0!==s.code)return;const{auth:i,token:a}=s;if(1===t.length){const s=t[0],n=await V["a"].uploadSingleFile(s,a,U["a"].state.users.userInfo.uid,i,(t,e)=>{window.$vm.$showProcess({title:"图片上传中...",value:t,max:e})},e);if(0===n.code){const{thumbnail:t}=n;return[t]}return[""]}{const s=await V["a"].uploadMultiFiles(t,a,U["a"].state.users.userInfo.uid,i,(t,e,s)=>{window.$vm.$showProcess({title:s,value:t,max:e})},e),n=s.map(t=>t.thumbnail);return n}}catch(s){throw new Error(s.message)}};var Y=s("bc3a"),J=s.n(Y),X=s("365c"),Z=s("ed08"),q=s.n(Z),Q=s("808e");L["Boot"].registerModule(O.a);const tt='<svg viewBox="0 0 1024 1024"><path d="M204.8 505.6m-76.8 0a76.8 76.8 0 1 0 153.6 0 76.8 76.8 0 1 0-153.6 0Z"></path><path d="M505.6 505.6m-76.8 0a76.8 76.8 0 1 0 153.6 0 76.8 76.8 0 1 0-153.6 0Z"></path><path d="M806.4 505.6m-76.8 0a76.8 76.8 0 1 0 153.6 0 76.8 76.8 0 1 0-153.6 0Z"></path></svg>',et='<svg viewBox="0 0 1024 1024"><path d="M959.877 128l0.123 0.123v767.775l-0.123 0.122H64.102l-0.122-0.122V128.123l0.122-0.123h895.775zM960 64H64C28.795 64 0 92.795 0 128v768c0 35.205 28.795 64 64 64h896c35.205 0 64-28.795 64-64V128c0-35.205-28.795-64-64-64zM832 288.01c0 53.023-42.988 96.01-96.01 96.01s-96.01-42.987-96.01-96.01S682.967 192 735.99 192 832 234.988 832 288.01zM896 832H128V704l224.01-384 256 320h64l224.01-192z"></path></svg>';let st=null;var it={name:"hanser-editor",components:{Editor:I,Toolbar:$,HButton:A["a"],MentionModal:N},props:["text"],data(){return{editor:null,html:"",isShowModal:!1,searchUserList:[],toolbarConfig:{toolbarKeys:["bold","underline","italic","divider","emotions",{key:"group-more-style",title:"更多",iconSvg:tt,menuKeys:["through","sup","sub","clearStyle"]},"|","todo","|","insertLink",{key:"group-image",title:"图片",iconSvg:et,menuKeys:["insertImage","uploadImage"]},"|","undo","redo"]},mode:"default"}},methods:{onCreated(t){this.editor=Object.seal(t);const{hoverbarKeys:e}=this.editor.getConfig();e.text.menuKeys=["insertLink","|","bold","underline","italic","through","sup","sub","clearStyle"],e.image.menuKeys=[],e.video.menuKeys=[],e.pre.menuKeys=[],e.table.menuKeys=[]},hideMentionModal(){this.isShowModal=!1},showMentionModal(){this.isShowModal=!0},getColorStyle(t){const e=q.a.getLevelInfo(t,this.levels),s=e.color.split(","),i="\n                font-weight:bold;\n                width:128px;\n                white-space:nowrap;\n                text-overflow: ellipsis;\n                overflow: hidden;\n                font-size:16px;\n            ";if("#606266"===s[0])return i+`color: ${Q["g"]};`;if(1===s.length)return i+`color: ${s[0]};`;const[a,n]=s;return i+`\n                backgroundImage:linear-gradient(135deg,${a},${n});\n                backgroundClip:text;\n                -webkit-background-clip:text;\n                color:transparent;\n            `},insertMention(t){if(this.editor){const{uid:e,avatar:s,nickname:i,exp:a}=t,n=q.a.getLevelInfo(a,this.levels);this.editor.insertNode({type:"mention-user",uid:e,avatar:s,nickname:i,exp:a,level:n.level,levelName:n.name,colorStyle:this.getColorStyle(a),children:[{text:""}]}),this.editor.restoreSelection(),this.editor.deleteBackward("character"),this.editor.move(1)}},getHtml(){console.log(this.html),this.$emit("edit",this.html)},async customPaste(t,e,s){const{clipboardData:i}=e;if(i.types&&i.types.length)if(i.types.includes("text/plain")){const e=i.getData("Text");t.insertText(e)}else if(i.types.includes("Files")&&i.files&&i.files.length){const{files:e}=i,s=await G(e);s.forEach(e=>{t.insertNode({type:"image",src:e,children:[{text:""}]})})}return s(!1),e.preventDefault(),!1},mentionUpdate(t){if(st&&st.cancel("取消上个请求"),!t)return;st=J.a.CancelToken.source();const e="";J.a.get(e+X["a"].searchUser,{cancelToken:st.token,params:{keyword:t}}).then(t=>{0===t.data.code&&(this.searchUserList=t.data.list.slice(0,50))}).catch(()=>{console.log("取消请求")})}},computed:{...Object(k["d"])({user:t=>t.users.userInfo,levels:t=>t.level.levels}),btnText(){return this.text||"发布"},editorConfig(){const t=this;return{placeholder:"请输入内容...",maxLength:5e3,EXTEND_CONF:{mentionConfig:{showModal:this.showMentionModal,hideModal:this.hideMentionModal}},MENU_CONF:{uploadImage:{fileName:"picture",maxFileSize:F,maxNumberOfFiles:K,allowedFileTypes:W,timeout:6e4,customUpload(){return!1},async customBrowseAndUpload(){const e=document.getElementById("upload-img");e.addEventListener("change",async e=>{const{files:s}=e.target;if(s.length>K)return void t.$message({type:"warning",message:`最多上传${K}张图片`});if([...s].some(t=>t.size>F))return void t.$message({type:"warning",message:"但文件大小不能超过20M"});const i=await G(s);i.forEach(e=>{t.editor&&t.editor.insertNode({type:"image",src:e,children:[{text:""}]})})}),e.click()}}}}}},beforeDestroy(){this.editor&&this.editor.destroy()}},at=it,nt=(s("adf1"),Object(g["a"])(at,x,M,!1,null,"63759a3b",null)),ot=nt.exports,rt=ot,lt=s("29b0"),ct=s("00b6"),dt=s("2287"),ut=s("7150"),ht=s("e51f"),pt=function(){var t=this,e=t._self._c;return e("a",{attrs:{href:t.guessingRoot.domain,target:"_blank"}},[e("div",{staticClass:"container"},[e("img",{staticClass:"banner_img",attrs:{src:"https://cdn.2550505.com/share/legacy-sso/puzzle-puzzle.png"}}),e("div",{staticClass:"inner_box"},[e("div",{staticClass:"left_text_outer_box"},[e("div",{staticClass:"left_text_inner_box"},[e("span",[t._v(t._s(t.guessInfo.info.result1))])])]),e("div",{staticClass:"progress"},[e("div",{staticClass:"progress_inner_box"},[e("div",{staticClass:"box"},[e("div",{staticClass:"bar"}),[e("div",{style:{backgroundColor:"#44b3ff",width:t.rightBarWidth,height:"14px",borderTopLeftRadius:"8.5px",borderBottomLeftRadius:"8.5px",borderTopRightRadius:0===t.guessInfo.result1.total?"8.5px":0,borderBottomRightRadius:0===t.guessInfo.result1.total?"8.5px":0,transform:"translateY(-17px) rotate(180deg)",position:"absolute",right:0}}),e("div",{style:{backgroundColor:"#ff6f60",width:100*t.result1Rate+"%",height:"14px",borderRadius:"8.5px",transform:"translateY(-17px)"}})]],2)])]),e("div",{staticClass:"left_text_outer_box"},[e("div",{staticClass:"left_text_inner_box2"},[e("span",[t._v(t._s(t.guessInfo.info.result2))])])])]),e("div",{staticClass:"banner_title_box"},[e("span",[t._v(t._s(t.guessInfo.info.title))])]),e("img",{staticClass:"banner_img",attrs:{src:"https://cdn.2550505.com/share/legacy-sso/puzzle-vs.png"}})])])},gt=[],mt=s("3b81"),vt={name:"banner",props:{guessInfo:{type:Object,default:()=>({info:{id:73,title:"这局会赢吗？我们来个长点的标题测一下",result1:"能不能",result2:"不能",startTime:"1723-09-03 22:16:51",lockTime:null,status:0},result1:{total:0,rate:1},result2:{total:0,rate:0}})}},data(){return{guessingRoot:mt}},computed:{result1Rate(){return this.guessInfo.result1.total+this.guessInfo.result2.total===0?.5:this.guessInfo.result1.total/(this.guessInfo.result1.total+this.guessInfo.result2.total)},rightBarWidth(){return 0===this.guessInfo.result1.total?"100%":100*Math.min(1-this.result1Rate+.1,1)+"%"}}},ft=vt,bt=(s("6c7a"),Object(g["a"])(ft,pt,gt,!1,null,"498242e5",null)),kt=bt.exports,Ct=kt,yt={name:"main-index",props:["sort"],metaInfo(){return{title:"毛怪俱乐部",meta:[{name:"keywords",content:"毛怪,hanser,社区,毛怪俱乐部"},{name:"description",content:"欢迎来到毛怪俱乐部!"}]}},data(){return{page:1,pageSize:20,totalPosts:0,filter:0,topPost:[],posts:[],loadDone:!1,loading:!1,liking:!1,checked:0,guessInfo:{},menu:[{text:"看帖",hash:""},{text:"精品",hash:"#valued"},{text:"鱼吧备份",hash:"#backup"}],notices:[{text:"问题反馈",image:"https://cdn.2550505.com/share/legacy-sso/feedback.jpeg",link:"/tag/7"},{text:"入站必读",image:"https://cdn.2550505.com/share/legacy-sso/notice.jpeg",link:"/post/9091"},{text:"问题反馈",image:"https://cdn.2550505.com/share/legacy-sso/feedback.jpeg",link:"/tag/7"},{text:"入站必读",image:"https://cdn.2550505.com/share/legacy-sso/notice.jpeg",link:"/post/9091"}],navList:[],postLoading:!1,start:0,end:6,managers:[],living:{status:-1,cover:"",frame:"",title:""},showCover:!0,contributionParams:{sort:"week",page:1,pageSize:10},contributionList:[],contributionTotal:0,MANAGER_TEXT_COLOR:Q["f"]}},components:{PostBrief:n["a"],Editor:lt["default"],HanserEditor:rt,List:w,LoadMore:f["a"],PostSkeleton:b["a"],Avatar:ut["a"],LevelNickname:ht["a"],Banner:Ct},computed:{...Object(k["d"])({levels:t=>t.level.levels,levelInfo:t=>t.level.levelInfo,user:t=>t.users.userInfo,isMobile:t=>t.media.isMobile,theme:t=>t.config.theme}),bannerImage(){return"new-year-2023"===this.theme?"https://cdn.2550505.com/share/legacy-sso/new-year-2023-banner.jpg":"new-year-2022"===this.theme?"https://cdn.2550505.com/share/legacy-sso/new-year-2022-new-year-2022-banner.jpg":"new-year-2024"===this.theme?"https://cdn.2550505.com/share/legacy-sso/new-year-2024-main-banner.jpg":"https://cdn.2550505.com/share/legacy-sso/main-banner.jpg"},showBackup(){return"#backup"===this.$route.hash},showSort(){return""===this.$route.hash},showManagers(){return this.managers.slice(this.start,this.start+6)},isLogin(){return!!this.user.uid},cover(){return this.showCover?this.living.cover:this.living.frame}},methods:{...Object(k["c"])({addUserExp:"users/addUserExp",setGuessInfo:"guess/setGuessInfo"}),getBannerInfo(){l["a"].get(dt["a"].running).then(t=>{if(0===t.code){const{list:e}=t;this.guessInfo=e[0]||{},this.setGuessInfo(this.guessInfo)}})},showFrame(){this.showCover=!1},hideFrame(){this.showCover=!0},search(){this.$showSearchDialog({keyword:""})},toPrev(){this.start>0&&(this.start-=6,this.end=this.start+6)},toNext(){const t=this.managers.length;this.end<t&&(this.start+=6,this.end=this.start+6)},reset(){this.page=1,this.loadDone=!1,this.posts=[],this.topPost=[]},scrollToTop(){const t=document.getElementsByClassName("layout-body")[0];t.scrollTop=0},showDownload(){this.$showAppDownloadDialog()},getPostList(){this.loading=!0,this.isMobile||this.scrollToTop();let t="";t=this.isLogin?X["a"].getPostList:X["a"].getBriefPostList,l["a"].get(t,{params:{page:this.page,pageSize:this.pageSize,order:this.sort,filter:this.filter}}).then(t=>{0===t.code?(t.result.length>0?this.loadDone=!1:this.loadDone=!0,this.isMobile?this.posts.push(...t.result):(this.posts=t.result,this.$emit("back-top")),1===this.page&&(this.topPost=t.topPost),this.totalPosts=t.total,this.loading=!1):this.$message({type:"warning",message:t.msg})})},getNavList(){l["a"].get(X["a"].navList).then(t=>{0===t.code?this.navList=t.list:this.$message({type:"warning",message:t.msg})})},like(t){this.liking?this.$message({type:"warning",message:"操作太快了~"}):(this.liking=!0,l["a"].post(X["a"].like+"/"+t.id,{author:t.author.uid}).then(e=>{if(0!==e.code)return this.$message({type:"warning",message:e.msg}),void(this.liking=!1);t.liked=!!e.liked,this.addUserExp(e.exp),t.liked?(t.likes+=1,1===this.user.uid&&(t.hanserLike=!0)):(t.likes-=1,1===this.user.uid&&(t.hanserLike=!1)),this.liking=!1}))},async post(t){if(!this.user.uid)return void this.$message({type:"warning",message:"请登录后重试"});if(!t.title||!t.content)return void this.$message({type:"warning",message:"标题或内容不能为空"});const e={title:t.title,content:t.content};if(t.lockTime&&t.time&&(e.lockTime=t.lockTime,e.time=t.time),this.postLoading=!0,Object.keys(t.voteData).length>0){const s=await l["a"].post(ct["a"].create,t.voteData);if(0!==s.code)return this.$message({type:"warning",message:"创建投票失败 "+s.msg}),void(this.postLoading=!1);e.vote=s.id}const s=await l["a"].post(X["a"].hansering,e);0===s.code?(this.$message({type:"success",message:s.msg}),this.addUserExp(s.exp),this.$refs["editor"].clear(),this.page=1,this.getPostList()):this.$message({type:"warning",message:s.msg}),this.postLoading=!1},handleCurrentChange(t){this.page=t,this.getPostList()},inWeek(t){const e=6048e5;return(new Date).valueOf()-new Date(t.replace(/-/g,"/"))<e},formatTime(t){return q.a.dateFormat("mm-dd",new Date(t.replace(/-/g,"/")))},loadMorePosts(){this.loading||(this.page++,this.getPostList())},getManager(){l["a"].get(X["a"].manager).then(t=>{this.managers=t.manager})},changeSort(){this.$emit("change-sort",Number(!this.sort))},getLivingInfo(){l["a"].get(X["a"].getRoomInfo).then(t=>{0===t.code&&(this.living.status=t.data.live_status,this.living.cover=t.data.user_cover,this.living.frame=t.data.keyframe,this.living.title=t.data.title)})},changeRankSort(t){t!==this.contributionParams.sort&&(this.contributionParams.sort=t,this.contributionParams.page=1,this.getContributionList())},getContributionList(){l["a"].get(X["a"].contributionRank,{params:{page:this.contributionParams.page,pageSize:this.contributionParams.pageSize,sort:this.contributionParams.sort}}).then(t=>{0===t.code&&(this.contributionList=t.list,this.contributionTotal=t.total)})},toPrevRank(){1!==this.contributionParams.page&&(this.contributionParams.page-=1,this.getContributionList())},toNextRank(){this.contributionParams.page*this.contributionParams.pageSize>=this.contributionTotal||this.contributionParams.page>=10||(this.contributionParams.page+=1,this.getContributionList())},openYear(){window.open("/year/2024")}},watch:{sort(){this.reset(),this.getPostList()},"$route.hash"(t){this.page=1,this.posts=[],this.topPost=[],""===t&&(this.filter=0),"#valued"===t&&(this.filter=1),"#backup"!==t&&(this.reset(),this.getPostList())}},mounted(){this.getManager(),this.getBannerInfo(),this.checked=this.sort;const{hash:t}=this.$route;""===t&&(this.filter=0),"#valued"===t&&(this.filter=1),this.$nextTick(()=>{const t=this.$refs.contributionRank;t&&t.offsetParent&&(this.$refs.layoutUser.style=`top: -${t.offsetTop+t.offsetParent.offsetTop+60}px`)}),this.getPostList(),this.getNavList(),this.getLivingInfo(),this.getContributionList()}},_t=yt,wt=(s("5197"),Object(g["a"])(_t,i,a,!1,null,"3cfa8899",null));e["default"]=wt.exports},c4eb:function(t,e,s){!function(e,i){t.exports=i(s("cb23"))}(self,t=>(()=>{"use strict";var e={857:e=>{e.exports=t}},s={};function i(t){var a=s[t];if(void 0!==a)return a.exports;var n=s[t]={exports:{}};return e[t](n,n.exports,i),n.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{i.r(a),i.d(a,{default:()=>l});var t=i(857);function e(t,e,s,i,a){return{sel:t,data:e,children:s,text:i,elm:a,key:void 0===e?void 0:e.key}}const s=Array.isArray;function n(t){return"string"==typeof t||"number"==typeof t||t instanceof String||t instanceof Number}function o(t,e,s){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==s&&void 0!==e)for(let i=0;i<e.length;++i){const t=e[i];if("string"==typeof t)continue;const s=t.data;void 0!==s&&o(s,t.children,t.sel)}}function r(t,i,a){let r,l,c,d={};if(void 0!==a?(null!==i&&(d=i),s(a)?r=a:n(a)?l=a.toString():a&&a.sel&&(r=[a])):null!=i&&(s(i)?r=i:n(i)?l=i.toString():i&&i.sel?r=[i]:d=i),void 0!==r)for(c=0;c<r.length;++c)n(r[c])&&(r[c]=e(void 0,void 0,void 0,r[c],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||o(d,r,t),e(t,d,r,l,void 0)}const l={editorPlugin:function(e){var s=e.insertText,i=e.isInline,a=e.isVoid,n=e;return n.insertText=function(e){if(t.DomEditor.getSelectedElems(n).some((function(t){return n.isVoid(t)})))s(e);else{var i=function(t){return t.getConfig().EXTEND_CONF.mentionConfig}(n),a=i.showModal,o=i.hideModal;"@"===e&&setTimeout((function(){a&&a(n),setTimeout((function(){function t(){o&&o(n)}n.once("fullScreen",t),n.once("unFullScreen",t),n.once("scroll",t),n.once("modalOrPanelShow",t),n.once("modalOrPanelHide",t),n.on("change",(function e(){null!=n.selection&&(t(),n.off("change",e))}))}))})),s(e)}},n.isInline=function(e){return"mention"===t.DomEditor.getNodeType(e)||i(e)},n.isVoid=function(e){return"mention"===t.DomEditor.getNodeType(e)||a(e)},n},renderElems:[{type:"mention",renderElem:function(e,s,i){var a=t.DomEditor.isNodeSelected(i,e),n=e.value;return r("span",{props:{contentEditable:!1},style:{marginLeft:"3px",marginRight:"3px",backgroundColor:"var(--w-e-textarea-slight-bg-color)",border:a?"2px solid var(--w-e-textarea-selected-border-color)":"2px solid transparent",borderRadius:"3px",padding:"0 3px"}},"@".concat(void 0===n?"":n))}}],elemsToHtml:[{type:"mention",elemToHtml:function(t,e){var s=t,i=s.value,a=void 0===i?"":i,n=s.info,o=void 0===n?{}:n,r=encodeURIComponent(JSON.stringify(o));return'<span data-w-e-type="mention" data-w-e-is-void data-w-e-is-inline data-value="'.concat(a,'" data-info="').concat(r,'">@').concat(a,"</span>")}}],parseElemsHtml:[{selector:'span[data-w-e-type="mention"]',parseElemHtml:function(t,e,s){var i,a=t.getAttribute("data-value")||"",n=decodeURIComponent(t.getAttribute("data-info")||"");try{i=JSON.parse(n)}catch(t){i=n}return{type:"mention",value:a,info:i,children:[{text:""}]}}}]}})(),a})())},d42e:function(t,e,s){},dc2b:function(t,e,s){"use strict";s("7ada")},e37e:function(t,e,s){"use strict";s("9f8d")},e9ec:function(t,e,s){"use strict";s("18dd")},ebb2:function(t,e,s){},eff9:function(t,e,s){"use strict";s("2b0f")},f6f5:function(t,e,s){t.exports=s.p+"img/download.fc2a0e91.png"},f731:function(t,e,s){}}]);