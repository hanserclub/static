(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2de72310"],{"415e":function(t,s,a){},"4f63":function(t,s,a){"use strict";a("415e")},c860:function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t._self._c;return t.valid?s("div",{staticClass:"oauth2"},[t.isLogin?s("div",{staticClass:"authen"},[s("div",{staticClass:"auth"},[s("div",{staticClass:"user"},[s("div",{staticClass:"user-avatar",on:{click:t.authLogin}},[s("img",{attrs:{width:"60",height:"60",src:t.user.avatar,alt:t.user.nickname}})]),s("div",{staticClass:"nickname"},[t._v(" "+t._s(t.user.nickname)+" ")])]),t._m(0),s("div",{staticClass:"auth-to"},[s("div",{staticClass:"user"},[s("div",{staticClass:"user-avatar"},[s("img",{attrs:{width:"60",height:"60",src:t.info.icon,alt:t.info.name}})]),s("div",{staticClass:"nickname"},[t._v(" "+t._s(t.info.name)+" ")])])])]),s("div",{staticClass:"split"}),s("div",{staticClass:"intro"},[s("p",[t._v("点击头像进行授权")]),s("p",[t._v("授权后"),s("span",{staticClass:"keyword"},[t._v(t._s(t.info.name))]),t._v("将获取您以下信息：")]),t._m(1)])]):s("div",{staticClass:"to-login"},[t._v(" 请先"),s("a",{attrs:{href:"/login"}},[t._v("登录")])])]):t._e()},e=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"auth-icon"},[s("i",{staticClass:"hanser icon-chaolianjie"})])},function(){var t=this,s=t._self._c;return s("ol",[s("li",[t._v("用户UID")]),s("li",[t._v("用户名")]),s("li",[t._v("头像")]),s("li",[t._v("用户经验值")]),s("li",[t._v("用户贡献值")]),s("li",[t._v("用户签名")]),s("li",[t._v("用户性别")]),s("li",[t._v("用户生日")])])}],n=a("db04"),r={info:"/auth/oauth2/info",auth:"/auth/oauth2/auth",token:"/auth/oauth2/token",userInfo:"/auth/oauth2/user-info"},u=a("2f62"),o={name:"oauth2",metaInfo(){return{title:"授权登录",meta:[{name:"keywords",content:"授权登录,毛怪,hanser,社区,毛怪俱乐部"},{name:"description",content:"授权登录第三方服务"}]}},data(){return{info:{name:"",icon:""},authCode:""}},computed:{...Object(u["d"])({user:t=>t.users.userInfo}),query(){return this.$route.query},redirect_url(){return this.query.redirect_url},state(){return this.query.state},appId(){return Number(this.query.appId)||0},valid(){return this.redirect_url&&this.state&&this.appId},isLogin(){return!!this.user.uid}},methods:{getInfo(){n["a"].get(r.info,{params:{appId:this.appId}}).then(t=>{0!==t.code?this.$message({type:"warning",message:t.msg}):this.info=t.info})},authLogin(){n["a"].get(r.auth,{params:{appId:this.appId}}).then(t=>{0!==t.code?this.$message({type:"warning",message:t.msg}):(this.authCode=t.auth,window.location.replace(`${this.redirect_url}?appId=${this.appId}&state=${this.state}&auth=${this.authCode}`))})}},mounted(){this.valid?this.getInfo():this.$message({type:"danger",message:"缺少参数"})}},h=o,c=(a("4f63"),a("2877")),d=Object(c["a"])(h,i,e,!1,null,"26a21b6c",null);s["default"]=d.exports}}]);