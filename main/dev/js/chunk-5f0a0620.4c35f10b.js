(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f0a0620"],{1078:function(t,s,e){"use strict";s["a"]={backupList:"/backup/list",backupDetail:"/backup/detail/",backupReply:"/backup/post/reply/"}},"18dd":function(t,s,e){},3752:function(t,s,e){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"post-skeleton"},[s("el-skeleton",{attrs:{animated:"",count:10}},[s("template",{slot:"template"},[s("div",{staticClass:"sk-top"},[s("el-skeleton-item",{staticStyle:{width:"50px",height:"50px"},attrs:{variant:"image"}}),s("div",{staticClass:"sk-info"},[s("div",{staticClass:"sk-nickname"},[s("el-skeleton-item",{staticStyle:{width:"64px"},attrs:{variant:"text"}})],1),s("div",{staticClass:"sk-time"},[s("el-skeleton-item",{staticStyle:{width:"64px"},attrs:{variant:"text"}})],1)]),s("el-skeleton-item",{staticStyle:{width:"80px"},attrs:{variant:"text"}})],1),s("el-skeleton-item",{staticStyle:{width:"200px",margin:"10px 0"},attrs:{variant:"h3"}}),s("el-skeleton-item",{staticStyle:{width:"100%"},attrs:{variant:"text"}}),s("el-skeleton-item",{staticStyle:{width:"100%"},attrs:{variant:"text"}}),s("div",{staticClass:"sk-divider"})],1)],2)],1)},a=[],n={name:"post-skeleton"},o=n,r=(e("dc2b"),e("2877")),l=Object(r["a"])(o,i,a,!1,null,"d50f0d4c",null);s["a"]=l.exports},"54e4":function(t,s,e){},"6c7a":function(t,s,e){"use strict";e("a6d0")},7150:function(t,s,e){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"avatar",style:t.avatarStyle,on:{click:t.toHomepage}},[s("img",{attrs:{src:t.avatarUrl,width:t.size,height:t.size,alt:t.alt||""}})])},a=[],n={name:"avatar",props:["url","size","alt","uid"],computed:{avatarStyle(){return`width: ${this.size}px; height: ${this.size}px`},avatarUrl(){return this.url||"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png"}},methods:{toHomepage(){window.open("/space/"+this.uid)}}},o=n,r=(e("e9ec"),e("2877")),l=Object(r["a"])(o,i,a,!1,null,"5f6430d2",null);s["a"]=l.exports},"7ada":function(t,s,e){},"98ce":function(t,s,e){},"9f8d":function(t,s,e){},a6d0:function(t,s,e){},bb11:function(t,s,e){"use strict";e("54e4")},c237:function(t,s,e){"use strict";e("98ce")},c3a8:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"main-index"},[s("nav",{staticClass:"nav-wrapper"},[s("ul",{staticClass:"nav-list"},[t._l(t.menu,(function(e){return s("li",{key:e.text,staticClass:"menu-item"},[s("router-link",{class:{selected:t.$route.hash===e.hash},attrs:{to:"/"+e.hash}},[t._v(t._s(e.text))])],1)})),s("li",{staticClass:"menu-item menu-item-icon"},[t.isMobile?s("div",{staticClass:"search",on:{click:t.search}},[s("i",{staticClass:"hanser icon-sousuo1"})]):t._e()]),t.isMobile&&1===t.living.status?s("li",{staticClass:"menu-item"},[t._m(0)]):t._e(),t.isMobile?s("li",{staticClass:"menu-item menu-item-icon"},[s("div",{staticClass:"download-icon",on:{click:t.showDownload}},[s("img",{attrs:{width:"18",src:e("f6f5"),alt:"download"}})])]):t._e()],2)]),s("div",{staticClass:"layout-post__banner"},[!t.isMobile&&t.guessInfo&&t.guessInfo.info&&t.guessInfo.info.id?s("Banner",{attrs:{guessInfo:t.guessInfo}}):s("img",{staticClass:"banner",attrs:{src:t.bannerImage}})],1),t.isMobile&&t.isLogin&&t.showSort?s("div",{staticClass:"sort"},[s("span",[t._v("帖子排序")]),s("div",{staticClass:"order__checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"order__checkbox-toggle",attrs:{id:"cb",type:"checkbox"},domProps:{checked:Array.isArray(t.checked)?t._i(t.checked,null)>-1:t.checked},on:{change:[function(s){var e=t.checked,i=s.target,a=!!i.checked;if(Array.isArray(e)){var n=null,o=t._i(e,n);i.checked?o<0&&(t.checked=e.concat([n])):o>-1&&(t.checked=e.slice(0,o).concat(e.slice(o+1)))}else t.checked=a},t.changeSort]}}),t._m(1)])]):t._e(),t.showBackup?s("div",{staticClass:"backup"},[s("list")],1):s("div",{staticClass:"layout-post__main"},[s("ul",{staticClass:"posts"},[t.isMobile?[t._l(t.topPost,(function(e){return s("li",{key:"top"+e.id,staticClass:"post"},[s("post-brief",{staticClass:"post-brief",attrs:{brief:!0,post:e,author:e.author,levels:t.levels},on:{like:function(s){return t.like(e)}}})],1)})),t._l(t.posts,(function(e){return s("li",{key:e.id,staticClass:"post"},[s("post-brief",{staticClass:"post-brief",attrs:{author:e.author,post:e,levels:t.levels},on:{like:function(s){return t.like(e)}}})],1)})),t.loading&&!t.loadDone?s("post-skeleton"):t._e()]:[t.loading&&!t.loadDone?s("post-skeleton"):[t._l(t.topPost,(function(e){return s("li",{key:"top"+e.id,staticClass:"post"},[s("post-brief",{staticClass:"post-brief",attrs:{author:e.author,brief:!0,post:e,levels:t.levels},on:{like:function(s){return t.like(e)}}})],1)})),t._l(t.posts,(function(e){return s("li",{key:e.id,staticClass:"post"},[s("post-brief",{staticClass:"post-brief",attrs:{author:e.author,post:e,levels:t.levels},on:{like:function(s){return t.like(e)}}})],1)}))]]],2),t.isMobile?s("load-more",{key:"post-list",attrs:{name:"post-list","have-more":!t.loadDone},on:{"load-more":t.loadMorePosts}}):s("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:t.totalPosts},on:{"current-change":t.handleCurrentChange}}),s("div",{staticClass:"post-editor"},[s("post-editor",{on:{"post-done":t.postDone}})],1)],1),s("div",{ref:"layoutUser",staticClass:"layout-user"},[-1!==t.living.status?s("div",{staticClass:"living"},[s("div",{staticClass:"captain"},[t._v("直播间")]),1!==t.living.status?s("div",{staticClass:"not-living"},[s("a",{staticClass:"living-link",attrs:{href:"https://live.bilibili.com/255",target:"_blank"}},[t._v("还没开播呢，去直播间逛一逛~")])]):t._e(),1===t.living.status?s("div",{staticClass:"on-living"},[s("a",{staticClass:"living-cover",attrs:{href:"https://live.bilibili.com/255",target:"_blank"},on:{mouseenter:t.showFrame,mouseleave:t.hideFrame}},[t._m(2),s("img",{attrs:{referrerpolicy:"no-referrer",src:t.cover,width:"100%",alt:""}})]),s("h3",{staticClass:"living-title"},[t._v(t._s(t.living.title))])]):t._e()]):t._e(),s("div",{staticClass:"notification"},[s("div",{staticClass:"captain"},[t._v("公告栏")]),s("div",{staticClass:"layout-notice"},[s("el-carousel",{attrs:{height:"108px",interval:6e3,"indicator-position":"none"}},t._l(t.notices,(function(t,e){return s("el-carousel-item",{key:t.link+e},[s("router-link",{attrs:{to:t.link,title:t.text,target:"_blank"}},[s("img",{attrs:{width:"100%",height:"108",alt:t.text,src:t.image}})])],1)})),1)],1),s("div",{staticClass:"layout-user__manager"},[s("ul",{staticClass:"link-nav-list"},t._l(t.navList,(function(e){return s("li",{key:e.link,staticClass:"nav-item"},[s("el-popover",{attrs:{placement:"left",trigger:"hover"}},[s("p",[t._v(t._s(e.text))]),s("div",{attrs:{slot:"reference"},slot:"reference"},[s("router-link",{staticClass:"nav-link",attrs:{to:e.link}},[s("p",{staticClass:"nav-text"},[t.inWeek(e.time)?s("span",{staticClass:"new"},[t._v("NEW")]):t._e(),s("span",{staticClass:"nav-text-title"},[t._v(t._s(e.text))])]),s("div",{staticClass:"nav-time"},[t._v(t._s(t.formatTime(e.time)))])])],1)])],1)})),0)])]),t.managers.length?s("div",{staticClass:"manager"},[s("div",{staticClass:"manager-member"},[s("div",{staticClass:"manager-member--wrapper"},[s("div",{staticClass:"captain"},[t._v("管理员")]),s("div",{staticClass:"account-wrapper"},t._l(t.showManagers.slice(0,3),(function(e){return s("router-link",{key:e.uid,staticClass:"account",attrs:{to:"/space/"+e.uid,target:"_blank",title:e.nickname}},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.avatar,width:"40",height:"40",alt:e.nickname}})]),s("p",{staticClass:"nickname"},[t._v(t._s(e.nickname))])])})),1),s("div",{staticClass:"account-wrapper"},t._l(t.showManagers.slice(3),(function(e){return s("router-link",{key:e.uid,staticClass:"account",attrs:{to:"/space/"+e.uid,target:"_blank",title:e.nickname}},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.avatar,width:"40",height:"40",alt:e.nickname}})]),s("p",{staticClass:"nickname"},[t._v(t._s(e.nickname))])])})),1)])]),s("div",{staticClass:"pagination"},[s("div",{staticClass:"pagination-cart prev",class:{"pagination-disabled":0===t.start},on:{click:t.toPrev}},[s("i",{staticClass:"hanser icon-zuohuadong"})]),s("div",{staticClass:"pagination-cart next",class:{"pagination-disabled":t.end>=t.managers.length},on:{click:t.toNext}},[s("i",{staticClass:"hanser icon-youhuadong"})])])]):t._e(),s("div",{ref:"contributionRank",staticClass:"contribution-rank"},[s("div",{staticClass:"header"},[s("div",{staticClass:"header-title"},[s("div",{staticClass:"header-title--text"},[t._v("用户贡献榜")]),s("div",{staticClass:"header-title--help"},[s("el-popover",{attrs:{placement:"top-end","append-to-body":!1,title:"",width:"300",trigger:"hover"}},[s("div",{staticClass:"rule"},[s("div",{staticClass:"rule-header"},[t._v("规则")]),s("div",{staticClass:"content"},[s("div",{staticClass:"rule-title"},[t._v("贡献值和贡献榜")]),s("div",{staticClass:"rule-content"},[s("p",[t._v(" 用户通过在俱乐部主站或直播间的主动互动行为，可增加相应的贡献值。贡献值可用于兑换毛怪俱乐部主站的个性装扮、改名卡、补签卡等虚拟道具。 ")]),s("p",[t._v(" 用户贡献榜分为周榜和月榜，分别动态展示贡献值排行前100位的用户，每周/月最后一天晚上23:59重置榜单。 ")])]),s("div",{staticClass:"rule-title"},[t._v("获得贡献值的方法")]),s("div",{staticClass:"rule-content"},[s("p",[t._v(" 用户在主站发帖、评论或点赞可增加贡献值，评论的得分比点赞高，优质的帖子还能得到极大的加分！同时，关联账号在直播间投喂、点赞、发弹幕、持续观看直播也可获得贡献值！ ")])])])]),s("div",{staticClass:"more",attrs:{slot:"reference"},slot:"reference"},[s("i",{staticClass:"icon-help iconfont bangzhu"})])])],1)]),s("div",{staticClass:"contribution-rank--sort"},[s("div",{staticClass:"week",class:{"contribution-rank--sort__selected":"week"===t.contributionParams.sort},on:{click:function(s){return t.changeRankSort("week")}}},[t._v(" 周 ")]),s("div",{staticClass:"month",class:{"contribution-rank--sort__selected":"month"===t.contributionParams.sort},on:{click:function(s){return t.changeRankSort("month")}}},[t._v(" 月 ")])])]),t.contributionList.length?s("ul",{staticClass:"rank-list"},[t._l(t.contributionList,(function(e,i){return s("li",{key:e.uid,staticClass:"rank-position"},[s("div",{staticClass:"rank-num"},[t._v(" "+t._s((t.contributionParams.page-1)*t.contributionParams.pageSize+i+1)+" ")]),s("avatar",{attrs:{url:e.avatar,size:30,alt:e.nickname,uid:e.uid}}),s("div",{staticClass:"user-contribution"},[s("level-nickname",{attrs:{size:14,nickname:e.nickname,colors:t.MANAGER_TEXT_COLOR,uid:e.uid}}),s("div",{staticClass:"contribution-value"},[t._v("贡献值 "+t._s(e.contribution))])],1)],1)})),t.contributionList.length<10?t._l(10-t.contributionList.length,(function(e){return s("li",{key:"blank"+e,staticClass:"rank-position rank-position--blank"},[s("div",{staticClass:"rank-num"},[t._v(" "+t._s(t.contributionTotal+e)+" ")]),t._m(3,!0),s("div",{staticClass:"user-contribution--blank"},[t._v("虚位以待")])])})):t._e(),s("div",{staticClass:"contribution-pagination"},[s("i",{staticClass:"hanser icon-zuohuadong",class:{"contribution-pagination--disabled":1===t.contributionParams.page},on:{click:t.toPrevRank}}),s("i",{staticClass:"hanser icon-youhuadong",class:{"contribution-pagination--disabled":t.contributionParams.page*t.contributionParams.pageSize>=t.contributionTotal||t.contributionParams.page>=10},on:{click:t.toNextRank}})])],2):s("div",{staticClass:"no-data"},[t._v("暂无数据")])])])])},a=[function(){var t=this,s=t._self._c;return s("a",{staticClass:"living-link-mobile",attrs:{href:"https://live.bilibili.com/255",target:"_blank"}},[s("div",{staticClass:"label-inner mobile"},[s("img",{attrs:{src:"https://cdn.2550505.com/share/legacy-sso/living.gif",width:"12"}}),s("span",[t._v("直播中")])])])},function(){var t=this,s=t._self._c;return s("label",{staticClass:"order__checkbox-toggle",attrs:{for:"cb"}},[s("span",{staticClass:"order__checkbox-toggle__item"})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"living-label"},[s("div",{staticClass:"label-inner"},[s("img",{attrs:{src:"https://cdn.2550505.com/share/legacy-sso/living.gif",width:"12"}}),s("span",[t._v("直播中")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"blank-avatar"},[s("img",{attrs:{src:"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png",width:"30",height:"30",alt:"虚位以待"}})])}],n=(e("14d9"),e("11a4")),o=function(){var t=this,s=t._self._c;return s("div",{staticClass:"list"},[s("ul",{staticClass:"posts"},[t.isMobile?[t._l(t.postList,(function(t){return s("li",{key:"backup"+t.postId,staticClass:"post"},[s("backup-post",{staticClass:"post-brief",attrs:{post:t}})],1)})),t.loading&&!t.loadDone?s("post-skeleton"):t._e()]:[t.loading&&!t.loadDone?s("post-skeleton"):t._l(t.postList,(function(t){return s("li",{key:"backup"+t.postId,staticClass:"post"},[s("backup-post",{staticClass:"post-brief",attrs:{post:t}})],1)}))]],2),t.isMobile?s("load-more",{key:"backup-list",attrs:{name:"backup-list","have-more":!t.loadDone},on:{"load-more":t.loadMorePosts}}):s("el-pagination",{attrs:{"current-page":t.page,"page-size":t.pageSize,"prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:t.totalPosts},on:{"current-change":t.handleCurrentChange}})],1)},r=[],l=e("db04"),c=e("1078"),u=function(){var t=this,s=t._self._c;return s("div",{staticClass:"backup-post"},[s("div",{staticClass:"top"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:t.post.avatar,width:"50",height:"50",alt:t.post.nickname}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"nickname"},[t._v(t._s(t.post.nickname))]),s("div",{staticClass:"time"},[t._v(t._s(t.post.time))])])]),s("div",{staticClass:"title"},[s("h3",[s("router-link",{staticClass:"title-link",attrs:{target:"_blank",to:"/backup/"+t.post.postId}},[t._v(t._s(t.post.title))])],1)]),s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.post.content)}}),s("router-link",{staticClass:"show-all",attrs:{target:"_blank",to:"/backup/"+t.post.postId}},[t._v("查看全文>>")])],1)},h=[],d={name:"backup-post",props:["post"],data(){return{}}},p=d,g=(e("c237"),e("2877")),v=Object(g["a"])(p,u,h,!1,null,"c4c094c8",null),m=v.exports,k=e("4445"),b=e("3752"),f=e("2f62"),_={name:"list",data(){return{page:1,pageSize:20,totalPosts:0,loading:!1,loadDone:!1,postList:[]}},components:{BackupPost:m,LoadMore:k["a"],PostSkeleton:b["a"]},computed:{...Object(f["d"])({isMobile:t=>t.media.isMobile})},methods:{handleCurrentChange(t){this.page=t,this.getPosts()},loadMorePosts(){this.getPosts(),this.page++},getPosts(){this.loading||this.isMobile&&this.loadDone||(this.loading=!0,l["a"].get(c["a"].backupList,{params:{page:this.page,pageSize:this.pageSize}}).then(t=>{0===t.code?(this.isMobile?this.postList.push(...t.list):this.postList=t.list,this.totalPosts=t.total,t.list.length<this.pageSize&&(this.loadDone=!0)):this.$message({type:"warning",message:t.msg}),this.loading=!1}))}},mounted(){this.isMobile||this.getPosts()}},C=_,x=(e("e37e"),Object(g["a"])(C,o,r,!1,null,"e08b2ea8",null)),w=x.exports,y=e("7363"),P=e("365c"),L=e("2287"),I=e("ed08"),S=e.n(I),z=e("7150"),M=e("e51f"),R=function(){var t=this,s=t._self._c;return s("a",{attrs:{href:t.guessingRoot.domain,target:"_blank"}},[s("div",{staticClass:"container"},[s("img",{staticClass:"banner_img",attrs:{src:"https://cdn.2550505.com/share/legacy-sso/puzzle-puzzle.png"}}),s("div",{staticClass:"inner_box"},[s("div",{staticClass:"left_text_outer_box"},[s("div",{staticClass:"left_text_inner_box"},[s("span",[t._v(t._s(t.guessInfo.info.result1))])])]),s("div",{staticClass:"progress"},[s("div",{staticClass:"progress_inner_box"},[s("div",{staticClass:"box"},[s("div",{staticClass:"bar"}),[s("div",{style:{backgroundColor:"#44b3ff",width:t.rightBarWidth,height:"14px",borderTopLeftRadius:"8.5px",borderBottomLeftRadius:"8.5px",borderTopRightRadius:0===t.guessInfo.result1.total?"8.5px":0,borderBottomRightRadius:0===t.guessInfo.result1.total?"8.5px":0,transform:"translateY(-17px) rotate(180deg)",position:"absolute",right:0}}),s("div",{style:{backgroundColor:"#ff6f60",width:100*t.result1Rate+"%",height:"14px",borderRadius:"8.5px",transform:"translateY(-17px)"}})]],2)])]),s("div",{staticClass:"left_text_outer_box"},[s("div",{staticClass:"left_text_inner_box2"},[s("span",[t._v(t._s(t.guessInfo.info.result2))])])])]),s("div",{staticClass:"banner_title_box"},[s("span",[t._v(t._s(t.guessInfo.info.title))])]),s("img",{staticClass:"banner_img",attrs:{src:"https://cdn.2550505.com/share/legacy-sso/puzzle-vs.png"}})])])},D=[],T=e("3b81"),j={name:"banner",props:{guessInfo:{type:Object,default:()=>({info:{id:73,title:"这局会赢吗？我们来个长点的标题测一下",result1:"能不能",result2:"不能",startTime:"1723-09-03 22:16:51",lockTime:null,status:0},result1:{total:0,rate:1},result2:{total:0,rate:0}})}},data(){return{guessingRoot:T}},computed:{result1Rate(){return this.guessInfo.result1.total+this.guessInfo.result2.total===0?.5:this.guessInfo.result1.total/(this.guessInfo.result1.total+this.guessInfo.result2.total)},rightBarWidth(){return 0===this.guessInfo.result1.total?"100%":100*Math.min(1-this.result1Rate+.1,1)+"%"}}},$=j,O=(e("6c7a"),Object(g["a"])($,R,D,!1,null,"498242e5",null)),B=O.exports,N=B,A=e("808e"),E={name:"main-index",props:["sort"],metaInfo(){return{title:"毛怪俱乐部",meta:[{name:"keywords",content:"毛怪,hanser,社区,毛怪俱乐部"},{name:"description",content:"欢迎来到毛怪俱乐部!"}]}},data(){return{page:1,pageSize:20,totalPosts:0,filter:0,topPost:[],posts:[],loadDone:!1,loading:!1,liking:!1,checked:0,guessInfo:{},menu:[{text:"看帖",hash:""},{text:"精品",hash:"#valued"},{text:"鱼吧备份",hash:"#backup"}],notices:[{text:"问题反馈",image:"https://cdn.2550505.com/share/legacy-sso/feedback.jpeg",link:"/tag/7"},{text:"入站必读",image:"https://cdn.2550505.com/share/legacy-sso/notice.jpeg",link:"/post/9091"},{text:"问题反馈",image:"https://cdn.2550505.com/share/legacy-sso/feedback.jpeg",link:"/tag/7"},{text:"入站必读",image:"https://cdn.2550505.com/share/legacy-sso/notice.jpeg",link:"/post/9091"}],navList:[],postLoading:!1,start:0,end:6,managers:[],living:{status:-1,cover:"",frame:"",title:""},showCover:!0,contributionParams:{sort:"week",page:1,pageSize:10},contributionList:[],contributionTotal:0,MANAGER_TEXT_COLOR:A["f"]}},components:{PostBrief:n["a"],PostEditor:y["a"],List:w,LoadMore:k["a"],PostSkeleton:b["a"],Avatar:z["a"],LevelNickname:M["a"],Banner:N},computed:{...Object(f["d"])({levels:t=>t.level.levels,levelInfo:t=>t.level.levelInfo,user:t=>t.users.userInfo,isMobile:t=>t.media.isMobile,theme:t=>t.config.theme}),bannerImage(){return"new-year-2023"===this.theme?"https://cdn.2550505.com/share/legacy-sso/new-year-2023-banner.jpg":"new-year-2022"===this.theme?"https://cdn.2550505.com/share/legacy-sso/new-year-2022-new-year-2022-banner.jpg":"new-year-2024"===this.theme?"https://cdn.2550505.com/share/legacy-sso/new-year-2024-main-banner.jpg":"https://cdn.2550505.com/share/legacy-sso/main-banner.jpg"},showBackup(){return"#backup"===this.$route.hash},showSort(){return""===this.$route.hash},showManagers(){return this.managers.slice(this.start,this.start+6)},isLogin(){return!!this.user.uid},cover(){return this.showCover?this.living.cover:this.living.frame}},methods:{...Object(f["c"])({setGuessInfo:"guess/setGuessInfo"}),getBannerInfo(){l["a"].get(L["a"].running).then(t=>{if(0===t.code){const{list:s}=t;this.guessInfo=s[0]||{},this.setGuessInfo(this.guessInfo)}})},showFrame(){this.showCover=!1},hideFrame(){this.showCover=!0},search(){this.$showSearchDialog({keyword:""})},toPrev(){this.start>0&&(this.start-=6,this.end=this.start+6)},toNext(){const t=this.managers.length;this.end<t&&(this.start+=6,this.end=this.start+6)},reset(){this.page=1,this.loadDone=!1,this.posts=[],this.topPost=[]},scrollToTop(){const t=document.getElementsByClassName("layout-body")[0];t.scrollTop=0},showDownload(){this.$showAppDownloadDialog()},getPostList(){this.loading=!0,this.isMobile||this.scrollToTop();let t="";t=this.isLogin?P["a"].getPostList:P["a"].getBriefPostList,l["a"].get(t,{params:{page:this.page,pageSize:this.pageSize,order:this.sort,filter:this.filter}}).then(t=>{0===t.code?(t.result.length>0?this.loadDone=!1:this.loadDone=!0,this.isMobile?this.posts.push(...t.result):(this.posts=t.result,this.$emit("back-top")),1===this.page&&(this.topPost=t.topPost),this.totalPosts=t.total,this.loading=!1):this.$message({type:"warning",message:t.msg})})},getNavList(){l["a"].get(P["a"].navList).then(t=>{0===t.code?this.navList=t.list:this.$message({type:"warning",message:t.msg})})},like(t){this.liking?this.$message({type:"warning",message:"操作太快了~"}):(this.liking=!0,l["a"].post(P["a"].like+"/"+t.id,{author:t.author.uid,liked:t.liked}).then(s=>{if(0!==s.code)return this.$message({type:"warning",message:s.msg}),void(this.liking=!1);t.liked=!!s.liked,this.addUserExp(s.exp),t.liked?(t.likes+=1,1===this.user.uid&&(t.hanserLike=!0)):(t.likes-=1,1===this.user.uid&&(t.hanserLike=!1)),this.liking=!1}))},handleCurrentChange(t){this.page=t,this.getPostList()},inWeek(t){const s=6048e5;return(new Date).valueOf()-new Date(t.replace(/-/g,"/"))<s},formatTime(t){return S.a.dateFormat("mm-dd",new Date(t.replace(/-/g,"/")))},loadMorePosts(){this.loading||(this.page++,this.getPostList())},getManager(){l["a"].get(P["a"].manager).then(t=>{this.managers=t.manager})},changeSort(){this.$emit("change-sort",Number(!this.sort))},getLivingInfo(){l["a"].get(P["a"].getRoomInfo).then(t=>{0===t.code&&(this.living.status=t.data.live_status,this.living.cover=t.data.user_cover,this.living.frame=t.data.keyframe,this.living.title=t.data.title)})},changeRankSort(t){t!==this.contributionParams.sort&&(this.contributionParams.sort=t,this.contributionParams.page=1,this.getContributionList())},getContributionList(){l["a"].get(P["a"].contributionRank,{params:{page:this.contributionParams.page,pageSize:this.contributionParams.pageSize,sort:this.contributionParams.sort}}).then(t=>{0===t.code&&(this.contributionList=t.list,this.contributionTotal=t.total)})},toPrevRank(){1!==this.contributionParams.page&&(this.contributionParams.page-=1,this.getContributionList())},toNextRank(){this.contributionParams.page*this.contributionParams.pageSize>=this.contributionTotal||this.contributionParams.page>=10||(this.contributionParams.page+=1,this.getContributionList())},openYear(){window.open("/year/2024")},postDone(){this.reset(),this.getPostList()}},watch:{sort(){this.reset(),this.getPostList()},"$route.hash"(t){this.page=1,this.posts=[],this.topPost=[],""===t&&(this.filter=0),"#valued"===t&&(this.filter=1),"#backup"!==t&&(this.reset(),this.getPostList())}},mounted(){this.getManager(),this.getBannerInfo(),this.checked=this.sort;const{hash:t}=this.$route;""===t&&(this.filter=0),"#valued"===t&&(this.filter=1),this.$nextTick(()=>{const t=this.$refs.contributionRank;t&&t.offsetParent&&(this.$refs.layoutUser.style=`top: -${t.offsetTop+t.offsetParent.offsetTop+60}px`)}),this.getPostList(),this.getNavList(),this.getLivingInfo(),this.getContributionList()}},F=E,G=(e("bb11"),Object(g["a"])(F,i,a,!1,null,"9e7703c8",null));s["default"]=G.exports},dc2b:function(t,s,e){"use strict";e("7ada")},e37e:function(t,s,e){"use strict";e("9f8d")},e9ec:function(t,s,e){"use strict";e("18dd")},f6f5:function(t,s,e){t.exports=e.p+"img/download.fc2a0e91.png"}}]);