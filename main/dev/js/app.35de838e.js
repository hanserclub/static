(function(e){function t(t){for(var a,s,r=t[0],l=t[1],c=t[2],d=0,u=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);p&&p(t);while(u.length)u.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var r=n[s];0!==i[r]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},s={app:0},i={app:0},o=[];function r(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-0b13450a":"fde4b68a","chunk-0bfb2af8":"6252b8aa","chunk-111ed302":"2fd4ef5b","chunk-14419652":"8edff55a","chunk-15f748c4":"a4bbe955","chunk-2a54ff7c":"da84f20a","chunk-2d0a50f6":"1f3250c1","chunk-29363e8e":"c1302f57","chunk-2d21d0c2":"3f86d8ae","chunk-1d022228":"df2037a0","chunk-b9c72f82":"b03053c9","chunk-4bba15b6":"19b420a6","chunk-55647276":"2be16267","chunk-30b65cca":"1bb8714c","chunk-61a67fa6":"e87def42","chunk-dc8d9f3a":"cc9b79f2","chunk-14117dd3":"811a6ca4","chunk-6895030a":"a93f66e6","chunk-863bcd02":"bfa3f4af","chunk-a6ff1dce":"08e3e142","chunk-2f1b9f08":"f9ab1847","chunk-371914d4":"0f45fabb","chunk-3a0d44f8":"be467323","chunk-4117d76b":"735700e3","chunk-556ac803":"e7ff4ca7","chunk-5fddc021":"91968575","chunk-78c5392a":"1aa4d04e","chunk-9c59fa94":"28eebb21","chunk-c08e5cb2":"d7ffa617","chunk-d990b3c4":"7b360ca9","chunk-fc5672a0":"f4ea6511"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-0b13450a":1,"chunk-0bfb2af8":1,"chunk-111ed302":1,"chunk-14419652":1,"chunk-15f748c4":1,"chunk-2a54ff7c":1,"chunk-29363e8e":1,"chunk-1d022228":1,"chunk-b9c72f82":1,"chunk-4bba15b6":1,"chunk-55647276":1,"chunk-30b65cca":1,"chunk-61a67fa6":1,"chunk-dc8d9f3a":1,"chunk-14117dd3":1,"chunk-6895030a":1,"chunk-863bcd02":1,"chunk-a6ff1dce":1,"chunk-2f1b9f08":1,"chunk-371914d4":1,"chunk-3a0d44f8":1,"chunk-4117d76b":1,"chunk-556ac803":1,"chunk-5fddc021":1,"chunk-78c5392a":1,"chunk-9c59fa94":1,"chunk-c08e5cb2":1,"chunk-d990b3c4":1,"chunk-fc5672a0":1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-0b13450a":"8447b7db","chunk-0bfb2af8":"29db08f2","chunk-111ed302":"4eaea59e","chunk-14419652":"3b043f2f","chunk-15f748c4":"4d41f1ba","chunk-2a54ff7c":"2c63a1a6","chunk-2d0a50f6":"31d6cfe0","chunk-29363e8e":"a6844d7f","chunk-2d21d0c2":"31d6cfe0","chunk-1d022228":"b5de2f7a","chunk-b9c72f82":"9c8ebe9d","chunk-4bba15b6":"858a02be","chunk-55647276":"974df54a","chunk-30b65cca":"298e5ff7","chunk-61a67fa6":"6e728f0c","chunk-dc8d9f3a":"bf9c2219","chunk-14117dd3":"0b6fa142","chunk-6895030a":"5ce375d0","chunk-863bcd02":"45f89149","chunk-a6ff1dce":"086dc51b","chunk-2f1b9f08":"2b39bc44","chunk-371914d4":"82e19eb8","chunk-3a0d44f8":"ed089759","chunk-4117d76b":"6c55ecff","chunk-556ac803":"6d959be0","chunk-5fddc021":"c5e72535","chunk-78c5392a":"0d4c2f1a","chunk-9c59fa94":"68ecb158","chunk-c08e5cb2":"1aeaca26","chunk-d990b3c4":"4810dace","chunk-fc5672a0":"c78cfc9c"}[e]+".css",i=l.p+a,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var c=o[r],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===a||d===i))return t()}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){c=u[r],d=c.getAttribute("data-href");if(d===a||d===i)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete s[e],p.parentNode.removeChild(p),n(o)},p.href=i;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){s[e]=0})));var a=i[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,n){a=i[e]=[t,n]}));t.push(a[2]=o);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=r(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",u.name="ChunkLoadError",u.type=a,u.request=s,n[1](u)}i[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="https://static.2550505.com/static/main/dev/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var p=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"00b6":function(e,t,n){"use strict";t["a"]={vote:"/vote",create:"/vote/create",info:"/vote/info/",people:"/vote/people"}},"018a":function(e,t,n){"use strict";n("dd45")},"0221":function(e,t,n){"use strict";n("bfd2")},"0425":function(e,t,n){},"050e":function(e,t,n){"use strict";n("2c6e")},"0850":function(e,t,n){},"0e5c":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("14d9");const a=Number(window.localStorage.getItem("line")),s=0===a?"https://cdn3.2550505.com":"https://cdn1.2550505.com";var i={single:s+"/upload/",chat:s+"/upload/chat"},o=n("db04");const r={uploadSingleFile:async(e,t,n,a,s,r=!1)=>new Promise((l,c)=>{const d=new FormData;d.append("picture",e),s&&s(0,1);let u="";u=r?i.chat:i.single,o["a"].post(u+`?token=${t}&uid=${n}&auth=${a}&chat=${Number(r)}`,d).then(e=>{0===e.code?(s&&s(1,1),l(e)):c(e)})}),uploadMultiFiles:async(e,t,n,a,s,i=!1)=>{let o=0;const l=[],c=(t,n)=>{s(t,n,`图片上传中(${o}/${e.length})`)};for(const d of e){const e=await r.uploadSingleFile(d,t,n,a,c,i);l.push(e),o++}return l},getExtname:e=>{if(!e||"string"!=typeof e)return"";const[t]=e.split(".").slice(-1);return t}}},"126f":function(e,t,n){},1655:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"d",(function(){return x})),n.d(t,"g",(function(){return L})),n.d(t,"f",(function(){return O})),n.d(t,"h",(function(){return ee})),n.d(t,"b",(function(){return he})),n.d(t,"e",(function(){return be})),n.d(t,"c",(function(){return _e})),n.d(t,"i",(function(){return Se})),n.d(t,"j",(function(){return Ke}));var a,s,i,o,r,l,c,d,u,p,h,m,f={name:"bold",inject:["observedEditor"],computed:{editor(){return this.observedEditor.editor}},methods:{handleClick(){this.editor.chain().focus().toggleBold().run()}},render(){const e=arguments[0];return e("i",{class:"hanser icon-jiacu",attrs:{title:"加粗"},on:{click:this.handleClick}})}},g=f,v=(n("5ab7"),n("2877")),b=Object(v["a"])(g,a,s,!1,null,"8127dc42",null),k=b.exports,y={name:"italic",inject:["observedEditor"],computed:{editor(){return this.observedEditor.editor}},methods:{handleClick(){this.editor.chain().focus().toggleItalic().run()}},render(){const e=arguments[0];return e("i",{class:"hanser icon-xieti",attrs:{title:"斜体"},on:{click:this.handleClick}})}},w=y,C=(n("19532"),Object(v["a"])(w,i,o,!1,null,"07781af5",null)),x=C.exports,_={name:"strike",inject:["observedEditor"],computed:{editor(){return this.observedEditor.editor}},methods:{handleClick(){this.editor.chain().focus().toggleStrike().run()}},render(){const e=arguments[0];return e("i",{class:"iconfont shanchuxian",on:{click:this.handleClick}})}},A=_,T=(n("9031"),Object(v["a"])(A,r,l,!1,null,"ac7ada3c",null)),L=T.exports,I=n("808e"),P={name:"spoiler",inject:["observedEditor"],computed:{editor(){return this.observedEditor.editor}},methods:{handleClick(){this.editor.chain().focus().toggleHighlight({color:I["c"]}).run()}},render(){const e=arguments[0];return e("i",{class:"iconfont dantupailie",on:{click:this.handleClick}})}},S=P,H=(n("b0b4"),Object(v["a"])(S,c,d,!1,null,"3fc0e47c",null)),O=H.exports,E=n("526e"),j=n.n(E),D=(n("14d9"),n("46f9")),M={name:"upload-list-item",props:{url:{type:String,require:!0}},methods:{handleRemove(){this.$emit("remove")}},render(){const e=arguments[0];return e("div",{class:"upload-list-item"},[e("img",{attrs:{width:"58",height:"58",src:this.url}}),e("i",{class:"fa-solid fa-xmark",on:{click:this.handleRemove}})])}},N=M,z=Object(v["a"])(N,u,p,!1,null,null,null),R=z.exports,B=n("16a6"),$=n.n(B),U=n("f46b"),F={name:"upload-list",components:{UploadListItem:R},props:{accept:{type:String,require:!1,default:D["a"]},multiple:{type:Boolean,require:!1,default:!0},uid:{type:String,require:!0},dataSource:{type:Array,require:!0},limit:{type:Number,require:!1},enableWatermark:{type:Boolean,require:!1,default:!0},chat:{type:Boolean,require:!1,default:!1}},inject:["uid","nickname"],methods:{handleClickUpload(){this.$refs.uploaderInputRef.click()},watermarkImage(e,t,n){return new Promise(a=>{"image/gif"!==e.type?$()([e,t]).blob(e=>{const a=e.getContext("2d");a.save();const s=n/10>33?n/10:33,i=Math.floor(Math.max(.2*s,20));a.font=i+"px -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,apple color emoji,segoe ui emoji,Segoe UI Symbol,noto color emoji",a.fillStyle="#fff",a.shadowBlur=6,a.shadowColor="black";const o=t.height-10-.5*s-.25*s,r=t.height-10-.5*s+.25*s;return a.fillText("@"+this.nickname,25,o),a.fillText("2550505.com",25,r),a.restore(),e}).then(async t=>{const n=Object(U["a"])(),s=await n.toBlob(t,{max:1e3}),i=new File([s],e.name,{type:e.type});a(i)}):a(e)})},async handleUploaderChange(e){const t=Array.from(e.currentTarget.files||[]);if(0!==t.length)try{if(await Object(D["c"])(t),this.uploading=!0,!Object(D["b"])(t.length+this.dataSource.length,this.limit))return void this.$message({type:"danger",message:`最多上传 ${this.limit} 个文件`});if(this.enableWatermark){const e=[];for(const a of t){const t=await Object(D["d"])(a),n=await Object(D["e"])(t.result),s=Math.min(n.width,n.height);if(s>300){const t=await this.watermarkImage(a,n,s);e.push(t)}else e.push(a)}const n=await Object(D["f"])(e,this.uid,this.chat);this.$emit("change",[...this.dataSource,...n])}else{const e=await Object(D["f"])(t,this.uid,this.chat);this.$emit("change",[...this.dataSource,...e])}}catch(n){this.$message({type:"danger",message:n})}finally{this.$refs.uploaderInputRef.value=""}},handleRemove(e){const t=[...this.dataSource],n=t.findIndex(t=>t===e);-1!==n&&(t.splice(n,1),this.$emit("change",t))}},render(){const e=arguments[0];return e("div",{class:"upload-list"},[this.dataSource.map(t=>e(R,{key:t,attrs:{url:t},on:{remove:()=>{this.handleRemove(t)}}})),e("div",{class:"upload-list-uploader upload-list-item",on:{click:this.handleClickUpload}},[e("i",{class:"fa-solid fa-plus"}),e("input",{class:"uploader-input",ref:"uploaderInputRef",attrs:{type:"file",accept:this.accept,required:!0,multiple:this.multiple},on:{change:this.handleUploaderChange}})])])}},V=F,G=(n("4e6a"),Object(v["a"])(V,h,m,!1,null,null,null)),W=G.exports,q=n("dbbe");const K="image/*";var X,Y,J={name:"upload-image",components:{popper:j.a,UploadList:W,HButton:q["a"]},inject:["observedEditor"],computed:{editor(){return this.observedEditor.editor}},data(){return{imgList:[],enableWatermark:!0}},methods:{addImage(){if(0!==this.imgList.length){for(let e of this.imgList)this.editor.commands.insertContent(`<img class='upload-img' src=${e} />`);this.$refs.popper.showPopper=!1}},handleChange(e){this.imgList=e},handleHide(){this.$refs.popper.showPopper=!1,this.imgList=[]}},render(){const e=arguments[0];return e("popper",{attrs:{forceShow:this.imgList.length>0,"append-to-body":!0,trigger:"clickToOpen","root-class":"limit-width",options:{placement:"top",modifiers:{preventOverflow:{escapeWithReference:!0}}}},ref:"popper",on:{hide:this.handleHide}},[e("div",{class:"popper post-editor-upload-popper"},[e("i",{class:"fa-solid fa-xmark",on:{click:this.handleHide}}),e("upload-list",{attrs:{accept:K,multiple:!0,dataSource:this.imgList,limit:20,enableWatermark:this.enableWatermark},on:{change:this.handleChange}}),e("div",{class:"post-editor-upload-popper-footer"},[e("el-checkbox",{style:{marginRight:"10px"},model:{value:this.enableWatermark,callback:e=>{this.enableWatermark=e}}},["启用水印"]),e("h-button",{attrs:{size:"mini"},on:{click:this.addImage}},["添加"])])]),e("i",{slot:"reference",attrs:{title:"图片"},class:"hanser icon-tupian"})])}},Z=J,Q=(n("1a95"),Object(v["a"])(Z,X,Y,!1,null,null,null)),ee=Q.exports;const te="image/*";var ne,ae,se,ie,oe,re,le,ce,de={name:"upload-image",components:{popper:j.a,UploadList:W,HButton:q["a"]},inject:["observedEditor"],computed:{editor(){return this.observedEditor.editor}},data(){return{imgList:[],enableWatermark:!0}},methods:{addImage(){if(0!==this.imgList.length){for(let e of this.imgList)this.editor.commands.insertContent(`<img class='upload-img' src=${e} />`);this.$refs.popper.showPopper=!1}},handleChange(e){this.imgList=e},handleHide(){this.$refs.popper.showPopper=!1,this.imgList=[]}},render(){const e=arguments[0];return e("popper",{attrs:{forceShow:this.imgList.length>0,"append-to-body":!0,trigger:"clickToOpen","root-class":"limit-width",options:{placement:"top",modifiers:{preventOverflow:{escapeWithReference:!0}}}},ref:"popper",on:{hide:this.handleHide}},[e("div",{class:"popper post-editor-upload-popper"},[e("i",{class:"fa-solid fa-xmark",on:{click:this.handleHide}}),e("upload-list",{attrs:{accept:te,multiple:!0,dataSource:this.imgList,limit:20,chat:!0,enableWatermark:this.enableWatermark},on:{change:this.handleChange}}),e("div",{class:"post-editor-upload-popper-footer"},[e("el-checkbox",{style:{marginRight:"10px"},model:{value:this.enableWatermark,callback:e=>{this.enableWatermark=e}}},["启用水印"]),e("h-button",{attrs:{size:"mini"},on:{click:this.addImage}},["添加"])])]),e("i",{slot:"reference",class:"hanser icon-tupian"})])}},ue=de,pe=(n("2e32"),Object(v["a"])(ue,ne,ae,!1,null,null,null)),he=pe.exports,me=n("6275"),fe={name:"post-link",components:{HInput:me["a"],HButton:q["a"],popper:j.a},inject:["observedEditor"],computed:{editor(){return this.observedEditor.editor}},data(){return{link:"",linkText:""}},methods:{handleAddLink(){const e=this.link;e&&(""!==e?(this.editor.commands.insertContent(`<a href="${this.link}">${this.linkText}</a>`),this.link="",this.linkText="",this.$refs.popper.showPopper=!1):this.editor.chain().focus().extendMarkRange("link").unsetLink().run())},handleRemoveLink(){this.editor.chain().focus().unsetLink().run()},handleHide(){this.link="",this.linkText=""}},render(){const e=arguments[0];return this.editor&&(this.editor.isActive("link")?e("i",{class:"fa-solid fa-link",on:{click:this.handleRemoveLink}}):e("popper",{ref:"popper",attrs:{trigger:"clickToToggle","append-to-body":!0,options:{placement:"top",modifiers:{preventOverflow:{escapeWithReference:!0}}}},on:{hide:this.handleHide}},[e("div",{class:"popper post-editor-link-popper-content"},[e("i",{class:"fa-solid fa-xmark",on:{click:()=>{this.$refs.popper.showPopper=!1,this.handleHide()}}}),e("div",{class:"post-editor-link-popper-space"},[e("span",["网址："]),e("h-input",{attrs:{size:"small",maxlength:200,placeholder:"http://"},class:"post-editor-link-input",model:{value:this.link,callback:e=>{this.link=e}}})]),e("div",{class:"post-editor-link-popper-space"},[e("span",["显示文字："]),e("h-input",{attrs:{size:"small",maxlength:50,placeholder:"输入链接文字"},class:"post-editor-link-input",model:{value:this.linkText,callback:e=>{this.linkText=e}}})]),e("div",{class:"post-editor-link-popper-footer"},[e("h-button",{attrs:{size:"mini"},on:{click:this.handleAddLink}},["确定"])])]),e("i",{slot:"reference",attrs:{title:"超链接"},class:"hanser icon-chaolianjie"})]))}},ge=fe,ve=(n("2843"),Object(v["a"])(ge,se,ie,!1,null,null,null)),be=ve.exports,ke=n("7e17"),ye=n("2ef0"),we={name:"post-emoticons",components:{popper:j.a},inject:["observedEditor","anchorPosition"],computed:{editor(){return this.observedEditor.editor}},data(){return{show:!1,currentPos:0}},watch:{show(e){e||(this.currentPos=0)}},methods:{handleAddEmoticon(e,t){const n=t.split(".")[0],a=Object(ye["cloneDeep"])(this.anchorPosition);0===this.currentPos&&(this.currentPos=a.pos),this.editor.chain().insertContentAt(this.currentPos,`<img class='emoticon-img' src=${e} alt='${n}' title='${n}' data-emotion-name='${n}' />`).run(),this.currentPos=this.currentPos+1},handleShow(){this.show=!0},handleHide(){this.show=!1}},render(){const e=arguments[0];return e("popper",{ref:"popper",attrs:{"append-to-body":!0,trigger:"clickToToggle",options:{placement:"top",modifiers:{preventOverflow:{escapeWithReference:!0}}}},on:{show:this.handleShow,hide:this.handleHide}},[e("div",{class:"popper post-editor-emoticons-popper-content"},[e("el-tabs",{attrs:{type:"border-card","tab-position":"bottom"}},[ke.map(t=>e("el-tab-pane",{key:t.root,attrs:{label:t.root}},[e("span",{slot:"label"},[e("img",{attrs:{width:"32",height:"32",src:`https://2550505.com/emotion/${t.root}/${t.emotions[0]}`}})]),e("div",{class:"post-editor-emoticons-container"},[t.emotions.map(n=>e("div",{class:"post-editor-emoticons-img-wrap",key:n,on:{click:()=>this.handleAddEmoticon(`https://2550505.com/emotion/${t.root}/${n}`,n)}},[e("div",{class:"post-editor-emoticons-img",style:{backgroundImage:`url(https://2550505.com/emotion/${t.root}/${n})`,backgroundSize:"48px 48px",backgroundRepeat:"no-repeat"}})]))])]))])]),e("i",{slot:"reference",attrs:{title:"表情"},class:"fa-solid fa-face-grin"})])}},Ce=we,xe=(n("0221"),Object(v["a"])(Ce,oe,re,!1,null,"54d971bd",null)),_e=xe.exports,Ae=n("db04"),Te=n("365c"),Le={name:"post-video",components:{HInput:me["a"],HButton:q["a"],popper:j.a},inject:["observedEditor"],computed:{editor(){return this.observedEditor.editor}},data(){return{bv:""}},methods:{handleAddVideo(){""!==this.bv&&Ae["a"].get(Te["a"].getVideoInfo,{params:{bv:this.bv}}).then(e=>{0===e.code?(this.editor.commands.insertContent(`<img class='upload-img' data-bv="${this.bv}" referrerPolicy="no-referrer" src="${e.cover}" />`),this.editor.commands.insertContent(`<p><a href="https://www.bilibili.com/video/${this.bv}">${e.title}</a></p>`),this.bv="",this.$refs.popper.showPopper=!1):this.$message({type:"warning",msg:"视频信息获取失败，请重新插入"})})},handleHide(){this.bv=""}},render(){const e=arguments[0];return this.editor&&(this.editor.isActive("video")?e("i",{class:"iconfont shipin"}):e("popper",{ref:"popper",attrs:{trigger:"clickToToggle",options:{placement:"bottom"}},on:{hide:this.handleHide}},[e("div",{class:"popper post-editor-video-popper-content"},[e("div",{class:"post-editor-video-popper-space"},[e("span",["BV号："]),e("h-input",{attrs:{size:"small",maxlength:30,placeholder:"BVXXXXX"},class:"post-editor-video-input",model:{value:this.bv,callback:e=>{this.bv=e}}})]),e("div",{class:"post-editor-video-popper-footer"},[e("h-button",{attrs:{size:"mini"},on:{click:this.handleAddVideo}},["确定"])])]),e("i",{slot:"reference",attrs:{title:"B站视频"},class:"iconfont shipin"})]))}},Ie=Le,Pe=(n("7ab6"),Object(v["a"])(Ie,le,ce,!1,null,null,null)),Se=Pe.exports,He=function(){var e=this,t=e._self._c;return t("popper",{ref:"popper",attrs:{trigger:"clickToToggle",options:e.popperOptions,"append-to-body":!0}},[t("div",{staticClass:"popper"},[t("vote-form",{ref:"voteForm",attrs:{form:e.form}}),t("div",{staticClass:"dialog-footer"},[Object.keys(this.voteData).length>0?t("h-button",{attrs:{type:"message",size:"small"},on:{click:e.deleteVote}},[e._v("删除")]):e._e(),t("h-button",{attrs:{type:"primary",size:"small"},on:{click:e.onConfirm}},[e._v("确定")])],1)],1),t("div",{attrs:{slot:"reference"},slot:"reference"},[t("i",{staticClass:"fa-solid fa-square-poll-vertical",attrs:{slot:"reference",title:"投票"},slot:"reference"})])])},Oe=[],Ee=n("5a0c"),je=n.n(Ee),De=n("2f62"),Me=function(){var e=this,t=e._self._c;return t("el-form",{ref:"form",staticClass:"vote-form-container",attrs:{model:e.form,"label-width":"80px","label-position":e.isMobile?"top":"right",rules:e.formRules}},[t("el-form-item",{staticClass:"title-form-item",attrs:{label:"投票标题",prop:"title"}},[t("h-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入投票标题",size:"small",maxlength:"15"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),t("el-form-item",{attrs:{label:"投票形式",prop:"type"}},[t("h-radio-group",{staticStyle:{"margin-right":"20px"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("h-radio",{attrs:{label:"文字",value:0}}),t("h-radio",{attrs:{label:"图片",value:1}})],1)],1),t("el-form-item",{attrs:{label:"投票选项"}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("div",{staticStyle:{flex:"1"}},[e._v("最多支持20个选项，每项不超过15字")]),t("h-button",{attrs:{type:"primary",size:"small",disabled:e.form.options.length>=20},on:{click:function(t){return t.preventDefault(),e.addOption.apply(null,arguments)}}},[e._v("添加选项 ")])],1)]),0===e.form.type?t("div",{staticClass:"text-mode"},e._l(e.form.options,(function(n,a){return t("div",{key:a,staticClass:"text-mode-item"},[t("el-form-item",{attrs:{label:"选项"+(a+1),prop:"options."+a+".text",rules:[{required:!0,message:"选项"+(a+1)+"不能为空",trigger:"blur"},{max:15,message:"选项"+(a+1)+"的长度不能超过15个字符",trigger:"blur"}]}},[t("div",{staticClass:"option-item"},[t("h-input",{staticClass:"option-input",attrs:{maxlength:"15",placeholder:"请输入选项",size:"small"},model:{value:n.text,callback:function(t){e.$set(n,"text",t)},expression:"option.text"}}),t("h-button",{staticClass:"remove-option-btn",attrs:{type:"danger",size:"small",disabled:e.form.options.length<3},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.removeOption(a)}}},[e._v("删除 ")])],1)])],1)})),0):t("div",{staticClass:"pic-mode"},[t("div",{staticClass:"option-list"},[e._l(e.form.options,(function(n,a){return t("div",{key:a,staticClass:"option-item"},[t("div",{staticClass:"image-upload"},[n.thumbnail?t("img",{staticClass:"option-image",attrs:{src:n.thumbnail,alt:"option-pics"},on:{click:function(t){return e.triggerUpload(a)}}}):t("div",{staticClass:"upload-list-uploader upload-list-item",on:{click:function(t){return e.triggerUpload(a)}}},[t("i",{staticClass:"fa-solid fa-plus"})]),e.form.options.length>=3?t("button",{staticClass:"close-btn",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.removeOption(a)}}},[t("i",{staticClass:"fa-solid fa-times"})]):e._e()]),t("el-form-item",{attrs:{"label-width":"0px",prop:"options."+a+".text",rules:[{required:!0,message:"选项"+(a+1)+"不能为空",trigger:"blur"},{max:15,message:"选项"+(a+1)+"的长度不能超过15个字符",trigger:"blur"}]}},[t("h-input",{staticClass:"option-input",attrs:{maxlength:"15",placeholder:"请输入选项",size:"small"},model:{value:n.text,callback:function(t){e.$set(n,"text",t)},expression:"option.text"}})],1)],1)})),t("input",{ref:"uploaderInputRef",staticClass:"uploader-input",attrs:{type:"file",accept:e.accept},on:{change:e.handleImageUpload}})],2)]),t("el-form-item",{attrs:{label:"投票类型",prop:"checkType"}},[t("div",{staticClass:"checkType-container"},[t("h-radio-group",{model:{value:e.form.checkType,callback:function(t){e.$set(e.form,"checkType",t)},expression:"form.checkType"}},[t("h-radio",{attrs:{label:"单选",value:0}}),t("h-radio",{attrs:{label:"多选",value:1}}),1===e.form.checkType?t("div",{staticClass:"checkType-multiple"},[t("div",{staticStyle:{"margin-right":"4px"}},[e._v("最多")]),t("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"最多选择项","popper-class":"vote-max-option-container"},model:{value:e.form.max,callback:function(t){e.$set(e.form,"max",t)},expression:"form.max"}},e._l(Array.from({length:this.form.options.length-1}).map((e,t)=>t+2),(function(e){return t("el-option",{key:e,attrs:{label:e+"项",value:e}})})),1)],1):e._e()],1)],1)]),t("el-form-item",{attrs:{label:"截止时间",prop:"endTime"}},[t("el-date-picker",{attrs:{"picker-options":e.pickerOptions,"popper-class":"vote-time-select-container",type:"datetime",placeholder:"选择截止时间","value-format":"yyyy-MM-dd HH:mm"},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1),t("el-form-item",{staticClass:"privacy-form-item",attrs:{label:"投票对象",prop:"privacy"}},[t("h-radio-group",{model:{value:e.form.privacy,callback:function(t){e.$set(e.form,"privacy",t)},expression:"form.privacy"}},[t("h-radio",{attrs:{label:"公开投票人",value:0}}),t("h-radio",{attrs:{label:"隐藏投票人",value:1}})],1)],1)],1)},Ne=[],ze=(n("d9e2"),n("7551")),Re=n("3786"),Be=n("0e5c"),$e={name:"VoteForm",components:{HRadio:ze["a"],HInput:me["a"],HRadioGroup:ze["b"],HButton:q["a"]},props:{accept:{type:String,default:"image/*"},form:{type:Object,require:!0}},computed:{...Object(De["d"])({user:e=>e.users.userInfo,isMobile:e=>e.media.isMobile}),pickerOptions(){let e="00:00:00";const t=je()(),n=t.startOf("day");this.form.endTime&&je()(this.form.endTime).startOf("day").isSame(n)&&(e=t.format("HH:mm:ss"));const a=e+" - 23:59:59";return{disabledDate(e){const t=je()(e),a=je()().add(1,"year");return t.isBefore(n)||t.isAfter(a)},shortcuts:[{text:"一天",onClick(e){const t=je()().add(1,"day");e.$emit("pick",t.toDate())}},{text:"一周",onClick(e){const t=je()().add(7,"day");e.$emit("pick",t.toDate())}},{text:"一个月",onClick(e){const t=je()().add(30,"day");e.$emit("pick",t.toDate())}}],selectableRange:a}}},data(){return{formRules:{title:[{required:!0,message:"请输入投票标题",trigger:"blur"},{max:15,message:"投票标题的长度不能超过15个字符",trigger:"blur"}],type:[{required:!0,message:"请选择投票形式",trigger:"change"}],checkType:[{required:!0,message:"请选择投票类型",trigger:"change"}],maxOptions:[{required:!0,message:"请选择最多选择项数",trigger:"change"}],endTime:[{required:!0,message:"请选择截止时间",trigger:"change"},{validator:(e,t,n)=>{const a=(new Date).getTime(),s=new Date(t).getTime();s<a?n(new Error("截止时间不能早于当前时间")):n()},trigger:"change"}],privacy:[{required:!0,message:"请选择投票对象",trigger:"change"}]}}},methods:{addOption(){this.form.options.push({text:""})},removeOption(e){this.form.options.splice(e,1)},triggerUpload(e){this.optionIndex=e,this.$refs.uploaderInputRef.click()},validate(){return new Promise((e,t)=>{this.$refs["form"].validate(n=>{n?e(!0):t(!1)})})},async handleImageUpload(e){const t=await Ae["a"].get(Re["a"].upload),{auth:n,token:a}=t,s=20971520,i=e.target.files[0];if(i.size>s)this.$message({type:"warning",message:"单文件尺寸限制为20M"});else try{const e=await Be["a"].uploadSingleFile(i,a,this.user.uid,n,(e,t)=>{this.$showProcess({title:"图片上传中...",value:e,max:t})},!1);if(0===e.code){const{filename:t,thumbnail:n}=e;this.$set(this.form.options[this.optionIndex],"image",t),this.$set(this.form.options[this.optionIndex],"thumbnail",n)}}catch(o){console.log(o)}}}},Ue=$e,Fe=(n("6a93"),n("eeeb"),Object(v["a"])(Ue,Me,Ne,!1,null,"9a49d5b0",null)),Ve=Fe.exports,Ge={name:"vote",components:{VoteForm:Ve,HButton:q["a"],popper:j.a},props:{voteData:{type:Object,require:!0},updateVoteData:{type:Function,require:!0}},computed:{...Object(De["d"])({isMobile:e=>e.media.isMobile}),popperOptions:function(){return this.isMobile?{placement:"bottom"}:{placement:"bottom",modifiers:{preventOverflow:{escapeWithReference:!0}}}}},data(){const e=je()().add(7,"day").format("YYYY-MM-DD HH:mm:ss");return{optionIndex:0,form:{title:"",options:[{text:""},{text:""}],type:0,checkType:0,endTime:e,privacy:0,max:2}}},methods:{showPopover(){this.$refs.popper.showPopper=!0},hidePopover(){this.$refs.popper.showPopper=!1},deleteVote(){this.$confirm("确定删除该投票吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",zIndex:1e4}).then(()=>{this.updateVoteData({}),this.resetForm(),this.hidePopover(),this.$message({type:"success",message:"删除投票成功~"})})},resetForm(){this.form={title:"",options:[{text:""},{text:""}],type:0,checkType:0,endTime:je()().add(7,"day").format("YYYY-MM-DD HH:mm:ss"),privacy:0,max:2}},async onConfirm(){try{const e=await this.$refs["voteForm"].validate();if(1===this.form.type&&this.form.options.some(e=>!e.image))return void this.$message({type:"warning",message:"请添加图片",zIndex:1e4});if(e){const e=0===this.form.type?{...this.form,options:this.form.options.map(e=>({text:e.text}))}:{...this.form,options:this.form.options.map(e=>({text:e.text,image:e.image}))};this.updateVoteData(e),this.$message({type:"success",message:"保存投票成功~",zIndex:1e4}),this.hidePopover()}else console.log("error submit")}catch(e){console.error("error",e)}}}},We=Ge,qe=(n("bcf0"),Object(v["a"])(We,He,Oe,!1,null,"1cec93c8",null)),Ke=qe.exports},"18c5":function(e,t,n){},19532:function(e,t,n){"use strict";n("1ec1")},"1a53":function(e,t,n){"use strict";n("5c28")},"1a95":function(e,t,n){"use strict";n("93da")},"1e1d":function(e,t,n){},"1ec1":function(e,t,n){},2287:function(e,t,n){"use strict";var a=n("3b81");t["a"]={guessingExchange:a.root+"/exchange",info:a.root+"/user",running:a.root+"/race/running"}},2447:function(e,t,n){},"258f":function(e,t,n){},"27b2":function(e,t,n){},"27e8":function(e,t,n){"use strict";var a,s,i=n("2f62"),o=n("1ab4"),r=n("f1f3"),l={name:"post-editor",components:{EditorContent:o["b"]},props:{value:{type:String,require:!1},toolbar:{type:Array,require:!1},onChange:{type:Function,require:!1},limit:{type:Number,require:!1},voteData:{type:Object,require:!0},updateVoteData:{type:Function,require:!0}},provide(){var e,t;return{uid:null===this||void 0===this||null===(e=this.userInfo)||void 0===e?void 0:e.uid,nickname:null===this||void 0===this||null===(t=this.userInfo)||void 0===t?void 0:t.nickname}},inject:["observedEditor"],computed:{editor(){return this.observedEditor.editor},...Object(i["d"])({userInfo:e=>e.users.userInfo}),currentCount(){return this.editor.storage.characterCount.characters()||0},percentage(){return Math.round(100/this.limit*this.currentCount)}},mounted(){this.$watch("editor",()=>{this.editor.on("update",({editor:e})=>{this.$emit("input",e.view.dom.innerHTML)})})},methods:{handleContentClick(){this.editor.commands.focus()},clearContent(){this.editor.commands.clearContent()},resetForm(){this.$refs["vote"].resetForm()},setContent(e){this.editor.commands.setContent(null!==e&&void 0!==e?e:"")}},render(){var e;const t=arguments[0];return t("div",{class:"post-editor"},[this.editor&&t("div",{class:"post-editor-toolbar"},[(null===(e=this.toolbar)||void 0===e?void 0:e.length)>0&&this.toolbar.map(e=>{const n=r["d"][e];return"vote"===e&&n?t("span",{class:{"post-editor-toolbar-item":!0,"is-active":this.editor.isActive(e)||Object.keys(this.voteData).length>0}},[t(n,{ref:"vote",attrs:{updateVoteData:this.updateVoteData,voteData:this.voteData}})]):n?t("span",{class:{"post-editor-toolbar-item":!0,"is-active":this.editor.isActive(e)}},[t(n)]):null})]),t("div",{class:"post-editor-content",on:{click:this.handleContentClick}},[t(o["b"],{attrs:{editor:this.editor}})]),this.editor&&t("div",{class:{"character-count":!0,"character-count__warning":this.currentCount===this.limit}},[t("svg",{attrs:{height:"20",width:"20",viewBox:"0 0 20 20"},class:"character-count__graph"},[t("circle",{attrs:{r:"10",cx:"10",cy:"10",fill:"#e9ecef"}}),t("circle",{attrs:{r:"5",cx:"10",cy:"10",fill:"transparent",stroke:"currentColor","stroke-width":"10","stroke-dasharray":`calc(${this.percentage} * 31.4 / 100) 31.4`,transform:"rotate(-90) translate(-20)"}}),t("circle",{attrs:{r:"6",cx:"10",cy:"10",fill:"white"}})]),t("div",{class:"character-count__text"},[this.editor.storage.characterCount.characters(),"/",this.limit])])])}},c=l,d=(n("8af0"),n("2877")),u=Object(d["a"])(c,a,s,!1,null,"3a08d020",null);t["a"]=u.exports},"27f4":function(e,t,n){"use strict";n("302b")},2843:function(e,t,n){"use strict";n("6cb9")},"29b0":function(e,t,n){"use strict";n.r(t);var a,s,i=n("feeb"),o=n("27e8"),r=n("dbbe"),l=n("6275"),c=n("f1f3"),d={name:"post-page",components:{PostEditor:o["a"],EditorProvider:i["a"],HButton:r["a"],HInput:l["a"]},props:{limitWords:Number,loading:Boolean},data(){return{draftContent:"",postTitle:"",postContent:"",lockTime:!1,time:"",toolbarConfig:["bold","italic","image","link","emoticons","video","vote"],pluginConfig:{[c["a"].IMAGE]:null,[c["a"].LINK]:null,[c["a"].MENTION]:null,[c["a"].HASH_TAG]:null,[c["a"].CHARACTER_COUNT]:{limit:this.limitWords||1e4}},voteData:{}}},methods:{handlePost(){const e=/data:image\/.*;base64,/;if(e.test(this.postContent))return void this.$message({type:"danger",message:"有图片未通过编辑器上传，请勿直接拖拽或粘贴图片到编辑器"});let t={title:this.postTitle,content:this.postContent};t.voteData=this.voteData,this.lockTime&&this.time&&(t.lockTime=Number(this.lockTime),t.time=this.time),this.$emit("post",t)},clear(){this.postTitle="",this.postContent="",this.$refs["editor"].clearContent(),this.voteData={},this.$refs["editor"].resetForm()},addContent(){this.draftContent=""},updateVoteData(e){this.voteData=e}},render(){const e=arguments[0];return e("div",{class:"post"},[e("div",{class:"post-header"},[e("img",{class:"post-creator-avatar"}),e("h-input",{class:"post-title-input",attrs:{maxlength:30,placeholder:"这里输入标题~"},model:{value:this.postTitle,callback:e=>{this.postTitle=e}}})]),e("editor-provider",{attrs:{type:"post",plugins:this.pluginConfig}},[e("post-editor",{ref:"editor",attrs:{draftContent:this.draftContent,toolbar:this.toolbarConfig,voteData:this.voteData,updateVoteData:this.updateVoteData,limit:this.limitWords||1e4},model:{value:this.postContent,callback:e=>{this.postContent=e}}})]),e("div",{class:"post-footer"},[e("div",{class:"lock-time"},[e("el-checkbox",{class:"lock-time-checkbox",model:{value:this.lockTime,callback:e=>{this.lockTime=e}}},["定时发送"]),this.lockTime&&e("el-date-picker",{class:"time",attrs:{"popper-class":"time-popover","value-format":"yyyy-MM-dd HH:mm:ss",size:"small",type:"datetime",placeholder:"选择日期时间"},model:{value:this.time,callback:e=>{this.time=e}}})]),e("h-button",{on:{click:this.handlePost},attrs:{loading:this.loading}},["发布帖子"])]),this.$slots.cover&&e("div",{class:"cover"},[this.$scopedSlots.cover({})])])}},u=d,p=(n("e344"),n("72e2"),n("2877")),h=Object(p["a"])(u,a,s,!1,null,"6cb269d1",null);t["default"]=h.exports},"2c6e":function(e,t,n){},"2e32":function(e,t,n){"use strict";n("8819")},"302b":function(e,t,n){},"34f8":function(e,t,n){},"365c":function(e,t,n){"use strict";t["a"]={getPostList:"/post/list",getBriefPostList:"/post/list/brief",getLevelList:"/level/list",userInfo:"/user/info",like:"/post/like",lock:"/post/lock",unlock:"/post/unlock/",levelInfo:"/level/info",signed:"/sign/signed",signedDays:"/sign/days",sign:"/sign",hansering:"/post/hansering",searchUser:"/user/search",searchTag:"/tag/search",postSearch:"/post/search",follow:"/user/follow",followList:"/user/follow/list",followTotal:"/user/follow/total",fansList:"/user/fans/list",fansTotal:"/user/fans/total",postList:"/post/user/list",userPosttotal:"/post/user/total",detailPost:"/post/detail/",tagList:"/tag/list",replyList:"/reply/list/",replyPost:"/reply/",replyPostByFloor:"/reply/floor/",likeReply:"/reply/floor/like/",replyReply:"/reply/sub/floor/",getUserInfo:"/user/user-info",postFavorite:"/post/favorite/",favoriteList:"/post/favorite/list",avatarChecking:"/user/avatar-checking",avatarApply:"/user/avatar-apply",noticeCount:"/notice/count",tagedList:"/post/taged/list",tagInfo:"/tag/info",deletePost:"/post/delete/",deleteReply:"/reply/delete/",replySetTop:"/reply/set-top",deleteFloor:"/reply/sub/delete/",dataCount:"/user/data/count",nicknameCheck:"/user/nickname-check",nicknameChecking:"/user/nickname-checking",nicknameApply:"/user/nickname-apply",canApplyNickname:"/user/can-apply-nickname",signChecking:"/user/sign-checking",signApply:"/user/sign-apply",infoSave:"/user/info/save",navList:"/post/nav-list",signData:"/sign/data",signCard:"/sign/card",signFill:"/sign/fill",manager:"/user/manager",userScore:"/user/score",bindSelf:"/user/bind-self",friending:"/user/friending",getVideoInfo:"/forward/get-video-info",appVersion:"/version",followingStatus:"/user/following/",userConfig:"/user/config",setUserConfig:"/user/set-config",autoHansering:"/post/auto-hansering",getRoomInfo:"/status/living",editPost:"/post/edit/",contributionRank:"/contribution/rank",nicknameCard:"/user/nickname-card",theme:"/version/theme",appTime:"/app/time",reportPost:"/post/report",bannerInfo:"/app/config",myFollow:"/post/my-follow",myFollowUnread:"/post/my-follow-unread",myLike:"/post/my-like"}},3665:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAqlQTFRFAAAA//////////////////////////////////////////////////////////////////////////////////zz//jk//TX//LP//HK//HL//LO//TW//////////vw/+ej/96D/9ht/9Vi/9tk/95l/99m/99l/96C/+ah//DJ//vv//////////79//LN/+KT/9dq/+Bm/+Nn/9pj/9di/9Zh/9Vh/9lj/+Jn/9dn/uGP//78///////////+/+6//9t5/+Fn/+CM/+6+//TU//TV/+7A/+OW/9Zm/+Fm/+Bl/9t3/+27//PR/9x8/91l/9lw//PU//np/+KR/91k/+No/9t4//HM//////32/+Sa//nq/+ag//////be/9p0/+Ro/9Zi/92B//XZ//HJ/9py//33//DG/91///ru/+/E/+69/+OY/9lx/+y4/////+/C/+mu//DF/9+G/9hj/+26//////PS/+qw/9do/9xk/+Wc/91+//34/9ly/9Zk//jj/9t2//76/+OX/+CL/+mt/9x9///9/+qx/+28/+Vo/+iq//////no/9Zj/9Zl/+SZ/9hi//fi/////////+SY//z0//bd/9+H/+KQ//fh//Xa/+We//DH/+OV/9dp//77/9p1//rr/////9x7/9x6/+GM/////+GO//rt//nn/9+I/////9hs//vu/////+y2//LQ/+in//vx//////XY//z1/9+F/96B/9lv//Xb//zy//75//35/+u1//bf/9hr/92A/+CJ/+CK//rs/+em/9Zn/9Vj/+OU/+u0//jm//HI/9pz/+y5/96E//jl/+ip/+mr/+KS/+qu//////bc/+uz/+y3/+ek/+/D/+ai/+io/+el/+GP/+Wf/////+Wd/+uy2/HFkwAAAON0Uk5TACVWh67K4vX+/PQBP4/T/xV21hLw//////////9r7P////////////////8nxP///////////////////1/6//////////////////////////////////+r/////7T//////////////////////2D////////5////////////////////////////7f///////xTv//////////////////+Q////1P////8m//9X/////63/////////////////////////////////////////E/////////////+O//+gj9eqAAAGe0lEQVR4nKUX+VtUVXQMWUzwijgjIIjOgpAsMsPMGwxFMNEmEcRCRFMGcU1FSw0GFFwwSFHESguzcAEJIXAXTbFSUbJs0ciyrL+kc+59982bN/PU7/P8MHPv2e59Z78ajQoMeclvqH9AYNCwlwP8h/q9NESNzycMDw4ZMYx4wLARIcHDn1N8ZOgo4hNGhY58DvEwv9FcQKsbEx4ROTZKp+WY0X5hz5KPHsdYYyLHT9AbjKbYiSajQR8X/8okhh8X/VTxhETKlZQ8OcVsMaVabTZBsNmsdlOaecqrEemUmJigLj91GnJkTM80Z9kFhBmvzcyeNft1XNodb8zJoSqmTVWTDyEkiJC5uZY8Ki3My2fXnv8m279VsKCQsoT4ll+IzEWLJpoYu6BfLNn/bRFlMs+mBl3oS34JUpYWO0tEZmEWyWDiGSRjmYizOeeVImqJyvnLDRMNXH7FSkCsmrF60RrQkMyxBpP1HZ93CEHs2jyjJC+sA0QhLjJBU9F6SUNqbBnyKuywAXEbY+2CG94FzGy6eg9Wm9yEzY4tyL1BLp/wPmDKU1Nl8kIFoCb7UiDY8yLQm/J4SATnzHdVGuQKqoApEhdbt8EnVMtJxprtIJDolo/GK8VlecgLO3YCMn9X7W6t3IjMDuYP6oAoRXUYxn+9U1DAhzwKMkjdagVtz17AN/DM8oPNvv12pYLGfCmQDihpTSUHAe3H5D/6GNafWJQ8cNP6Q1T88KfetLTPMLtZfQiFZbPV6s0kCCljgLbOF6XEeARIoSg/HOvP5z4ugHCUkPQdPilpX2CNwioXjOXjSy8LMACHtxzzSWlqPA6CwaDgBPxPT1PSXbm5J0+2HssGBW3FmQsWzGlUclgwok+AglPw325WUOO+IklJSenpmI8tFDqUnow9DbRTGk0n1G9tl/ILkokXRCpY7K6vodp3arqBFlVpU1B73EHEoUz5DaYzgO2mUVTm5YPGs8sjIiIjI85BhS0vTE4OH1vh8jJCPY2l8+hELxtymAl51KVCy8KKcV7jD79tShtKcIGQi/NUaKZLIOqvCYDfyyYVHgHCTdurQqtshZQM0ASCoU5Wqim4QshVvQrNeOwbQgI1UOaTMrkCQ07HWQ+mw4ScU7OBsfgadAmqoJUruA7fM0HO1EfIpBtyxITS7GL5DYLwE8i3Yiv6Dv3dI+dvJmRNimyvh+CZKa4rW5PwE9CI38eyD9Bh3GTL+A1QNm7KAyAej2hna1McQSOiG6tYHNyiEbf4tpu/X0fI8SkyBXPxiCNs7bhD3YiBdJdGop7NEUmtbv6aAU+F1SspSy3dWHbDcigN5XIT5kKOGPRVboHGDujNskSOZxzhdGMupKGMyTQJ6wm7ANzwB5mC+YR0yBQcYQpojWEVpZumMzkNVrwXk7H9RziRaN2Rcxs6/ECNtP2JZ2YttyGkMy0oNB2r57CGSOIliSlwiK5f2q5C6tqeqHA8oqCeFRRa0hY3NjGWXOw49yUR101CDkoNixKPi1ur4b5Y0rCokjs8obFIkJ+5SMoaqPjSBdBo5Bdx42gjYlGlZb20UhxMaDC2bBW5bsBw18flf0VSjJgZttgzvKzTxkLas0S2SBpMYgp3QUU6LBJ6Y5DCc828CXehrLXhaNq3WWxNxRfRlwOsGeivEnKF4fupC5u5BSqxZ4mtjcYSGb9H1L2LRsMh2tB6tTxwXdnUf5cYj8GJ0wNvrpqwBthc28Hnq99YPGW39wsu6K5jENfWQeQWNFXDPUnDA48B46GNTzi/i+EyMBgPsV+qv/zHBYZ4JDLYU6NwKxubccQhGx28Q/9ZR9zQcpGvjopka9oW4jniaBLokFzh5BqWPSTewCtNyZ6/cOsxZLExj+y1NHGnVzUrxLeLZURocj6mCI8xTxw0SU+eNKkZZszqqCNibyvKP7BfRBtjKyir18BNR11SeFvWpBozH4P4zZ6zf6+QcI4amlG+xm06bJN9m5xGt4renR7lQUh1xukom49hm9+B5HQ5pYnVAOH3jyRud6YMErXzEZ7Q1wTR7k0pMIn+uDf4L7d9XoHrFqYDsDzxLc+fPNCMylY3WcxGqzg12KypZos993oMo6o/eaRHF0Df3bZqQ54jDcCRZ1hf+99SPmo87dEFEN0geX6brvzRYH19z8a5uiIJ2fD0Z5/G4+HpDaP9HjxLXvPCT1+EF3x8M+jsZs//oEB8/nd3qvH9Dys9vGKNdwb3AAAAAElFTkSuQmCC"},3786:function(e,t,n){"use strict";t["a"]={isCheckRegister:"/auth/check-register",login:"/auth/login",uploadToken:"/auth/upload-token",upload:"/upload",fileLink:"/auth/file-link",loginOut:"/auth/loginout",timeUp:"/auth/time-up",changePassword:"/user/change-password",bindAccount:"/auth/bind-account",dissmiss:"/auth/dissmiss",siteDissmiss:"/auth/site-dissmiss",authCode:"/auth/code",validate:"/auth/validate",validateLogin:"/auth/validate-login",register:"/auth/register"}},"39a0":function(e,t,n){"use strict";n("0425")},"3b81":function(e){e.exports=JSON.parse('{"domain":"https://test.2550505.com","root":"https://test.2550505.com"}')},4026:function(e,t,n){},4053:function(e,t,n){},4360:function(e,t,n){"use strict";var a=n("a026"),s=n("2f62");const i={userInfo:{}},o={changeUserInfo(e,t){e.userInfo=t},addUserExp(e,t){e.userInfo.exp+=t},costContribution(e,t){e.userInfo.contribution-=t}},r={},l={isAdmin(e){return e.userInfo.role>=256},isManager(e){return!!(256&e.userInfo.role)},isChecker(e){return!!(512&e.userInfo.role)},isScoreManager(e){return!!(1024&e.userInfo.role)},isHobbyManager(e){return!!(2048&e.userInfo.role)},isChatManager(e){return!!(4096&e.userInfo.role)},isContributionManager(e){return!!(8192&e.userInfo.role)},isHanser(){return 65535===i.userInfo.role}},c={};var d={namespaced:!0,state:i,mutations:o,actions:r,getters:l,modules:c};const u={levels:[],levelInfo:{},nextLevelInfo:{}},p={setLevels(e,t){e.levels=t},setLevelInfo(e,t){e.levelInfo=t},setNextLevelInfo(e,t){e.nextLevelInfo=t}},h={},m={},f={};var g={namespaced:!0,state:u,mutations:p,actions:h,getters:m,modules:f};const v={windowWidth:0,isMobile:!1},b={setMedia(e,t){e.windowWidth=t,e.isMobile=t<=750}},k={},y={},w={};var C={namespaced:!0,state:v,mutations:b,actions:k,getters:y,modules:w},x=n("db04"),_=n("365c");const A={bilibili:[],douyu:[]},T={setBilibiliScore(e,t){e.bilibili=t},setDouyuScore(e,t){e.douyu=t}},L={updateScore(e){x["a"].get(_["a"].userScore).then(t=>{0===t.code&&(e.commit("setBilibiliScore",t.bilibili),e.commit("setDouyuScore",t.douyu))})}},I={},P={};var S={namespaced:!0,state:A,mutations:T,actions:L,getters:I,modules:P};const H={notice:{},followUnread:0},O={setNotice(e,t){e.notice=t},setFollowUnread(e,t){e.followUnread=t}},E={},j={},D={};var M={namespaced:!0,state:H,mutations:O,actions:E,getters:j,modules:D};const N={theme:window.localStorage.getItem("theme")||"light",themeWithAvatarBorder:["new-year-2022","new-year-2023"]},z={setTheme(e,t){e.theme=t}},R={},B={},$={};var U={namespaced:!0,state:N,mutations:z,actions:R,getters:B,modules:$},F=n("2287");const V={guessCoin:0,guessInfo:{}},G={setGuessCoin(e,t){e.guessCoin=t},addGuessCoin(e,t){e.guessCoin+=t},costGuessCoin(e,t){e.guessCoin-=t},setGuessInfo(e,t){e.guessInfo=t}},W={updateGuessCoin(e){x["a"].get(F["a"].info).then(t=>{0===t.code&&e.commit("setGuessCoin",t.user.points)})}},q={},K={};var X={namespaced:!0,state:V,mutations:G,actions:W,getters:q,modules:K};a["default"].use(s["a"]);const Y=new s["a"].Store({state:{},mutations:{},actions:{},getters:{},modules:{users:d,level:g,media:C,score:S,notice:M,config:U,guess:X}});t["a"]=Y},"43e0":function(e,t,n){"use strict";n("258f")},4445:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"load-more",attrs:{id:e.id}},[e.haveMore?t("div",{staticClass:"loading-text"},[t("img",{attrs:{src:"https://cdn.ihan.club/new-year-2023/loading.gif",width:"50%",alt:"loading"}})]):t("span",{staticClass:"loading-text"},[e._v("----- 没有更多数据 -----")])])},s=[],i={name:"load-more",props:["name","haveMore"],data(){return{}},computed:{id(){return"hanser-load-more-"+this.name}},mounted(){const e=new IntersectionObserver(e=>{e[0].intersectionRatio&&this.$emit("load-more")}),t=document.getElementById(this.id);e.observe(t)}},o=i,r=(n("48af"),n("2877")),l=Object(r["a"])(o,a,s,!1,null,"6262c0c5",null),c=l.exports;t["a"]=c},"448a":function(e,t,n){},"46f9":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return m}));n("d9e2");var a=n("db04"),s=n("3786"),i=n("0e5c");const o="image/*",r=20971520,l={MAX_FILE_SIZE:"单文件尺寸限制为20M"},c=e=>new Promise((t,n)=>{e.some(e=>u(e.size))&&n(l["MAX_FILE_SIZE"]),t()}),d=(e,t)=>e<=t,u=e=>e>r,p=async(e,t,n=!1)=>{if(!t)throw new Error("必须登录后才能上传图片");try{const o=await a["a"].get(s["a"].upload);if(0!==o.code)return;const{auth:r,token:l}=o;if(1===e.length){const a=e[0],s=await i["a"].uploadSingleFile(a,l,t,r,(e,t)=>{window.$vm.$showProcess({title:"图片上传中...",value:e,max:t})},n);if(0===s.code){const{thumbnail:e}=s;return[e]}return[""]}{const a=await i["a"].uploadMultiFiles(e,l,t,r,(e,t,n)=>{window.$vm.$showProcess({title:n,value:e,max:t})},n),s=a.map(e=>e.thumbnail);return s}}catch(o){throw new Error(o.message)}},h=e=>new Promise((t,n)=>{e&&"string"===typeof e||n("图片url错误");const a=new Image;a.crossOrigin="*",a.src=e,a.onload=()=>{t(a)},a.onerror=e=>{n(e)}}),m=e=>new Promise((t,n)=>{e||n("文件错误");const a=new FileReader;a.readAsDataURL(e),a.onload=()=>{t(a)},a.onerror=e=>{n(e)}})},"48af":function(e,t,n){"use strict";n("ce86")},"4aed":function(e,t,n){},"4e6a":function(e,t,n){"use strict";n("34f8")},"50fc":function(e,t,n){"use strict";t["a"]={deletePost:"/post/delete/",recoverPost:"/post/recover",setPostValued:"/post/set-valued",removePostValued:"/post/remove-valued",setPostTopping:"/post/set-top",removePostTopping:"/post/remove-top",getLogList:"/post/log/list",getInfoCheckList:"/admin/info-apply-list",getAvatarCheckList:"/admin/avatar-apply-list",approveAvatarCheck:"/admin/avatar-apply-check",getBanList:"/post/ban/list",getRecoverList:"/post/recover/list",nicknameApplyList:"/admin/nickname-apply-list",nicknameApplyCheck:"/admin/nickname-apply-check",signApplyList:"/admin/sign-apply-list",signApplyCheck:"/admin/sign-apply-check",ban:"/admin/ban/",unban:"/admin/unban/",setBanTime:"/admin/set-ban-time/",banList:"/admin/ban-list",setAdmin:"/admin/set-admin",cancelAdmin:"/admin/cancel-admin",chatList:"/admin/chat",clearAccount:"/admin/clear-account",banWords:"/admin/ban-words",updateBanWords:"/admin/update-ban-words",reportList:"/admin/report-list",handleReport:"/admin/handle-report"}},"528e":function(e,t,n){},5655:function(e,t,n){},"5692c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e8de"),n("450d");var a=n("607c"),s=n.n(a),i=(n("eca7"),n("3787")),o=n.n(i),r=(n("425f"),n("4105")),l=n.n(r),c=(n("d96c"),n("0c9b")),d=n.n(c),u=(n("fb08"),n("21e5")),p=n.n(u),h=(n("b0ee"),n("d180")),m=n.n(h),f=(n("a335"),n("c0bb")),g=n.n(f),v=(n("dcba"),n("9e16")),b=n.n(v),k=(n("784f"),n("7532")),y=n.n(k),w=(n("3db2"),n("58b8")),C=n.n(w),x=(n("b8e0"),n("a4c4")),_=n.n(x),A=(n("186a"),n("301f")),T=n.n(A),L=(n("96dc"),n("9cea")),I=n.n(L),P=(n("826b"),n("c263")),S=n.n(P),H=(n("1951"),n("eedf")),O=n.n(H),E=(n("a7cc"),n("df33")),j=n.n(E),D=(n("560b"),n("dcdc")),M=n.n(D),N=(n("9d4c"),n("e450")),z=n.n(N),R=(n("10cb"),n("f3ad")),B=n.n(R),$=(n("e612"),n("dd87")),U=n.n($),F=(n("cbb5"),n("8bbc")),V=n.n(F),G=(n("075a"),n("72aa")),W=n.n(G),q=(n("6611"),n("e772")),K=n.n(q),X=(n("1f1a"),n("4e4b")),Y=n.n(X),J=(n("5466"),n("ecdf")),Z=n.n(J),Q=(n("38a0"),n("ad41")),ee=n.n(Q),te=(n("6b30"),n("c284")),ne=n.n(te),ae=(n("06f1"),n("6ac9")),se=n.n(ae),ie=(n("acb6"),n("c673")),oe=n.n(ie),re=(n("672e"),n("101e")),le=n.n(re),ce=(n("9e1f"),n("6ed5")),de=n.n(ce),ue=n("a026"),pe=function(){var e=this,t=e._self._c;return e.safeSite?t("div",{attrs:{id:"app"}},[t("img",{staticClass:"test-img",attrs:{src:"https://cdn.2550505.com/share/ping.png",width:"0",height:"0"},on:{error:e.useAlternative,load:e.useDefault}}),t("router-view")],1):e._e()},he=[],me={name:"App",methods:{updateDb(e){const t=indexedDB.open("cdn",1);t.onupgradeneeded=()=>{const e=t.result,n=e.createObjectStore("cdnRoot",{keyPath:"id"},{autoIncrement:!0});n.createIndex("cdnRoot_id_unqiue","id",{unique:!0})},t.onsuccess=t=>{const n=t.target.result,a=n.transaction(["cdnRoot"],"readwrite"),s=a.objectStore("cdnRoot");s.put({id:1,root:e}).onsuccess=()=>{}},t.onerror=()=>{console.log("数据库出错")}},useAlternative(){this.updateDb("https://cdn1.2550505.com")},useDefault(){this.updateDb("https://cdn.2550505.com")}},computed:{safeSite(){const e=window.location.hostname,t=["localhost","2550505.com","106.52.70.212"];return t.some(t=>e.includes(t))}}},fe=me,ge=(n("8260"),n("2877")),ve=Object(ge["a"])(fe,pe,he,!1,null,null,null),be=ve.exports,ke=n("8c4f"),ye=function(){var e=this,t=e._self._c;return t("div",{staticClass:"index",attrs:{"data-theme":e.theme}},["new-year-2022"===e.theme?t("div",{staticClass:"snow-cover"},[e._l(50,(function(e){return t("div",{key:"snow-1"+e,staticClass:"snow1"})})),e._l(50,(function(e){return t("div",{key:"snow-2"+e,staticClass:"snow2"})}))],2):e._e(),t("router-view")],1)},we=[],Ce=n("2f62"),xe=n("db04"),_e=n("365c"),Ae={name:"index",data(){return{theme:window.localStorage.getItem("theme")||"light",themeVersion:Number(window.localStorage.getItem("themeVersion"))||0}},methods:{...Object(Ce["c"])({setMedia:"media/setMedia",setTheme:"config/setTheme"}),setWindowWidth(){const e=document.body.clientWidth;this.setMedia(e)},getThemeVersion(){xe["a"].get(_e["a"].theme).then(e=>{if(0===e.code&&e.version>this.themeVersion){this.themeVersion=e.version,this.theme=e.theme,window.localStorage.setItem("themeVersion",this.themeVersion),window.localStorage.setItem("theme",this.theme);const t=new CustomEvent("change-theme",{detail:{theme:this.theme}});window.dispatchEvent(t)}})}},mounted(){this.setWindowWidth(),window.onresize=()=>{this.setWindowWidth()},window.addEventListener("change-theme",e=>{this.theme=e.detail.theme,window.localStorage.setItem("theme",this.theme),document.body.setAttribute("data-theme",this.theme),this.setTheme(this.theme)}),this.getThemeVersion(),console.log(" ____    ____   ______     ______  _____  _____  _____  ______    \n|_   \\  /   _|.' ___  |  .' ___  ||_   _||_   _||_   _||_   _ \\   \n  |   \\/   | / .'   \\_| / .'   \\_|  | |    | |    | |    | |_) |  \n  | |\\  /| | | |   ____ | |         | |   _| '    ' |    |  __'.  \n _| |_\\/_| |_\\ `.___]  |\\ `.___.'\\ _| |__/ |\\ \\__/ /    _| |__) | \n|_____||_____|`._____.'  `.____ .'|________| `.__.'    |_______/  "),console.log("关注我们,B站搜索: %c毛怪俱乐部","color: rgb(251, 114, 153);")}},Te=Ae,Le=(n("77d5"),Object(ge["a"])(Te,ye,we,!1,null,"92d8d2f0",null)),Ie=Le.exports;ue["default"].use(ke["a"]);const Pe=ke["a"].prototype.replace;ke["a"].prototype.replace=function(e){return Pe.call(this,e).catch(e=>e)};const Se=ke["a"].prototype.push;ke["a"].prototype.push=function(e){return Se.call(this,e).catch(e=>e)};var He=new ke["a"]({mode:"history",routes:[{path:"/",component:Ie,children:[{path:"/",meta:{userInfo:!0,level:!0},component:()=>Promise.all([n.e("chunk-2d21d0c2"),n.e("chunk-1d022228"),n.e("chunk-b9c72f82"),n.e("chunk-863bcd02")]).then(n.bind(null,"ed3a")),children:[{path:"/",name:"mainIndex",meta:{userInfo:!0,level:!0},component:()=>Promise.all([n.e("chunk-2d0a50f6"),n.e("chunk-30b65cca")]).then(n.bind(null,"c3a8"))},{path:"/postDetails/:postId",name:"post-details",meta:{userInfo:!0,level:!0},component:()=>Promise.all([n.e("chunk-2d0a50f6"),n.e("chunk-dc8d9f3a")]).then(n.bind(null,"f26e"))},{path:"/notice",name:"notice",meta:{userInfo:!0,level:!0,login:!0},component:()=>n.e("chunk-9c59fa94").then(n.bind(null,"3dfe"))},{path:"/to-be-continued",name:"to-be-continued",meta:{userInfo:!0,level:!0},component:()=>n.e("chunk-556ac803").then(n.bind(null,"c75f"))},{path:"/backup/:postId",name:"backup",meta:{userInfo:!0,level:!0},component:()=>n.e("chunk-2a54ff7c").then(n.bind(null,"b034"))},{path:"/manager",name:"manager",meta:{userInfo:!0,level:!0,admin:!0},component:()=>n.e("chunk-0bfb2af8").then(n.bind(null,"0943"))},{path:"/score",name:"score",meta:{userInfo:!0,level:!0,login:!0},component:()=>n.e("chunk-d990b3c4").then(n.bind(null,"ec50"))},{path:"/my-follow",name:"my-follow",meta:{level:!0,login:!0},component:()=>Promise.all([n.e("chunk-2d0a50f6"),n.e("chunk-61a67fa6")]).then(n.bind(null,"6126"))},{path:"/my-like",name:"my-like",meta:{level:!0,login:!0},component:()=>Promise.all([n.e("chunk-2d0a50f6"),n.e("chunk-29363e8e")]).then(n.bind(null,"2a38"))},{path:"/contribution-exchange",name:"contribution-exchange",meta:{userInfo:!0,level:!0,login:!0},component:()=>n.e("chunk-0b13450a").then(n.bind(null,"fb12"))},{path:"/reservation",name:"reservation",meta:{userInfo:!0,level:!0,login:!0},component:()=>n.e("chunk-14419652").then(n.bind(null,"791d"))}]},{path:"/ui",name:"ui",component:()=>n.e("chunk-15f748c4").then(n.bind(null,"73e4"))},{path:"/login",name:"login",component:()=>n.e("chunk-fc5672a0").then(n.bind(null,"dd7b"))},{path:"/register",name:"register",meta:{userInfo:!0},component:()=>n.e("chunk-4117d76b").then(n.bind(null,"7803"))},{path:"/tripartiteVerify",name:"tripartiteVerify",meta:{userInfo:!0},component:()=>n.e("chunk-371914d4").then(n.bind(null,"eeb3"))},{path:"/tripartiteVerify-pwd",name:"tripartiteVerify-pwd",meta:{userInfo:!0,login:!0},component:()=>n.e("chunk-78c5392a").then(n.bind(null,"a1a3"))},{path:"/tripartiteVerify-pinless",name:"tripartiteVerify-pinless",meta:{userInfo:!0,login:!0},component:()=>n.e("chunk-2f1b9f08").then(n.bind(null,"5def"))},{path:"/change-password",name:"change-password",meta:{userInfo:!0,login:!0},component:()=>n.e("chunk-5fddc021").then(n.bind(null,"9d4e"))},{path:"/post",name:"post-page",component:()=>Promise.resolve().then(n.bind(null,"29b0"))},{path:"/home",name:"home",meta:{userInfo:!0,level:!0,login:!0},component:()=>Promise.all([n.e("chunk-2d21d0c2"),n.e("chunk-1d022228"),n.e("chunk-14117dd3")]).then(n.bind(null,"6511"))},{path:"/space/:uid",name:"space",meta:{userInfo:!0,level:!0},component:()=>Promise.all([n.e("chunk-2d0a50f6"),n.e("chunk-2d21d0c2"),n.e("chunk-1d022228"),n.e("chunk-b9c72f82"),n.e("chunk-4bba15b6")]).then(n.bind(null,"cb33"))},{path:"/tag/:tagId",name:"tag",meta:{userInfo:!0,level:!0},component:()=>Promise.all([n.e("chunk-2d0a50f6"),n.e("chunk-2d21d0c2"),n.e("chunk-1d022228"),n.e("chunk-b9c72f82"),n.e("chunk-55647276")]).then(n.bind(null,"bdb6"))},{path:"/hanser/admin",name:"admin",meta:{userInfo:!0,admin:!0},component:()=>n.e("chunk-3a0d44f8").then(n.bind(null,"b6a5"))},{path:"/score-hobby/:hobbyId",name:"score-hobby",meta:{userInfo:!0,login:!0,level:!0},component:()=>Promise.all([n.e("chunk-2d21d0c2"),n.e("chunk-1d022228"),n.e("chunk-6895030a")]).then(n.bind(null,"4e5e"))},{path:"/year/2024",name:"2024",component:()=>Promise.all([n.e("chunk-2d21d0c2"),n.e("chunk-a6ff1dce")]).then(n.bind(null,"de35"))},{path:"/post_not_found",name:"post_not_found",component:()=>n.e("chunk-c08e5cb2").then(n.bind(null,"01c3"))},{path:"*",name:"404",component:()=>n.e("chunk-111ed302").then(n.bind(null,"8cdb"))}]}]}),Oe=n("2570"),Ee=n.n(Oe),je=n("77ed"),De=n.n(je),Me=(n("f5df1"),n("9cf1"),n("becf"),n("90f4"),n("d0c5"),n("a101"),n("560e"),n("cb23")),Ne=n("a09c");function ze(e){const{src:t}=e,n=Object(Ne["a"])("div",{props:{contentEditable:!1},style:{margin:"10px 0","text-indent":"0",border:"2px solid var(--w-e-textarea-selected-border-color)"},on:{click(){}}},[Object(Ne["a"])("img",{props:{src:t},style:{width:"100%"}})]);return n}const Re={type:"image",renderElem:ze};var Be=Re;function $e(e){const{src:t}=e;return`<img src="${t}" data-w-e-type="image" data-w-e-is-void data-w-e-is-inline class="upload-img" />`}const Ue={type:"image",elemToHtml:$e};var Fe=Ue;function Ve(e){const t=e.getAttribute("src")||"";return{type:"image",src:t,children:[{text:""}]}}const Ge={selector:'img[class="upload-img"]',parseElemHtml:Ve};var We=Ge,qe={renderElems:Be,elemToHtmlConfig:Fe,parseHtmlConfig:We};function Ke(e){const{src:t}=e,n=Object(Ne["a"])("div",{props:{contentEditable:!1},style:{display:"inline-block","text-indent":"0",marginRight:"2px"},on:{click(){}}},[Object(Ne["a"])("img",{props:{src:t,name:name},style:{width:"50px",height:"50px"}})]);return n}const Xe={type:"emotion-image",renderElem:Ke};var Ye=Xe;function Je(e){const{src:t,name:n}=e;return`<img src="${t}" alt="${n}" title="${n}" data-emotion-name="${n}" data-w-e-type="image" data-w-e-is-void data-w-e-is-inline class="emoticon-img">`}const Ze={type:"emotion-image",elemToHtml:Je};var Qe=Ze;function et(e){const t=e.getAttribute("src")||"",n=e.getAttribute("data-emotion-name")||"";return{type:"emotion-image",src:t,name:n,children:[{text:""}]}}const tt={selector:'img[class="emoticon-img"]',parseElemHtml:et};var nt=tt,at={renderElems:Ye,elemToHtmlConfig:Qe,parseHtmlConfig:nt};const st='<svg viewBox="0 0 1024 1024"><path d="M512 1024C230.4 1024 0 793.6 0 512S230.4 0 512 0s512 230.4 512 512-230.4 512-512 512z m0-102.4c226.742857 0 409.6-182.857143 409.6-409.6S738.742857 102.4 512 102.4 102.4 285.257143 102.4 512s182.857143 409.6 409.6 409.6z m-204.8-358.4h409.6c0 113.371429-91.428571 204.8-204.8 204.8s-204.8-91.428571-204.8-204.8z m0-102.4c-43.885714 0-76.8-32.914286-76.8-76.8s32.914286-76.8 76.8-76.8 76.8 32.914286 76.8 76.8-32.914286 76.8-76.8 76.8z m409.6 0c-43.885714 0-76.8-32.914286-76.8-76.8s32.914286-76.8 76.8-76.8c43.885714 0 76.8 32.914286 76.8 76.8s-32.914286 76.8-76.8 76.8z"></path></svg>',it=n("7e17");class ot{constructor(){this.title="表情",this.iconSvg=st,this.tag="button",this.showDropPanel=!0,this.dom=null,this.left=0,this.root=""}isActive(){return!1}getValue(){return""}exec(){}isDisabled(){return!1}getPanelContentElem(e){if(null==this.dom){const t=document.createElement("div");t.classList.add("editor-emotions");const n="https://2550505.com/emotion/";this.root=it[0].root;const a=document.createElement("div");a.classList.add("editor-root-emotions"),t.appendChild(a);const s=document.createElement("div");s.classList.add("editor-emotions--sorts");const i=document.createElement("div");i.classList.add("editor-emotions--srots-container");const o=document.createElement("div");o.classList.add("editor-emotions--srots-wrapper"),i.appendChild(o);const r=()=>{a.innerHTML="";const t=it.find(e=>e.root===this.root);t.emotions.forEach(s=>{const i=s.split(".")[0],o=n+t.root+"/"+s,r=document.createElement("div");r.classList.add("emotion-image-wrapper");const l=document.createElement("img");l.classList.add("emotion-image"),l.src=o,l.title=i,l.alt=i,r.appendChild(l),a.appendChild(r),r.addEventListener("click",()=>{e.insertNode({type:"emotion-image",src:o,name:i,children:[{text:""}]})})})},l=document.createElement("div"),c=70;l.classList.add("editor-emotions--cart","editor-emotions--left-cart");const d=document.createElement("i");d.classList.add("el-icon-arrow-left"),l.appendChild(d),l.addEventListener("click",()=>{this.left-=5*c,this.left<0&&(this.left=0),o.style.left=`-${this.left}px`}),s.appendChild(l),s.appendChild(i),o.innerHTML="",it.forEach(e=>{const t=document.createElement("div");t.classList.add("editor-emotions--certain-sort"),e.root===this.root&&t.classList.add("editor-emotions--certain-sort__selected");const a=document.createElement("img");a.classList.add("editor-emotions--certain-sort__img"),a.src=n+e.root+"/"+e.emotions[0],t.appendChild(a),t.addEventListener("click",()=>{this.root=e.root,document.getElementsByClassName("editor-emotions--certain-sort__selected")[0].classList.remove("editor-emotions--certain-sort__selected"),t.classList.add("editor-emotions--certain-sort__selected"),r()}),o.appendChild(t)}),r();const u=document.createElement("div");u.classList.add("editor-emotions--cart","editor-emotions--right-cart");const p=document.createElement("i");p.classList.add("el-icon-arrow-right"),u.appendChild(p),u.addEventListener("click",()=>{this.left+5*c>it.length*c||(this.left+=5*c,o.style.left=`-${this.left}px`)}),s.appendChild(u),t.appendChild(s),this.dom=t}return this.dom}}var rt=ot;const lt={key:"emotions",factory(){return new rt}};var ct=lt,dt=n("ed08"),ut=n.n(dt);function pt(e){const{uid:t,avatar:n,nickname:a,exp:s,level:i,levelName:o,colorStyle:r}=e,l={};r.split(";").forEach(e=>{const t=e.split(":");if(2===t.length){const e=t[0].replace("\n","").trim(),n=t[1].replace("\n","").trim();l[e]=n}});const c=Object(Ne["a"])("a",{props:{contentEditable:!1,target:"_blank",href:"/space/"+t,uid:t,avatar:n,nickname:a,exp:s},attrs:{"data-mention":"","data-id":t,class:"mention-user","data-label":a},style:{margin:"10px",display:"inline-flex",alignItems:"center",width:"200px",height:"60px",padding:"5px",boxSizing:"border-box",textIndent:"0",textDecoration:"none",border:"1px solid var(--w-e-textarea-selected-border-color)"},on:{click(){}}},[Object(Ne["a"])("div.mention-user--avatar",{props:{avatar:n,nickname:a},style:{width:"50px",height:"50px",borderRadius:"50%",overflow:"hidden"}},[Object(Ne["a"])("img",{props:{src:ut.a.getThumbnail(n)},style:{width:"100%",height:"100%",objectFit:"cover"},attr:{alt:a,title:a}})]),Object(Ne["a"])("div.mention-user--info",{props:{uid:t,avatar:n,nickname:a,exp:s},style:{display:"flex",flexDirection:"column",justifyContent:"space-between",marginLeft:"10px"}},[Object(Ne["a"])("div.mention-user--nickname",{props:{uid:t,avatar:n,nickname:a,exp:s,level:i},style:l},a),Object(Ne["a"])("div.mention-user--level-label",{props:{},style:{display:"inline-flex",alignItems:"center",width:"max-content",padding:"3px 5px","background-color":"var(--theme-level-label-bg-color)"}},[Object(Ne["a"])("img.mention-user--level-labela__img",{props:{src:`https://cdn.ihan.club/${i}.png`},style:{width:"20px",height:"20px"}}),Object(Ne["a"])("div.mention-user--level-label__name",{props:{uid:t,avatar:n,nickname:a,exp:s,levelName:o},style:{color:"var(--theme-level-label-text-color)","font-size":"12px","box-sizing":"border-box","margin-left":"5px"}},o)])])]);return c}const ht={type:"mention-user",renderElem:pt};var mt=ht;function ft(e){const{uid:t,avatar:n,nickname:a,exp:s,level:i,levelName:o,colorStyle:r}=e;return`<a data-w-e-type="mention-user" data-w-e-is-inline data-value="${a}" class="mention-user">\n        <div class="avatar">${t}${n}${a}${s}${i}${o}${r}</div>\n    </a>`}const gt={type:"mention-user",elemToHtml:ft};var vt=gt;function bt(e){const t=Number(e.getAttribute("data-uid"))||0,n=e.getAttribute("data-avatar")||"",a=e.getAttribute("data-nickname")||"",s=Number(e.getAttribute("data-level"))||0,i=e.getAttribute("data-level-name")||"",o=Number(e.getAttribute("data-exp"))||0,r=Number(e.getAttribute("colorStyle"))||"";return{type:"mention-user",uid:t,avatar:n,nickname:a,exp:o,level:s,levelName:i,colorStyle:r,children:[{text:""}]}}const kt={selector:'a[class="mention-user"]',parseElemHtml:bt};var yt=kt,wt={renderElems:mt,elemToHtmlConfig:vt,parseHtmlConfig:yt};const Ct=["image","emotion-image","mention-user"],xt=["image","emotion-image"];function _t(e){const{isInline:t,isVoid:n}=e,a=e;return a.isInline=e=>{const n=Me["DomEditor"].getNodeType(e);return Ct.includes(n)||t(e)},a.isVoid=e=>{const t=Me["DomEditor"].getNodeType(e);return xt.includes(t)||n(e)},a}var At=_t,Tt=function(){var e=this,t=e._self._c;return t("i",{class:e.icon})},Lt=[],It={name:"icon",props:{icon:{type:String,required:!0}}},Pt=It,St=Object(ge["a"])(Pt,Tt,Lt,!1,null,null,null),Ht=St.exports,Ot=(n("0fae"),n("5887")),Et=n.n(Ot),jt=n("4d1c"),Dt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ban"},[e.isMobile?e.display?t("div",{staticClass:"dialog"},[t("div",{staticClass:"ban-notice"},[e._v("请选择封禁的固定时间段或具体时间点，均选优先使用固定时间段")]),t("div",{staticClass:"ban-period"},[t("h-radio-group",{on:{change:function(t){e.banTime=null}},model:{value:e.banPeriodSelected,callback:function(t){e.banPeriodSelected=t},expression:"banPeriodSelected"}},[t("span",[e._v("固定时间段：")]),t("div",{staticClass:"days"},e._l(e.banPeriodList,(function(e){return t("h-radio",{key:e.period,attrs:{border:"",value:e.period,label:e.value}})})),1),t("h-button",{attrs:{size:"small",plain:""},on:{click:function(t){e.banPeriodSelected=-1}}},[e._v("重置")])],1)],1),t("div",{staticClass:"ban-time"},[t("span",[e._v("具体时间点：")]),t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},on:{change:function(t){e.banPeriodSelected=-1}},model:{value:e.banTime,callback:function(t){e.banTime=t},expression:"banTime"}})],1),0===e.type?t("div",{staticClass:"ban-reason"},[t("span",[e._v("封禁的理由：")]),t("el-autocomplete",{staticClass:"ban-reason__input",attrs:{name:"ban-reason","fetch-suggestions":e.queryReason,placeholder:"请输入封禁理由"},model:{value:e.banReason,callback:function(t){e.banReason=t},expression:"banReason"}})],1):e._e(),t("span",{staticClass:"dialog-footer"},[t("h-button",{attrs:{size:"small",plain:""},on:{click:function(t){e.display=!1}}},[e._v("取 消")]),t("h-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small"},on:{click:e.banUser}},[e._v("确 定")])],1)]):e._e():t("el-dialog",{attrs:{title:"封禁",visible:e.display},on:{"update:visible":function(t){e.display=t}}},[t("div",{staticClass:"ban-notice"},[e._v("请选择封禁的固定时间段或具体时间点，均选优先使用固定时间段")]),t("div",{staticClass:"ban-period"},[t("h-radio-group",{on:{change:function(t){e.banTime=null}},model:{value:e.banPeriodSelected,callback:function(t){e.banPeriodSelected=t},expression:"banPeriodSelected"}},[t("span",[e._v("固定时间段：")]),e._l(e.banPeriodList,(function(e){return t("h-radio",{key:e.period,attrs:{value:e.period,label:e.value}})})),t("h-button",{attrs:{size:"small",plain:""},on:{click:function(t){e.banPeriodSelected=-1}}},[e._v("重置")])],2)],1),t("div",{staticClass:"ban-time"},[t("span",[e._v("具体时间点：")]),t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},on:{change:function(t){e.banPeriodSelected=-1}},model:{value:e.banTime,callback:function(t){e.banTime=t},expression:"banTime"}})],1),0===e.type?t("div",{staticClass:"ban-reason"},[t("span",[e._v("封禁的理由：")]),t("el-autocomplete",{staticClass:"ban-reason__input",attrs:{name:"ban-reason","fetch-suggestions":e.queryReason,placeholder:"请输入封禁理由"},model:{value:e.banReason,callback:function(t){e.banReason=t},expression:"banReason"}})],1):e._e(),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("h-button",{attrs:{size:"small",plain:""},on:{click:function(t){e.display=!1}}},[e._v("取 消")]),t("h-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:e.banUser}},[e._v("确 定")])],1)])],1)},Mt=[],Nt=n("dbbe"),zt=n("7551"),Rt=n("50fc");const Bt=[{value:"1天",period:864e5},{value:"3天",period:2592e5},{value:"1周",period:6048e5},{value:"1月",period:2592e6},{value:"3月",period:7776e6},{value:"半年",period:15768e6},{value:"1年",period:31536e6},{value:"永久",period:0}],$t=[{value:"水贴/水评论/广告营销"},{value:"侮辱诽谤，恶意带节奏"},{value:"色情/低俗/性骚扰"},{value:"政治/宗教/反动/暴恐"}],Ut=[Rt["a"].ban,Rt["a"].setBanTime];ue["default"].use(C.a),ue["default"].use(S.a);var Ft={name:"ban",data(){return{display:!1,banPeriodList:Bt,banReasonList:$t,banPeriodSelected:-1,banTime:null,banReason:null,isMobile:!1,user:{},type:null}},components:{HButton:Nt["a"],HRadio:zt["a"],HRadioGroup:zt["b"]},methods:{async banUser(){var e,t,n;let a,s,i,o=(null===(e=this.user)||void 0===e?void 0:e.uid)||(null===(t=this.user)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.uid);if(-1!==this.banPeriodSelected)s=this.banPeriodSelected,i={uid:o,period:s};else{if(null===this.banTime)return void this.$message({type:"danger",message:"请选择封禁时间~"});a=this.banTime,i={uid:o,time:a}}0==this.type&&(i={...i,reason:this.banReason}),1==this.type&&(i={...i,id:this.user.id}),await xe["a"].post(`${Ut[this.type]}${o}`,i).then(e=>{switch(e.code){case 0:this.$message({type:"success",message:e.msg}),this.callback(),this.display=!1;break;default:this.$message({type:"danger",message:e.msg})}}).catch(e=>{this.$message({type:"danger",message:e})})},show(e,t,n,a){this.display=!0,this.user=e,this.type=t,this.isMobile=n,this.callback=a},queryReason(e,t){var n=this.banReasonList,a=e?n.filter(this.createFilter(e)):n;t(a)},createFilter(e){return t=>0===t.value.indexOf(e)}}},Vt=Ft,Gt=(n("018a"),Object(ge["a"])(Vt,Dt,Mt,!1,null,"29917e0f",null)),Wt=Gt.exports;ue["default"].use(j.a);const qt=new ue["default"]({render(e){return e(Wt)}});qt.$mount(),document.body.appendChild(qt.$el);const Kt=qt.$children[0],Xt=(e,t,n,a)=>{Kt.show(e,t,n,a)};var Yt=function(){var e=this,t=e._self._c;return e.display?t("div",{staticClass:"editor"},[t("div",{staticClass:"close"},[t("span",[e._v(e._s(e.title))]),t("i",{staticClass:"iconfont bg-close",on:{click:e.close}})]),t("post-editor",{ref:"editor",staticClass:"post-editor",attrs:{limitWords:1e4,loading:e.postLoading},on:{post:e.post},scopedSlots:e._u([e.user.uid&&1!==e.user.status?null:{key:"cover",fn:function(){return[e.user.uid?t("span",{staticClass:"tip-text"},[e._v(" 你已被封禁,封禁解除后才可发帖 ")]):t("span",{staticClass:"tip-text"},[t("router-link",{staticClass:"to-login",attrs:{to:"/login"}},[e._v("登录")]),e._v(" 后才可发帖 ")],1)]},proxy:!0}],null,!0)})],1):e._e()},Jt=[],Zt=n("29b0"),Qt=n("00b6"),en={name:"editor",data(){return{display:!1,postLoading:!1,title:""}},components:{PostEditor:Zt["default"]},computed:{...Object(Ce["d"])({user:e=>e.users.userInfo})},methods:{async post(e){if(!this.user.uid)return void this.$message({type:"warning",message:"请登录后重试"});if(!e.title.trim()||!e.content.trim())return void this.$message({type:"warning",message:"标题或内容不能为空"});this.postLoading=!0;const t={title:e.title,content:e.content};if(e.lockTime&&e.time&&(t.lockTime=e.lockTime,t.time=e.time),Object.keys(e.voteData).length>0){const n=await xe["a"].post(Qt["a"].create,e.voteData);if(0!==n.code)return this.$message({type:"warning",message:"创建投票失败 "+n.msg}),void(this.postLoading=!1);t.vote=n.id}const n=await xe["a"].post(_e["a"].hansering,t);0===n.code?window.location.reload():this.$message({type:"warning",message:n.msg}),this.postLoading=!1},show(e){this.display=!0,this.title=e},close(){this.display=!1}}},tn=en,nn=(n("64f0"),Object(ge["a"])(tn,Yt,Jt,!1,null,"caa7325c",null)),an=nn.exports,sn=n("4360");const on=new ue["default"]({store:sn["a"],render(e){return e(an)}});on.$mount(),document.body.appendChild(on.$el);const rn=on.$children[0],ln=e=>{rn.show(e)};var cn=function(){var e=this,t=e._self._c;return e.display?t("div",{staticClass:"editor"},[t("div",{staticClass:"close"},[t("span",[e._v(e._s(e.title))]),t("i",{staticClass:"iconfont bg-close",on:{click:e.close}})]),e.user.uid&&1!==e.user.status?t("div",[t("editor-provider",{attrs:{plugins:e.pluginConfig}},[t("post-editor",{ref:"editor",attrs:{limit:e.limitWords,toolbar:e.toolbarConfig},model:{value:e.postContent,callback:function(t){e.postContent=t},expression:"postContent"}})],1),t("div",{staticClass:"detail-editor__action"},[t("h-button",{attrs:{debonus:3e3,loading:e.loading},on:{click:e.reply}},[e._v("发表回复")])],1)],1):t("div",[e.user.uid?t("span",{staticClass:"tip-text"},[e._v(" 你已被封禁,封禁解除后才可发帖 ")]):t("span",{staticClass:"tip-text"},[t("router-link",{staticClass:"to-login",attrs:{to:"/login"}},[e._v("登录")]),e._v(" 后才可发帖 ")],1)])]):e._e()},dn=[],un=n("feeb"),pn=n("27e8"),hn=n("f1f3"),mn={name:"editor",data(){return{postContent:"",loading:!1,toolbarConfig:["bold","italic","image","link","emoticons","video"],pluginConfig:{[hn["a"].IMAGE]:null,[hn["a"].LINK]:null,[hn["a"].MENTION]:null,[hn["a"].HASH_TAG]:null,[hn["a"].CHARACTER_COUNT]:{limit:this.limitWords||500}},limitWords:500,display:!1,data:{}}},components:{EditorProvider:un["a"],PostEditor:pn["a"],HButton:Nt["a"]},computed:{...Object(Ce["d"])({user:e=>e.users.userInfo})},methods:{async reply(){if(!this.user.uid)return void this.$message({type:"warning",message:"请登录后重试"});if(!this.postContent.trim())return void this.$message({type:"warning",message:"标题或内容不能为空"});this.loading=!0;const e={postId:this.data.currentPostId,content:this.postContent,author:this.data.author.uid};await xe["a"].post(_e["a"].replyPost+this.data.currentPostId,e).then(e=>{0===e.code?window.location.reload():this.$message({type:"warning",message:e.msg}),this.loading=!1}),setTimeout(()=>{this.loading=!1},15e3)},show(e,t){this.display=!0,this.title=e,this.data=t},close(){this.display=!1}}},fn=mn,gn=(n("5e35"),Object(ge["a"])(fn,cn,dn,!1,null,"4a98aee9",null)),vn=gn.exports;const bn=new ue["default"]({store:sn["a"],render(e){return e(vn)}});bn.$mount(),document.body.appendChild(bn.$el);const kn=bn.$children[0],yn=(e,t)=>{kn.show(e,t)};var wn=function(){var e=this,t=e._self._c;return t("div",{ref:"notice-wrapper",staticClass:"notice-wrapper",on:{click:e.hide}},[t("div",{ref:"notice",staticClass:"notice",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"close"},[t("span",[e._v("消息")]),t("i",{staticClass:"iconfont bg-close",on:{click:e.hide}})]),t("div",{staticClass:"theme-select"},[t("span",[e._v("主题:")]),t("el-select",{staticStyle:{flex:"1","margin-left":"10px"},attrs:{size:"mini",placeholder:"主题"},on:{change:e.changeTheme},model:{value:e.theme,callback:function(t){e.theme=t},expression:"theme"}},e._l(e.themeList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"content"},[t("div",{staticClass:"sidebar"},[e._m(0),e._m(1),t("ul",{staticClass:"layout-message--menu"},e._l(e.noticeMenu,(function(n){return t("li",{key:n.hash,staticClass:"layout-message--menu--item"},[t("a",{staticClass:"link",attrs:{href:"/notice"+n.hash},on:{click:function(t){return e.clearNotice(n.key,"/notice"+n.hash)}}},[t("span",{staticClass:"notice-menu-item"},[e._v(e._s(n.text))]),e.notice[n.key]?t("div",{staticClass:"badge"},[e._v(e._s(e.noticeNum(e.notice[n.key])))]):e._e()])])})),0),t("div",{staticClass:"divider"}),e._m(2),e._m(3),e._m(4),t("div",{staticClass:"divider"}),t("a",{staticClass:"link",attrs:{href:"/my-follow"}},[t("i",{staticClass:"hanser icon-wodeguanzhu icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("我关注的")]),e.followUnread?t("div",{staticClass:"badge"},[e._v(e._s(e.noticeNum(e.followUnread)))]):e._e()]),e._m(5),t("a",{staticClass:"link",attrs:{href:e.myFavoriteLink}},[t("i",{staticClass:"hanser icon-shoucang icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("我收藏的")])]),t("div",{staticClass:"divider"}),e._m(6),e._m(7),t("div",{staticClass:"divider"}),e._m(8),e._m(9)])])])])},Cn=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"/home"}},[t("i",{staticClass:"hanser icon-gerenzhongxin icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("个人中心")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"layout-message--title"},[t("i",{staticClass:"hanser icon-xinxi1 icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("消息中心")])])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{to:"/reservation"}},[t("i",{staticClass:"iconfont Appointment"}),t("span",{staticClass:"layout-message--title__text"},[e._v("周边预约")])])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"/score"}},[t("i",{staticClass:"iconfont zhuanjifen icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("积分中心")])])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"/contribution-exchange"}},[t("i",{staticClass:"iconfont gongxian icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("贡献中心")])])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"/my-like"}},[t("i",{staticClass:"hanser icon-dianzan icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("我赞过的")])])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"/to-be-continued"}},[t("i",{staticClass:"hanser icon-remen1 icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("热门推荐")])])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"/"}},[t("i",{staticClass:"hanser icon-quanbutiezi icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("全部帖子")])])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"/to-be-continued"}},[t("i",{staticClass:"hanser icon-huati icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("全部话题")])])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"/to-be-continued"}},[t("i",{staticClass:"hanser icon-quanbuzhuanlan icon"}),t("span",{staticClass:"layout-message--title__text"},[e._v("全部专栏")])])}],xn={name:"notice",data(){return{display:!1,noticeMenu:[{text:"回复我的",hash:"#reply",key:"replies"},{text:"提到我的",hash:"#at",key:"at"},{text:"收到的赞",hash:"#like",key:"likes"},{text:"站务通知",hash:"#notice",key:"notice"},{text:"我的消息",hash:"#chat",key:"message"},{text:"系统设置",hash:"#setting",key:"setting"}],themeList:[{value:"light",label:"正常模式"},{value:"dark",label:"暗夜模式"},{value:"new-year-2022",label:"2022新年主题"},{value:"new-year-2023",label:"2023新年主题"},{value:"new-year-2024",label:"2024新年主题"}]}},computed:{notice:{get(){return sn["a"].state.notice.notice},set(e){sn["a"].commit("notice/setNotice",e)}},theme:{get(){return sn["a"].state.config.theme},set(e){sn["a"].commit("config/setTheme",e)}},followUnread:{get(){return sn["a"].state.notice.followUnread}},user:{get(){return sn["a"].state.users.userInfo}},myFavoriteLink(){return`/space/${this.user.uid}#favorite`}},methods:{show(e){const t=this.$refs["notice-wrapper"];t.style.background="var(--theme-modal-bg-color)",t.style["pointer-events"]="auto";const n=this.$refs.notice;n.style.transform="translateX(100%)",this.notice=e},hide(){const e=this.$refs.notice;e.style.transform="translateX(0)";const t=this.$refs["notice-wrapper"];t.style.background="transparent",t.style["pointer-events"]="none"},noticeNum(e){return e<99?e:"99+"},clearNotice(e){const{notice:t}=this;t[e]=0,this.notice=t},changeTheme(e){const t=new CustomEvent("change-theme",{detail:{theme:e}});window.dispatchEvent(t)}},mounted(){const e=this.$refs.notice,t=e.getElementsByTagName("a");[...t].forEach(e=>{e.onclick=()=>{this.hide()}})}},_n=xn,An=(n("af39"),Object(ge["a"])(_n,wn,Cn,!1,null,"aa9861a2",null)),Tn=An.exports;ue["default"].use(Y.a),ue["default"].use(K.a);const Ln={install(e){const t=e.extend(Tn),n=new t;n.$mount(),document.body.append(n.$el),e.prototype.$showNotice=e=>{n.show(e)},e.prototype.$hideNotice=()=>{n.hide()}}};var In=function(){var e=this,t=e._self._c;return e.display?t("div",{staticClass:"process"},[t("div",{staticClass:"title"},[e._v(e._s(e.title)+"("+e._s(e.value)+"/"+e._s(e.max)+")")])]):e._e()},Pn=[],Sn={name:"process",data(){return{title:"",value:0,max:0,display:!1}},methods:{show(e){this.display=!0,this.title=e.title,this.value=e.value,this.max=e.max,this.value===this.max&&this.hide()},hide(){this.display=!1,this.title="",this.value=0,this.max=0}}},Hn=Sn,On=(n("b489"),Object(ge["a"])(Hn,In,Pn,!1,null,"e9e10800",null)),En=On.exports;const jn={install(e){const t=e.extend(En),n=new t;n.$mount(),document.body.append(n.$el),e.prototype.$showProcess=e=>{n.show(e)},e.prototype.$hideProcess=()=>{n.hide()}}};var Dn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-download"},[t("el-dialog",{attrs:{title:"APP下载","close-on-click-modal":!1,visible:e.display},on:{"update:visible":function(t){e.display=t}}},[t("div",{staticClass:"download-wrapper"},[t("a",{staticClass:"android",attrs:{href:e.apkLink,target:"_blank"}},[t("img",{staticClass:"android-image",attrs:{src:n("e00f"),width:"36"}}),e._v(" 安卓下载 ")]),t("a",{staticClass:"ios",attrs:{href:e.iosLink,target:"_blank"}},[t("div",{staticClass:"ios-image"}),e._v(" IOS下载 ")])])])],1)},Mn=[],Nn={name:"app-download",data(){return{display:!1,apkLink:"",iosLink:""}},methods:{show(){this.display=!0}},mounted(){xe["a"].get(_e["a"].appVersion).then(e=>{0===e.code&&(this.apkLink=e.android,this.iosLink=e.ios)})}},zn=Nn,Rn=(n("1a53"),Object(ge["a"])(zn,Dn,Mn,!1,null,"1361c8e8",null)),Bn=Rn.exports;ue["default"].use(j.a);const $n=new ue["default"]({render(e){return e(Bn)}});$n.$mount(),document.body.appendChild($n.$el);const Un=$n.$children[0],Fn=()=>{Un.show()};var Vn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"edit"},[t("el-dialog",{attrs:{title:"编辑帖子",top:"5vh","close-on-click-modal":!1,visible:e.display},on:{"update:visible":function(t){e.display=t}}},[t("div",{staticClass:"edit-wrapper"},[t("div",{staticClass:"post-header"},[t("h-input",{staticClass:"post-title-input",attrs:{maxlength:30,placeholder:"这里输入标题~"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),t("easy-editor",{ref:"edit-editor",attrs:{limit:1e4}}),t("div",{staticClass:"post-footer"},[t("h-button",{attrs:{loading:e.submitting},on:{click:e.submitEdit}},[e._v(" 发布更新 ")])],1)],1)])],1)},Gn=[],Wn=n("6275"),qn=n("8e01"),Kn={name:"edit",data(){return{display:!1,postId:0,title:"",content:"",submitting:!1}},components:{HInput:Wn["a"],HButton:Nt["a"],EasyEditor:qn["a"]},methods:{show(e,t,n){this.display=!0,this.title=e,this.content=t,this.postId=n,this.$nextTick(()=>{this.$refs["edit-editor"].edit(this.content)})},submitEdit(){xe["a"].post(`${_e["a"].editPost}${this.postId}`,{title:this.title,content:this.$refs["edit-editor"].getContent()}).then(e=>{0===e.code?(this.$message({type:"success",message:e.msg}),setTimeout(()=>{window.location.reload()},1e3)):this.$message({type:"warning",message:e.msg})})}}},Xn=Kn,Yn=(n("27f4"),Object(ge["a"])(Xn,Vn,Gn,!1,null,"013317ed",null)),Jn=Yn.exports;ue["default"].use(j.a);const Zn=new ue["default"]({store:sn["a"],render(e){return e(Jn)}});Zn.$mount(),document.body.appendChild(Zn.$el);const Qn=Zn.$children[0],ea=(e,t,n)=>{Qn.show(e,t,n)};var ta=function(){var e=this,t=e._self._c;return e.visible?t("div",{staticClass:"search"},[t("div",{staticClass:"search-wrapper"},[t("div",{staticClass:"close"},[t("span",[e._v("全站搜索")]),t("i",{staticClass:"iconfont bg-close",on:{click:e.hide}})]),t("div",{staticClass:"keyword-wrapper"},[t("h-input",{staticClass:"search-input",attrs:{placeholder:"搜索用户名,用户UID,帖子标题"},on:{"enter-press":e.search},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),t("h-button",{attrs:{size:"mini"},on:{click:e.search}},[t("i",{staticClass:"hanser icon-sousuo1"})])],1),t("div",{staticClass:"result-wrapper"},[t("div",{staticClass:"label",on:{click:e.toggleUser}},[e.userExpand?t("i",{staticClass:"el-icon-caret-bottom"}):e._e(),e.userExpand?e._e():t("i",{staticClass:"el-icon-caret-right"}),e._v("用户 ")]),e.users.length?t("div",{staticClass:"search-user"},[e.userExpand?t("ul",{staticClass:"users"},e._l(e.users,(function(n){return t("li",{key:n.uid,staticClass:"user-wrapper"},[t("post-user",{attrs:{avatar:n.avatar,size:50,nickname:n.nickname,uid:n.uid,auth:n.auth,colors:e.level(n.exp).color,level:e.level(n.exp),authentication:n.authentication}})],1)})),0):e._e()]):e._e(),t("div",{staticClass:"label",on:{click:e.togglePost}},[e.postExpand?t("i",{staticClass:"el-icon-caret-bottom"}):e._e(),e.postExpand?e._e():t("i",{staticClass:"el-icon-caret-right"}),e._v("帖子 ")]),e.posts.length?t("div",{staticClass:"search-post"},[e.postExpand?t("ul",{staticClass:"posts"},e._l(e.posts,(function(n){return t("li",{key:n.id,staticClass:"post"},[t("a",{staticClass:"post-title",attrs:{href:"/postDetails/"+n.id,target:"_blank"}},[e._v(e._s(n.title))]),t("div",{staticClass:"info"},[t("post-user",{attrs:{avatar:n.author.avatar,size:50,nickname:n.author.nickname,uid:n.author.uid,auth:n.author.auth,colors:e.level(n.author.exp).color,level:e.level(n.author.exp),authentication:n.author.authentication}},[t("template",{slot:"bottom"},[t("div",{staticClass:"time"},[e._v(e._s(e.formatPostTime(n.postTime)))])])],2)],1)])})),0):e._e(),e.postExpand?t("load-more",{attrs:{name:"search-post",haveMore:e.postsLoadDone},on:{"load-more":e.loadPosts}}):e._e()],1):e._e()])])]):e._e()},na=[],aa=(n("14d9"),n("9579")),sa=n("e100"),ia=n("4445"),oa={name:"search",data(){return{keyword:"",visible:!1,users:[],posts:[],userExpand:!0,postExpand:!0,postsLoadDone:!0,lastPostId:0}},components:{HButton:Nt["a"],HInput:Wn["a"],LoadMore:ia["a"],PostUser:aa["a"]},computed:{levels(){return sn["a"].state.level.levels}},methods:{formatPostTime:sa["a"],level(e){let t=this.levels[0];return this.levels.forEach(n=>{n.exp<=e&&n.level>t.level&&(t=n)}),t},show(e){this.keyword=e.keyword,this.userExpand=!0,this.postExpand=!0,this.visible=!0,this.keyword&&this.search()},hide(){this.keyword="",this.lastPostId=0,this.postsLoadDone=!0,this.users=[],this.posts=[],this.visible=!1},search(){this.keyword&&(this.users=[],this.posts=[],this.lastPostId=0,this.postsLoadDone=!1,xe["a"].get(_e["a"].searchUser,{params:{keyword:this.keyword}}).then(e=>{this.users=e.list}),xe["a"].get(_e["a"].postSearch,{params:{keyword:this.keyword,id:this.lastPostId}}).then(e=>{this.posts.push(...e.list),this.postsLoadDone=e.finish,this.lastPostId=e.searchId}))},toggleUser(){this.userExpand=!this.userExpand},togglePost(){this.postExpand=!this.postExpand},loadPosts(){xe["a"].get(_e["a"].postSearch,{params:{keyword:this.keyword,id:this.lastPostId}}).then(e=>{this.posts.push(...e.list),this.postsLoadDone=!e.finish,this.lastPostId=e.searchId,e.finish||e.list.length||this.loadPosts()})}}},ra=oa,la=(n("84ef"),Object(ge["a"])(ra,ta,na,!1,null,"3c6669bc",null)),ca=la.exports;const da=new ue["default"]({store:sn["a"],render(e){return e(ca)}});da.$mount(),document.body.appendChild(da.$el);const ua=da.$children[0],pa=e=>{ua.show(e)};var ha=function(){var e=this,t=e._self._c;return e.visible?t("div",{staticClass:"editor"},[t("div",{staticClass:"editor-wrapper"},[t("div",{staticClass:"close"},[t("span",[e._v(e._s(e.title))]),t("i",{staticClass:"iconfont bg-close",on:{click:e.close}})]),t("easy-editor",{ref:"editor",staticClass:"post-editor",attrs:{limitWords:1e4},on:{post:e.post}}),t("div",{staticClass:"footer"},[t("h-button",{on:{click:e.post}},[e._v("发布")])],1)],1)]):e._e()},ma=[],fa={name:"editor",data(){return{visible:!0}},props:{title:{type:String,default:""},resolve:{type:Function,default:()=>{}},reject:{type:Function,default:()=>{}}},components:{HButton:Nt["a"],EasyEditor:qn["a"]},computed:{...Object(Ce["d"])({user:e=>e.users.userInfo})},methods:{post(){const e=this.$refs["editor"].getContent();this.user.uid?e.trim()?(this.visible=!1,this.resolve(e)):this.$message({type:"warning",message:"标题或内容不能为空"}):this.$message({type:"warning",message:"请登录后重试"})},close(){this.visible=!1,this.resolve(!1)}}},ga=fa,va=(n("862e"),Object(ge["a"])(ga,ha,ma,!1,null,"f258e446",null)),ba=va.exports;const ka=ue["default"].extend(ba),ya=e=>new Promise((t,n)=>{const a=new ka({store:sn["a"],propsData:{title:e,resolve:t,reject:n}});document.body.appendChild(a.$mount().$el)});var wa=function(){var e=this,t=e._self._c;return e.visible?t("div",{staticClass:"report"},[t("div",{staticClass:"report-wrapper"},[t("div",{staticClass:"close"},[t("span",[e._v("举报")]),t("i",{staticClass:"iconfont bg-close",on:{click:e.close}})]),t("div",{staticClass:"content"},[t("span",[e._v("举报理由：")]),t("h-radio-group",{model:{value:e.reportId,callback:function(t){e.reportId=t},expression:"reportId"}},e._l(e.reportList,(function(e){return t("h-radio",{key:e.id,attrs:{value:e.id,label:e.text}})})),1),4===e.reportId?t("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请输入内容"},model:{value:e.reportText,callback:function(t){e.reportText=t},expression:"reportText"}}):e._e()],1),t("div",{staticClass:"footer"},[t("h-button",{on:{click:e.report}},[e._v("提交")])],1)])]):e._e()},Ca=[],xa={name:"editor",data(){return{visible:!0,reportList:[{id:1,text:"水贴/水评论/广告营销"},{id:2,text:"侮辱诽谤，恶意带节奏"},{id:3,text:"色情/低俗/性骚扰"},{id:4,text:"其他(手动输入)"}],reportId:"",reportText:""}},props:{resolve:{type:Function,default:()=>{}},reject:{type:Function,default:()=>{}}},components:{HButton:Nt["a"],HRadio:zt["a"],HRadioGroup:zt["b"]},computed:{...Object(Ce["d"])({user:e=>e.users.userInfo})},methods:{report(){if(this.user.uid)if(this.reportId)if(4!==this.reportId){this.visible=!1;const e=this.reportList.find(e=>e.id===this.reportId);this.resolve(e.text)}else{if(!this.reportText)return void this.$message({type:"warning",message:"请输入举报理由"});this.visible=!1,this.resolve(this.reportText)}else this.$message({type:"warning",message:"请选择举报理由"});else this.$message({type:"warning",message:"请登录后重试"})},close(){this.visible=!1,this.resolve(!1)}}},_a=xa,Aa=(n("5dc4"),Object(ge["a"])(_a,wa,Ca,!1,null,"1685bc47",null)),Ta=Aa.exports;const La=ue["default"].extend(Ta),Ia=()=>new Promise((e,t)=>{const n=new La({store:sn["a"],propsData:{resolve:e,reject:t}});document.body.appendChild(n.$mount().$el)});var Pa=n("bc3a"),Sa=n.n(Pa);let Ha=!1;Sa.a.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),Sa.a.interceptors.response.use((function(e){if(0!=e.data.code){var t;if(Ha)return Promise.reject("");window.$vm.$message({type:"warning",message:(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.msg)||""})}return e}),(function(e){if(e.response){if(Ha)return Promise.reject(e);Ha=!0,window.localStorage.removeItem("token"),setTimeout(()=>{window.location.href=window.location.origin+"/login",Ha=!1},1e3)}return Promise.reject(e)}));var Oa=Sa.a,Ea=n("5a0c");ue["default"].config.productionTip=!1,ue["default"].prototype.$axios=Oa,ue["default"].prototype.$alert=de.a.alert,ue["default"].prototype.$confirm=de.a.confirm,ue["default"].prototype.$msgbox=de.a,ue["default"].prototype.$prompt=de.a.prompt,ue["default"].prototype.$showBanDialog=Xt,ue["default"].prototype.$showEditDialog=ea,ue["default"].prototype.$showSearchDialog=pa,ue["default"].prototype.$showContentEditor=ya,ue["default"].prototype.$showReportDialog=Ia,ue["default"].prototype.$showEditor=ln,ue["default"].prototype.$showPostEditor=yn,ue["default"].prototype.$showAppDownloadDialog=Fn,ue["default"].use(jt["a"]),ue["default"].use(Ln),ue["default"].use(jn),ue["default"].use(le.a),ue["default"].use(oe.a),ue["default"].use(se.a),ue["default"].use(ne.a),ue["default"].use(ee.a),ue["default"].use(Z.a),ue["default"].use(Y.a),ue["default"].use(K.a),ue["default"].use(W.a),ue["default"].use(V.a),ue["default"].use(U.a),ue["default"].use(B.a),ue["default"].use(z.a),ue["default"].use(M.a),ue["default"].use(j.a),ue["default"].use(O.a),ue["default"].use(S.a),ue["default"].use(I.a),ue["default"].use(T.a),ue["default"].use(_.a),ue["default"].use(C.a),ue["default"].use(y.a),ue["default"].use(b.a),ue["default"].use(g.a),ue["default"].use(m.a),ue["default"].use(p.a),ue["default"].use(d.a),ue["default"].use(l.a),ue["default"].use(o.a),ue["default"].use(s.a),ue["default"].use(Ee.a),ue["default"].use(De.a),ue["default"].use(Et.a),ue["default"].component("icon",Ht),n("a471"),Ea["locale"]("zh-cn");const ja={menus:[ct],renderElems:[qe.renderElems,at.renderElems,wt.renderElems],parseElemsHtml:[qe.parseHtmlConfig,at.parseHtmlConfig,wt.parseHtmlConfig],elemsToHtml:[qe.elemToHtmlConfig,at.elemToHtmlConfig,wt.elemToHtmlConfig],editorPlugin:At};Me["Boot"].registerModule(ja),He.beforeEach(async(e,t,n)=>{const a=!("level"in sn["a"].state.level.levelInfo&&sn["a"].state.level.levels.length);let s=!sn["a"].state.users.userInfo.uid;if(e.meta.level&&a){const e=await xe["a"].get(_e["a"].getLevelList);0===e.code&&await sn["a"].commit("level/setLevels",e.list)}if(s){const[e]=await Promise.all([xe["a"].get(_e["a"].userInfo),sn["a"].dispatch("score/updateScore"),sn["a"].dispatch("guess/updateGuessCoin")]);0===e.code&&await sn["a"].commit("users/changeUserInfo",e.info)}if(s=!sn["a"].state.users.userInfo.uid,e.meta.userInfo||e.meta.login){if(e.meta.login&&s)return n({path:"/"}),void window.$vm.$message({type:"warning",message:"请先登录"});if(a){const e=await xe["a"].get(_e["a"].levelInfo);0===e.code&&await Promise.all([sn["a"].commit("level/setLevelInfo",e.levelInfo),sn["a"].commit("level/setNextLevelInfo",e.nextLevel)])}e.meta.admin&&(sn["a"].getters["users/isAdmin"]||n("/"));const t=[],i=!!sn["a"].state.users.userInfo.uid;t.includes(e.name)&&i?n("/"):n()}else n()}),He.afterEach(e=>{const t=document.getElementById("upload-img");if(!t){const e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=!0,e.id="upload-img",e.style.display="none",document.body.appendChild(e)}if(["/my-follow","/my-like"].includes(e.path)){const e=document.getElementsByClassName("layout-body")[0];e&&(e.scrollTop=0)}else document.body.scrollTop=0,document.documentElement.scrollTop=0}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js"),window.$vm=new ue["default"]({router:He,store:sn["a"],render:e=>e(be)}).$mount("#app")},"5ab7":function(e,t,n){"use strict";n("4aed")},"5c28":function(e,t,n){},"5dc4":function(e,t,n){"use strict";n("2447")},"5df9":function(e,t,n){},"5e35":function(e,t,n){"use strict";n("0850")},"5e6b":function(e,t,n){},6125:function(e,t,n){"use strict";n("88b8")},"64f0":function(e,t,n){"use strict";n("5655")},"658d":function(e,t,n){},"6a93":function(e,t,n){"use strict";n("aece")},"6b0f":function(e,t,n){"use strict";n("4053")},"6c4f":function(e,t,n){},"6cb9":function(e,t,n){},"72e2":function(e,t,n){"use strict";n("528e")},"77d5":function(e,t,n){"use strict";n("9002")},7857:function(e,t,n){"use strict";n("5692c")},"7ab6":function(e,t,n){"use strict";n("ce29")},"7e17":function(e){e.exports=JSON.parse('[{"root":"2024","emotions":["啊？.png","地铁老人手机.png","打劫.png","加冕为王.png","快拿开.png","看我脸色行事.png","你醒啦.png","小天使的赞扬.png"]},{"root":"birthday","emotions":["生日快乐！.png","生日快乐？.png"]},{"root":"8","emotions":["吃瓜.png","打不着.png","交出手脚.png","嗯？.png","傻dog.png","天才.png"]},{"root":"1","emotions":["lz怎么可能没有女粉.png","awsl.png","不行吗.png","恭喜.png","冲冲冲！.png","暗中观察.png","哈.png","peach.png","飞扑.png","不想努力.png","昂波力无.png","ok.png","冲呀.png","不愧是你.png","抱奶瓶.png","海星.png"]},{"root":"2","emotions":["面具.png","加倍.png","恐怖.png","嘿嘿.png","毛怪哭哭.png","哭哭.png","惊.png","滑稽.png","美女.png","流啤.png","害羞.png","喵.png","憨憨飘过.png","好听.png","篮球.png","惊吓.png"]},{"root":"3","emotions":["热.png","拿扫把气呼呼.png","亲亲.png","扑通.png","你假装持久.png","怂呐.png","南瓜头毛怪.png","嗯.png","叹气.png","破肺.png","摸摸.png","爬.png","天使.png","你tmghs.png","挠头.png","抢地主.png"]},{"root":"4","emotions":["谢谢.png","抓狂.png","王炸.png","晚安.png","学习.png","嘤嘤嘤.png","晕晕.png","肖邦.png","贴贴.png","知识增加.png","疑问.png","痛哭.png","真好.png","我是天才.png","委屈.png","早.png"]},{"root":"5","emotions":["惊.png","听不见.png","听我说.png","哟.png","咻咻.png","吓.png","抱抱.png","喝茶.png","无语.png","晚安.png","噗.png","吊着.png","自闭.png","出拳.png","哭哭.png","好朋友.png"]},{"root":"6","emotions":["溜了.png","放空.png","岁岁芭比油.png","躺平.png","吃毛怪.png","给心心.png","哈哈哈.png","唱歌.png","期待.png","吃我一拳.png","喝奶.png","闪亮登场.png","吃我三拳.png","脱单憨憨.png"]},{"root":"7","emotions":["就是你.png","遇到困难睡大觉.png","恭喜.png","交出来.png","疑问.png","Zzz.png","光速下班.png","打call.png","趴.png","登场.png","饿.png","点赞.png","心动.png","抱大腿.png","打咩.png","暗中观察.png","哭哭.png","不要睡.png","石化.png","伸懒腰.png","天才.png","开心.png","鬼脸.png","恰柠檬.png"]},{"root":"0","emotions":["干杯.png","鞭炮上.png","鞭炮下.png","变兔子.png","不想起床.png","吃饺子.png","打卡.png","发红包.png","放烟花.png","恭喜.png","毛怪灯笼.png","毛怪哭哭.png","失落.png","玩雪.png","新年快乐.png","许愿.png","棒.png","饱了.png"]}]')},8260:function(e,t,n){"use strict";n("448a")},"84ef":function(e,t,n){"use strict";n("ed1a")},"862e":function(e,t,n){"use strict";n("d63f")},8819:function(e,t,n){},"88b8":function(e,t,n){},"896a":function(e,t,n){"use strict";n("5df9")},"8af0":function(e,t,n){"use strict";n("4026")},"8e01":function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("editor-provider",{attrs:{type:e.type,plugins:e.pluginConfig}},[t("post-editor",{ref:"editor",attrs:{toolbar:e.toolbarConfig,limit:e.limitWords},model:{value:e.postContent,callback:function(t){e.postContent=t},expression:"postContent"}})],1)},s=[],i=n("feeb"),o=n("27e8"),r=n("f1f3"),l={name:"easy-editor",components:{PostEditor:o["a"],EditorProvider:i["a"]},props:{type:{type:String,default:"post"},toolbarConfig:{type:Array,default:()=>["bold","italic","image","link","emoticons","video"]},pluginConfig:{type:Object,default:()=>({[r["a"].IMAGE]:null,[r["a"].LINK]:null,[r["a"].MENTION]:null,[r["a"].HASH_TAG]:null,[r["a"].CHARACTER_COUNT]:{limit:1e4}})},limitWords:{type:Number,default:1e4}},data(){return{postContent:""}},methods:{getContent(){return this.postContent},clear(){this.postContent="",this.$refs["editor"].clearContent()},edit(e){this.postContent=e,this.$refs["editor"].setContent(e)},validateContent(){return new Promise((e,t)=>{const n=/data:image\/.*;base64,/;n.test(this.postContent)&&(this.$message({type:"danger",message:"有图片未通过编辑器上传，请勿直接拖拽或粘贴图片到编辑器"}),t("有图片未通过编辑器上传，请勿直接拖拽或粘贴图片到编辑器")),e()})}}},c=l,d=n("2877"),u=Object(d["a"])(c,a,s,!1,null,null,null);t["a"]=u.exports},"8fba":function(e,t,n){"use strict";n("b79e")},9002:function(e,t,n){},9031:function(e,t,n){"use strict";n("126f")},"919f":function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-popover",{attrs:{placement:"bottom",width:"250",trigger:"hover"},on:{show:e.showHandle}},[t("div",{staticClass:"detail-avatar"},[t("div",{staticClass:"detail-avatar--report"},[t("span",[e._v("举报")])]),t("div",{staticClass:"detail-avatar--header"},[t("div",{staticClass:"detail-avatar--header__avatar"},[t("link-avatar",{attrs:{avatar:e.avatar,size:50,auth:e.auth,uid:e.uid,iconSize:e.iconSize,authentication:e.authentication,nickname:e.nickname}})],1),t("div",{staticClass:"detail-avatar--right"},[t("div",{staticClass:"detail-avatar--right__nickname"},[t("level-nickname",{attrs:{nickname:e.nickname,uid:e.uid,colors:e.level.color}})],1),t("div",{staticClass:"detail-avatar--right__label"},[e.showLabel?t("post-label",{attrs:{level:e.level}}):e._e()],1)])]),e.state.popoverLoading?t("div",{staticClass:"detail-avatar__user-data--loading"},[t("span",[e._v("加载中~~~")])]):t("div",{staticClass:"detail-avatar__user-data"},e._l(e.data,(function(n){return t("router-link",{key:n.text,staticClass:"detail-avatar__user-data--item",attrs:{to:"/space/"+e.uid+n.hash,target:"_blank"}},[t("div",{staticClass:"detail-avatar__user-data--item__label"},[e._v(e._s(n.text))]),t("div",{staticClass:"detail-avatar__user-data--item__data"},[e._v(e._s(e.userData[n.key]))])])})),1),e.state.isSelf||e.state.popoverLoading?e._e():t("div",{staticClass:"line"}),e.state.isSelf||e.state.popoverLoading?e._e():t("div",{staticClass:"detail-avatar--action"},[t("h-button",{attrs:{plain:e.followBtnPlain},on:{click:e.followAuthor},nativeOn:{mousemove:function(t){return e.hoverOnFollow.apply(null,arguments)},mouseleave:function(t){return e.outHoverOnFollow.apply(null,arguments)}}},[e._v(e._s(e.hoverOnFollowText))]),t("h-button",{on:{click:e.toChat}},[e._v("私信")])],1)]),e.uid?t("div",{staticClass:"avatar-info",attrs:{slot:"reference"},slot:"reference"},[e._t("avatar-slot")],2):e._e()])},s=[],i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"post-label"},[t("level-label",{attrs:{level:e.level}})],1)},o=[],r=n("99ca"),l={name:"post-label",props:["level"],components:{levelLabel:r["a"]},data(){return{}},methods:{}},c=l,d=(n("050e"),n("2877")),u=Object(d["a"])(c,i,o,!1,null,"b36ee734",null),p=u.exports,h=n("dbbe"),m=n("e51f"),f=n("c362"),g={name:"detail-avatar",props:["avatar","level","uid","exp","nickname","focusHe","auth","iconSize","authentication"],inject:["postData"],components:{PostLabel:p,HButton:h["a"],LevelNickname:m["a"],LinkAvatar:f["a"]},data(){return{showLabel:!1,hover:{follow:!1},isFollowing:this.focusHe,userData:this.postData.popoverUserData,state:this.postData.popoverState,defaultAvatar:this.postData.defaultAvatar,data:[{text:"动态",key:"posts",hash:"#posts"},{text:"关注",key:"follow",hash:"#follow"},{text:"粉丝",key:"fans",hash:"#fans"}]}},mounted(){this.showLabel=!0},watch:{postData:{deep:!0,handler(){var e,t,n,a;(this.userData=this.postData.popoverUserData,this.state=this.postData.popoverState,this.defaultAvatar=this.postData.defaultAvatar,this.uid===(null===(e=this.postData)||void 0===e||null===(t=e.detailData)||void 0===t||null===(n=t.author)||void 0===n?void 0:n.uid))&&(this.isFollowing=null===(a=this.postData)||void 0===a?void 0:a.isFollowing)}}},computed:{userLink(){return"/space/"+this.uid},showAvatar(){return this.avatar?this.avatar:this.defaultAvatar},hoverOnFollowText(){return this.isFollowing?this.hover.follow?"取消关注":"已关注":"+关注"},followBtnPlain(){return this.isFollowing}},methods:{showHandle(){this.$emit("getUserInfo",this.uid)},followAuthor(){this.$emit("followUser",this.uid,e=>{this.isFollowing=e})},toChat(){const e=new CustomEvent("open-chat",{detail:{uid:this.uid}});window.dispatchEvent(e)},hoverOnFollow(){this.hover.follow=!0},outHoverOnFollow(){this.hover.follow=!1}}},v=g,b=(n("896a"),Object(d["a"])(v,a,s,!1,null,"8971160c",null));t["a"]=b.exports},"93da":function(e,t,n){},9579:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"post-user"},["post-details"===e.type?t("detail-avatar",{attrs:{avatar:e.avatar,level:e.level,uid:e.uid,nickname:e.nickname,exp:e.exp,focusHe:e.focusHe,auth:e.auth,authentication:e.authentication},on:{getUserInfo:e.getUserInfo,followUser:e.followUser}},[t("template",{slot:"avatar-slot"},[t("link-avatar",{attrs:{avatar:e.avatar,size:e.size,auth:e.auth,authentication:e.authentication,nickname:e.nickname,uid:e.uid}})],1)],2):t("link-avatar",{attrs:{avatar:e.avatar,size:e.size,auth:e.auth,authentication:e.authentication,nickname:e.nickname,uid:e.uid}}),t("div",{staticClass:"stack"},[t("div",{staticClass:"top"},[t("level-nickname",{attrs:{nickname:e.nickname,uid:e.uid,colors:e.colors}}),e._t("post-master"),e._t("label"),t("level-label",{attrs:{level:e.level}})],2),t("div",{staticClass:"bottom"},[e._t("bottom")],2)])],1)},s=[],i=n("c362"),o=n("e51f"),r=n("99ca"),l=n("919f"),c={name:"post-user",props:["type","avatar","size","auth","authentication","nickname","uid","colors","level","exp","focusHe"],components:{LinkAvatar:i["a"],LevelNickname:o["a"],LevelLabel:r["a"],DetailAvatar:l["a"]},methods:{getUserInfo(){this.$emit("getUserInfo",this.uid)},followUser(e,t){this.$emit("followUser",e,t)}}},d=c,u=(n("39a0"),n("2877")),p=Object(u["a"])(d,a,s,!1,null,"1fb39c77",null);t["a"]=p.exports},"99ca":function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"level-label"},[t("img",{attrs:{width:"20",height:"20",src:e.label,alt:e.level}}),t("span",{staticClass:"label-name"},[e._v(e._s(e.level.name))])])},s=[],i={name:"level-label",props:["level"],computed:{label(){return`https://cdn.ihan.club/${this.level.level}.png`}}},o=i,r=(n("6b0f"),n("2877")),l=Object(r["a"])(o,a,s,!1,null,"2c89625c",null);t["a"]=l.exports},"9ec6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAvFQTFRFAAAA//////////////////////////////////////////////////////////////////////////////////Lx/+He/9PO/8rF/8W//8bA/8nE/9LO//Hw/////////+/t/5qQ/3dp/19P/1JB/1NC/1RD/1VD/15O/3Vo/5iO/8S+/+3s//////////z8/8jD/4h8/1tK/1ZE/1NB/1FA/1lJ/4R4//z7//////////7+/7my/2tc/4B0/7ew/9DL/9HM/7qz/4yA/1ZG/2la/7Wt/8zH/25g/1RC/2JT/8/L/+bk/4Z6/2pc/8fC//////X1/5CF/+jm/5aM/4uA/////9vX/2ZX/1dF/1JA/7mz/3Rm/1dE/9XR/2RV//b1/8C6/3Jl/+zq/723/42C/8bB/2xd//X0/2NT/7Gp/////7y2/6ad/7+5/3ls/7Os/////83I/6if/1lI/5OI/3Fj//f2/2NU/1RE/+Dd/3Zo/2hZ//r5/4yB/39z/6Sb/8jC/3Bi//39/6mh/7Wu/3Jk/6KY/////+bj/1VE/4+E/9/c/////////46D//Py/9nW/3tu/4V5/97b/1tL/9bS/5SJ/8G7/4p//1pK/8S///v7/2dY/1ZF/+nn/////25f/21f/9HN/4F0/7Gq/////4N3/+vp//r6/+Ti/3xv/////11N/+3r/////66n/8vG/56V//Dv/87J/6ig/////5WK/9TQ//Tz/2FS/3lr/3Rn/2FR//79/9fU//Hv//n4/7St/+/u/2VW//j4/62l/9zY/1xM/3Nl/31x/97a/2xe/35x/+Lf/5eN/5KH/52T/1dH/1hH/4p+/6yk/+Th/6Wc/+Xj/8O9/+7s/7Kq/3dq/2pb/+Lg/29h/6CX/6KZ/4d7/4J2/+Pg/9PP/6ae/////9nV/6uj/7Co/5uR/722/7u1/5mP/8K8/7Or/5+W/5uS/+ro/9fT/5WL/////6+n/5OJ/6qi/9rXPhynhgAAAPt0Uk5TACVWh67K4vX+/PQBP4/T/xV21hLw////////////a+z/////////////////J8T/////////////X/r///////////////////////////+r//////+0//////////////////////////9g///////5/////////////////////////////+3/////FO///////////////////////5D//////9T//////yb//1f///////+t////////////////////////////////////////////////////////////////E///////////////////jv/////egCVDAAAGeUlEQVR4nKVXaVxUVRQfHVlM8IgIAgKmvJmHC4u8eROKG5rKiLlRBubglppYWWgKiFlBitiipVYuqIgiCkGapilqblgW4hpRaWWmmbZYafWpc+99982b5am/n+fDzL3nnP9595577jnnGgw61Ky5sYWXt49vywe8vVoYmzfT0/NIrfz8W7cEJ2rZ2t+v1T3C2wS0BY/UNqDNPcADje04ICi4fUhoWIfw4AjOaWcMvBs+siNTfTCsU+cowWQWRbNJiO7StVt3xu8YeUd4TCzViovvkSBKZosgUxIsZkm0PhSaSIWxMfr4nr2IRlLvPqJkodC+/fonDxj4MLUiiYMGUxO9eurh/QF8AYakSDb25aGpbNnDHmFzmzR8BFXx94wfSZRHjRZFpi5Hp6n+f1RhmcXHgsh8pCf8GCJ5PD1jrKIsPwFJDJ4ESeM40z40k7DG6Hy/myAKXHX8BGRM7Dtp9GS0EM+5gll40uMa/Am3n82k4uUpyJhKBtPQ0lPTVQsWMYvouvhhBuE9LVpkBz2DnIF09CyOZjoEgvQc0Z6hxcc8j5xsixYvz0JWD08GcBuh5DS18RCLhzNstk3QGngBlcLIYM5cPJwcrciUm4eAWAc+kixpnuSEl/PnIzP1xQUvBaETX3YSCeIrBShUozqQxH9hhuxCr/IoSIKChS6yjEXIL+I3y4iTxWaLq4HiVDWQlrjKBPk1ZBsZ/vU3cPym5KqDWoVLKXzZW+4y6W1yu1l+CMDhckFwV5LlFe1RNsWTZKxpJYoCCL4VyT/veFgAoXcBEvM9SqT3SI4iWc6PpI9Vbh5gtBpgzVqPEqFkHQL90MB6/O/ttgBrSsqGDaVrN6KBsvQ+w4cPKnZbwiYErkcDm/G/XHSRdtkCcXFxiYnkPq6pQFqzdZKLirgNZZsNhkrM3xFVrjuId0vJLCq1e7C+j9m+0lCNsnCb6/pqHEHEKctVR/wAudU0ija5uaB4e7fQ0LCw1Tsww344NT4+pMPO2W5OKKSxtAt/P9I5RFnuj6mgSkcmkYyxy+CFv2WuPlRpN8Cej3Vk4l6Eehm88XefWc8AhltQrY7MVopX0tvgA7B/g5sTOR0AOBilIzPlfwLgY8A0H9eHGxAObd3upLQM4LCeD0xHjmKVIAYKSrmBY7ifzlqlOoDux7WMzpnJ6doV+JItwKeKDz4j512j1T8BMDlBM4/C4OmvjG2fx5EtECd+wU5BqCdxs1GjL+QBbLFqGCfJJ8rZ2DwPiBPJMTawODhFIy7ttGab9QDrzmgMDCGfWMnG0ll6jCSQzlEDUayPiCt16OeedzaYM4GqLGAGvsRhCxrK2dQHh5Sgb3AAihuxNpc45l2ZRgidiFNpKJPL1H0VJrToIOXyfOUAlAwDaNRkgpXMQAXJMUJJGr1M5DrDNvTikab9eV9vxUlEtAo4jTrnc9XpN/xmkj2IxId4nWlCySJOyPmWFUQ4qSLOYNqqN6nTiUTaryY8hHzCXsgSCk1pacVKUk4hFeeCCrFuAchT8/VFIkzjjZNwQUlpJKnCWX6hSZKA7zgkYTLACXUBxGnwPfdvGShJlab1TB7MNBgr5iiz49jc1XH8D0TUxG8GzUc0rdPCApf4EsJoMClXuOow1iVFUNtEJPyuiTPJLICVNtKa1vHSlL6HnOWPrJpEHQQ4wPi0EmEFUzxguwxqaaOxBJ14dX6RRsNSWtBqg3jgWpPp+e1V8BkNAGpxNQQW4eRoPu+vfmLxlHzJJFuxul4mvLJG0HrQnIPrhKIrTg3GVZkXh5+VcDl/rSvGfmb0vl92M8Z1RUEwhZOppm0mLQ7cUFu8XwvAQRV7+Og3jpd+B+cWxxBDm+RZdm5h3FVwJ55pxmb8QaZOTRZr82CRo01qWO4Czyvn37ffpAynNk9pNKHG0WkKfQc0FoBS20alLjHz7Ys7qapbw01bXRhxWlOkiqfd3A/wZ8328vEqT8qlN8pTu02bbVg80+64fXLtfKf0IJvsXYKpmodmm68BBldlqMVe+AvgbxVusSdcA73vE7pFXxMQsWiFZFaa/iO3/+G+t9mtp8h1QJVbnvH8yQOwI2shvnAcnTt6ThIuHmtiUv0nj/roQqo7V5Yj2CRKZmH6gn//463GnR5dSJFF6snPrc++fruwsOZGdvAolVl052efwenh6U7tjFfuhjfc99OX0H0+vhlVVrPnv68Pef5XV+rp/Q+rdLh2FoIUAAAAAABJRU5ErkJggg=="},aece:function(e,t,n){},af39:function(e,t,n){"use strict";n("5e6b")},b0b4:function(e,t,n){"use strict";n("1e1d")},b3fe:function(e,t,n){},b489:function(e,t,n){"use strict";n("de08")},b69d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IB2cksfwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAppQTFRFAAAA////////////////////////////////////////////////////////////////////////////////8/n/5PL/1+z/0Oj/y+b/zOf/z+j/////////8Pj/pdT/hcX/cLv/Zbb/Z7r/aLz/ab3/ZbX/hMT/o9P/yub/7/f//////////f7/zuj/lcz/bbn/ab7/asH/aL3/Zrn/Zbf/ZLb/ZLX/asD/ab//a7j/ksv//P7//////////v//wOH/e8D/ar//Zrj/jsn/v+H/1ev/1uv/wuL/mM7/abf/eb//vd//0en/fsH/c7z/1Ov/6fX/k8v/a8H/esD/zef/////9vv/nND/6vX/odL/////3/D/d77/a8L/weH/g8T/2e3/db3/9/v/x+T/gsP/7vf/xeP/v+D/mc//fMD/dL3/ud7/////w+P/r9n/xuT/iMb/vN//////0+r/sdr/Z7v/ntH/gcP/+Pz/Z7b/+v3/mc7/jcn/rtj/zuf/f8L/str/veD/rNf/////6fT/Zrb/aLf/m8//Zbj/4vH/////////ms//9Pr/3u//isf/2+7/oNH/yOX/l83/bLn/+/3/7Pb/////fcH/1uz/j8n/ut7/////kMr/7ff/5/T/////b7r/////t93/qdb/8vn/////oNL/brr/9fr/h8b/crz//v7/3O7/eL//+vz/8fj/dr7/+fz/ttz/gsT/jMj/4fH/fMH/5fP/4/L/7fb/p9X/abj/arj/ls3/tdz/5/P/6PT/yuX/6/X/dr3/hsX/er//0On/q9f/rNj/lMz/5vP/2Oz/sNn/////3e//tNv/uN3/ptT/xOP/w+L/pNP/u97/qtb/ptX/kcr/////n9H/0ur/MuBdaAAAAN50Uk5TACVWh67K4vX+/PQBP4/T/xV21hLw/////////2vs/////////////////yfE/////////////////////1/6//////////////////////////////+r/////7T//////////////////////2D///////n/////////////////////7f///////xTv//////////////+Q/////9T///8m/1f///+t////////////////////////////////////////////////////E///////////////jv//Je9w6AAABnNJREFUeJylV/1fzVccv6SnKR/JLSXpPnSLuunq3r51RdxrYinZlZi6k6ehbGMpok2TrtqGZiLR9IAhzBjLs8aeDY1tZvtf9vmc7/fc+70PX7xePj/ce87n6ZzvOe/Pw1GpFGjY8KARwSGhYeGvhQSPCBo+TEkvII2MiBwVDl4UPioyYuRLmo+OGgMBaUzU6Jcwjw4ayw3UMbHj4uLHx8aoOWdsUPSL7BMmiKqJ8ROTNFqdPjlZrzNoUlInTRb5ExKea56WzrSMGVMyTVOzzJZsASnbYs7KybVOi8tjwvQ0ZfvpM0gjf+Ysk81OpsLs1+cUzJ33Bg3tttzC+czFjOlK9pEAYQBFxVP1zFpYUCJue+Gb4lzvWFTKVCID2y8m5bIlyVmiuqBZ6j7/tySW3jSPHejiQPbLSFJe4dRKysLbkC+a50P+comX7VxQSaxlCutP0iYbuP2KlchYNXv1kjXoIYNzDVmWdwLuIZK4a/HKuKawDhmlNFiPnsqq3B7MydWk63MOG4j3brJd8NB7yJnHRu/jaKNHYLdtIu0Ncvu0D5BTYzbL7IXNyJoSyIFg18fRbcrxkI6Xs9Baa5A7qEOleBps2Sr/BCJdfQwapHvsE2hLSTle9kLhNmSWbG/4UI2H+JGXyJC7w4hCN6qjCf+NTsGHPuYoyAfjFh+Zcyfym3hkBeFkV7Pd14GrxA2k3b6yFm0rsoNE+08+xfFnDl8dQdA27mHme/f5y3KmUXSL+SEKh60Wi7+SIGTGomxdIIlW14aiKLIfSfnn8wAbINoPkFcYUJLzBeUoynIRlD4OmANqCXjh7RUBJS2ug2gYgQ4O4f/MHF+5tRipo+IwOuismLVoUaHLV8NxBA0PoYOj+N+V6yNN+RKMRmNeHsVjO6Njq31UTPtQdlSl6sb8re7x/YIMv5QsolJGdiumyfBuVS/KYmuzfaR9HhBxqvb9hqwi5PYyFB2Z6it0HZ8UFxcfH3cCM2xNaUbGuPGNVr9DaGRYOom/X/mdIac5GEenFGQ2yhgnVcH422lScoD56/QCBVnWGTQNVoXgb4peyQHCTd2vIKvtwJAMUYUCnC2uVXJwDuCERkGmO/81QKgK07xxFndg2HTsuJfSXoALPUoOvrmIVYI56OAOLlFikSuVA0z2OsSkygIObbaDMPoE+FY6g8t0331y/SsAazJlcw2CZ440rv3OSJ9Ah3hZvAXDAOHmsExfexXgmhwAqbRElzjOSgI6RLrGOhEH1xnilt7w6DcPABy8KXNQREu0iWPbLXaNBKTbDIkasY8wdnj06+94O6xayVQa2MRBlWMEg3INO4NNEujrPAauQazNskBOFTXGsYmplEGZgmnyATvfAO7we5mDhQCDMgdtogOWYyyuuyyYKJxhH57ivcSzMUeO4UTtQc4NrPB36t3TH3hkNvAzxHBmCaWaUmLVj2JBhFS3xU1MWwPN7ukqkq7ti/2JlmDBeFRKaUtdLaJKMVUcj4n1GsBVd8PAytFdqX5Z8NLFlEZJFW7xgKYkAT9zk8w1AFfcG6BDg1+kia0TpKTK0nplrbQOA2M7r2SnEHjl3P5XEiVKwM42FfG0zgoLdPEtxDMwSSHccwHrkiToTyQJjzXTRppFiaWNWtNyu1SaKk7TXf52nk00mNLOifxmdoWt0ka1tffBXdoYlmAir87bGRr2sILWr+bAtRaw+zsj6hic1D3w4qqKbsLJxULeX/0u4qmgq1mw4nbuE69zEOQnqK9CATQ98GowHmp5cXgkweXOUCpiv1KT8kelyHgsKdjNVHRB1jZTiwNPcnmF/tMIHmo/zUf7JbE25y/wbnFUaaxJ3uzgHpY/BH/imUbr/JumXk2W2ObBTkcLv/S6Vh/zGCmNCBbHU8bwavOkRhP69O5OzTB77qARpNpWVrJbgrdBZ2pkqn4NN2t1ofSGrEi51j89ixmp7/g/K9w8Wz2LqEDtNmu2YddGh87jon+bV3oQzM6UGKYWoNnme4D5PU53sTe0eVp9Ms8cAqX1iZ6x1wSod2Y69BJk7w39y89e77Bep3BAlWeB7fmTB6tZ9RaLw6Sz8K7BojM57DsuJYpS5SeP+9GFVH67s0qrt+Ug2fSGqoZHe3mr8bxHF1JCk/vmtw7UPB5qbOx78l9MmZvZ9Pxnn8rr4elPY4MevMhe9cpPX6JXfHyL1N0rPv/DQun539utpPc/Pj2o2nhE0X8AAAAASUVORK5CYII="},b79e:function(e,t,n){},bcf0:function(e,t,n){"use strict";n("27b2")},bfd2:function(e,t,n){},c362:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("avatar",{staticClass:"link-avatar",attrs:{avatar:e.avatar,size:e.size,iconSize:e.iconSize,auth:e.auth,authentication:e.authentication,nickname:e.nickname},nativeOn:{click:function(t){return e.toHomepage.apply(null,arguments)}}})},s=[],i=n("c450"),o={name:"level-nickname",props:["avatar","size","iconSize","auth","authentication","nickname","uid"],components:{Avatar:i["a"]},methods:{toHomepage(){window.open("/space/"+this.uid)}}},r=o,l=(n("43e0"),n("2877")),c=Object(l["a"])(r,a,s,!1,null,"36dac9a4",null);t["a"]=c.exports},c450:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"avatar",style:e.avatarStyle},[t("div",{staticClass:"avatar-border"}),t("img",{staticClass:"avatar-img",attrs:{src:e.avatar,width:e.imageSize,height:e.imageSize,alt:e.nickname}}),e.auth?t("img",{staticClass:"auth",style:e.authPosition,attrs:{width:e.authIconSize,height:e.authIconSize,src:e.authenticationImage,alt:e.authentication,title:e.authText}}):e._e()])},s=[],i=n("2f62");const o={PERSONAL:1,TEAM:2,OFFICIAL:4};var r={name:"avatar",data(){return{personalImage:n("3665"),teamImage:n("9ec6"),officialImage:n("b69d")}},props:["avatar","size","iconSize","auth","authentication","nickname"],computed:{...Object(i["d"])({theme:e=>e.config.theme,themeWithAvatarBorder:e=>e.config.themeWithAvatarBorder}),authenticationImage(){switch(this.auth){case o.PERSONAL:return this.personalImage;case o.TEAM:return this.teamImage;case o.OFFICIAL:return this.officialImage}return""},authText(){switch(this.auth){case o.PERSONAL:return"个人认证";case o.TEAM:return"团体认证";case o.OFFICIAL:return"官方账号"}return""},avatarStyle(){return`width: ${this.size}px;height: ${this.size}px;`},authIconSize(){return this.iconSize||14},imageSize(){return this.themeWithAvatarBorder.includes(this.theme)?.6*this.size:this.size},authPosition(){return this.themeWithAvatarBorder.includes(this.theme)?"right: 6px; bottom: 11px;":"right: -2px; bottom: 0px;"}}},l=r,c=(n("d468"),n("2877")),d=Object(c["a"])(l,a,s,!1,null,"99141c2e",null);t["a"]=d.exports},ce29:function(e,t,n){},ce86:function(e,t,n){},d468:function(e,t,n){"use strict";n("6c4f")},d63f:function(e,t,n){},db04:function(e,t,n){"use strict";var a=n("bc3a"),s=n.n(a),i=n("ec26");const o=s.a.create({baseURL:"",withCredentials:!0,timeout:6e4,timeoutErrorMessage:"请求超时"});o.interceptors.request.use(e=>(e.headers.authorization=Object(i["a"])(),e),e=>Promise.reject(e)),o.interceptors.response.use(e=>{if(200===e.status)return e.data;console.error(e.status)},e=>(console.log("err"+e),Promise.reject(e))),t["a"]=o},dd45:function(e,t,n){},de08:function(e,t,n){},e00f:function(e,t,n){e.exports=n.p+"img/android.2fb1b01c.png"},e100:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("5a0c"),s=n.n(a),i=n("0ecf"),o=n.n(i),r=n("1953"),l=n.n(r),c=n("b002"),d=n.n(c),u=n("4208"),p=n.n(u),h=n("c4a1"),m=n.n(h);function f(e,t=!1){const n=s()(new Date),a=n.utcOffset(),i=e.includes("T")?s()(e).add(a,"minutes"):s()(e).subtract(8,"hours").add(a,"minutes");if(n.year()!==i.year()){const e=i.format("YYYY-MM-DD");return`${e}${t?" "+i.format("HH:mm"):""}`}if(n.month()!==i.month()||n.diff(i,"day")>=3){const e=i.format("MM-DD");return`${e}${t?" "+i.format("HH:mm"):""}`}const o=s()(i);if(o.add(1,"day").isYesterday()){const e="前天 "+i.format("HH:mm");return e}if(i.isYesterday()){const e="昨天 "+i.format("HH:mm");return e}if(n.diff(i,"minute")<1)return"刚刚";if(n.diff(i,"hour")<1){const e=n.diff(i,"minute");return e+"分钟前"}if(n.diff(i,"day")<1){const e=n.diff(i,"hour");return e+"小时前"}return i.format("YYYY-MM-DD HH:mm")}s.a.extend(o.a),s.a.extend(l.a),s.a.extend(d.a),s.a.extend(p.a),s.a.extend(m.a)},e344:function(e,t,n){"use strict";n("18c5")},e51f:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("nickname",{staticClass:"level-nickname",style:e.usernameStyle,attrs:{nickname:e.nickname},nativeOn:{click:function(t){return e.toHomepage.apply(null,arguments)}}})},s=[],i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"nickname"},[e._v(" "+e._s(e.nickname)+" ")])},o=[],r={name:"nickname",props:["nickname"]},l=r,c=(n("ff92"),n("2877")),d=Object(c["a"])(l,i,o,!1,null,"9ad1cc50",null),u=d.exports,p=n("808e"),h={name:"level-nickname",props:["nickname","colors","uid","size"],components:{Nickname:u},computed:{usernameStyle(){const e=this.colors.split(",");if("#606266"===e[0])return`color: ${p["g"]};font-size: ${this.size||16}px`;if(1===e.length)return`color: ${e[0]};font-size: ${this.size||16}px`;const[t,n]=e;return`background-image: linear-gradient(135deg,${t},${n});background-clip:text;-webkit-background-clip:text;color: transparent;font-size: ${this.size||16}px`}},methods:{toHomepage(){window.open("/space/"+this.uid)}}},m=h,f=(n("8fba"),Object(c["a"])(m,a,s,!1,null,"42c63d6c",null));t["a"]=f.exports},ed08:function(e,t){const n={dateFormat:(e,t)=>{let n;const a={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(let s in a)n=new RegExp("("+s+")").exec(e),n&&(e=e.replace(n[1],1==n[1].length?a[s]:a[s].padStart(n[1].length,"0")));return e},getLevelInfo(e,t){let n=0;while(n<t.length){if(n===t.length-1)return t[n];if(e>=t[n].exp&&e<t[n+1].exp)return t[n];n++}},imagesLoadDone:async e=>{const t=e.map(e=>new Promise(t=>{const n=new Image;n.src=e,n.onload=()=>{t(e)}}));return Promise.all(t)},dateInrange:(e,t,n)=>{const a=new Date(e),s=new Date(t);return s.valueOf()-a.valueOf()<n},getThumbnail:e=>{if(!e)return"https://cdn.ihan.club/default.png?imageView2/1/w/100/h/100";if(e.includes("cdn.ihan.club"))return e+"?imageView2/1/w/100/h/100";if(e.includes("2550505.com")){const t=e.split("/"),[n]=t.slice(-1);return t[t.length-1]="thumbnail."+n,t.join("/")}return e.includes("pic.imgdb.cn")?e+"?w=100&h=100":void 0}};e.exports=n},ed1a:function(e,t,n){},eeeb:function(e,t,n){"use strict";n("658d")},f1f3:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n("db04"),s=n("365c"),i=n("1655");const o={bold:i["a"],italic:i["d"],image:i["h"],link:i["e"],emoticons:i["c"],video:i["i"],strike:i["g"],spoiler:i["f"],vote:i["j"]},r={IMAGE:"IMAGE",MENTION:"MENTION",HASH_TAG:"HASH_TAG",LINK:"LINK",CHARACTER_COUNT:"CHARACTER_COUNT"},l={USER_LIST:"USER_LIST",TAG_LIST:"TAG_LIST"};async function c(e){const t=await a["a"].get(s["a"].searchUser,{params:{keyword:e.trim()}});return t.list||[]}async function d(e){const t=await a["a"].get(s["a"].searchTag,{params:{keyword:e.trim()}});return t.result||[]}function u(e){return e===l.USER_LIST?c:e===l.TAG_LIST?d:void 0}},feeb:function(e,t,n){"use strict";var a=n("a026"),s=n("2f62"),i=n("1ab4"),o=n("672a"),r=n("3560"),l=n("795d"),c=n("8340"),d=n("7914"),u=n("41b5"),p=n("2c34"),h=n("1ad4"),m=n("7c31"),f=(n("a1f0"),n("14d9"),n("eb54")),g=function(e){const t=new RegExp("(#[0-9a-f]{3}|#[0-9a-f]{6})\\b","gi"),n=[];return e.descendants((e,a)=>{e.text&&Array.from(e.text.matchAll(t)).forEach(e=>{const t=e[0],s=e.index||0,i=a+s,o=i+t.length,r=f["a"].inline(i,o,{class:"color",style:"--color: "+t});n.push(r)})}),f["b"].create(e,n)};const v=h["b"].create({name:"colorHighlighter",addProseMirrorPlugins(){return[new m["c"]({state:{init(e,{doc:t}){return g(t)},apply(e,t){return e.docChanged?g(e.doc):t}},props:{decorations(e){return this.getState(e)}}})]}}),b=n("7e17"),k=e=>b.find(t=>t.emotions.find(t=>t.split(".")[0]===e)),y=e=>{let t="";return b.forEach(n=>{n.emotions.forEach(a=>{a.split(".")[0]===e&&(t=`https://2550505.com/emotion/${n.root}/${a}`)})}),t};var w=function(e,t){const n=new RegExp("(\\[)(.+?)(\\])","g"),{doc:a}=t;a.descendants((t,a)=>{t.text&&Array.from(t.text.matchAll(n)).forEach(t=>{const n=t[0].replace("[","").replace("]","");if(n&&k(n)){const s=t.index||0,i=a+s,o=i+n.length+2,r=y(n);e.commands.insertContentAt({from:i,to:o},`<img src="${r}" alt="${n}" title="${n}" class="emoticon-img" referrerpolicy="no-referrer" data-emotion-name="${n}" contenteditable="false" draggable="true">`)}})})},C=n("b268"),x=n("6ffb"),_=n("2893");const A=new x["e"]("hashTag"),T=h["d"].create({name:"hashTag",addOptions(){return{HTMLAttributes:{},renderLabel({options:e,node:t}){var n;return`${e.suggestion.char}${null!==(n=t.attrs.label)&&void 0!==n?n:t.attrs.id}`},suggestion:{char:"#",pluginKey:A,prefixSpace:!1,command:({editor:e,range:t,props:n})=>{var a;const s=e.view.state.selection.$to.nodeAfter,i=null===s||void 0===s||null===(a=s.text)||void 0===a?void 0:a.startsWith(" ");i&&(t.to+=1),e.chain().focus().insertContentAt(t,[{type:this.name,attrs:n},{type:"text",text:" "}]).run()},allow:({editor:e,range:t})=>{const n=e.state.doc.resolve(t.from),a=e.schema.nodes[this.name],s=!!n.parent.type.contentMatch.matchType(a);return s}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{href:"/tag/"+e.id}:{}},id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}}}},parseHTML(){return[{tag:"a[data-hash-tag]"}]},renderHTML({node:e,HTMLAttributes:t}){return["a",Object(h["r"])({"data-hash-tag":""},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:e})]},renderText({node:e}){return this.options.renderLabel({options:this.options,node:e})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let n=!1;const{selection:a}=t,{empty:s,anchor:i}=a;return!!s&&(t.doc.nodesBetween(i-1,i,(t,a)=>{if(t.type.name===this.name)return n=!0,e.insertText(this.options.suggestion.char||"",a,a+t.nodeSize),!1}),n)})}},addProseMirrorPlugins(){return[Object(_["a"])({editor:this.editor,...this.options.suggestion})]}}),L=new x["e"]("mention"),I=h["d"].create({name:"mention",addOptions(){return{HTMLAttributes:{},renderLabel({options:e,node:t}){var n;return`${e.suggestion.char}${null!==(n=t.attrs.label)&&void 0!==n?n:t.attrs.id}`},suggestion:{char:"@",pluginKey:L,prefixSpace:!1,command:({editor:e,range:t,props:n})=>{var a;const s=e.view.state.selection.$to.nodeAfter,i=null===s||void 0===s||null===(a=s.text)||void 0===a?void 0:a.startsWith(" ");i&&(t.to+=1),e.chain().focus().insertContentAt(t,[{type:this.name,attrs:n},{type:"text",text:" "}]).run()},allow:({editor:e,range:t})=>{const n=e.state.doc.resolve(t.from),a=e.schema.nodes[this.name],s=!!n.parent.type.contentMatch.matchType(a);return s}}}},group:"inline",inline:!0,selectable:!1,atom:!0,addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{href:"/space/"+e.id}:{}},id:{default:null,parseHTML:e=>e.getAttribute("data-id"),renderHTML:e=>e.id?{"data-id":e.id}:{}},label:{default:null,parseHTML:e=>e.getAttribute("data-label"),renderHTML:e=>e.label?{"data-label":e.label}:{}}}},parseHTML(){return[{tag:"a[data-mention]"}]},renderHTML({node:e,HTMLAttributes:t}){return["a",Object(h["r"])({"data-mention":""},this.options.HTMLAttributes,t),this.options.renderLabel({options:this.options,node:e})]},renderText({node:e}){return this.options.renderLabel({options:this.options,node:e})},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.command(({tr:e,state:t})=>{let n=!1;const{selection:a}=t,{empty:s,anchor:i}=a;return!!s&&(t.doc.nodesBetween(i-1,i,(t,a)=>{if(t.type.name===this.name)return n=!0,e.insertText(this.options.suggestion.char||"",a,a+t.nodeSize),!1}),n)})}},addProseMirrorPlugins(){return[Object(_["a"])({editor:this.editor,...this.options.suggestion})]}}),P=/(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))/,S=h["d"].create({name:"image",addOptions(){return{inline:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},class:{default:"editor-image"},"data-bv":{default:null},referrerPolicy:{default:"no-referrer"},"data-emotion-name":{default:null}}},parseHTML(){return[{tag:"img[src]"}]},renderHTML({HTMLAttributes:e}){return["img",Object(h["r"])(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[Object(h["s"])({find:P,type:this.type,getAttributes:e=>{const[,,t,n,a]=e;return{src:n,alt:t,title:a}}})]}});var H,O,E,j,D=n("f1f3"),M=n("6f9a"),N={name:"MentionList",props:{items:{type:Array,required:!0},command:{type:Function,required:!0}},data(){return{selectedIndex:0}},watch:{items(){this.selectedIndex=0}},methods:{onKeyDown({event:e}){return"ArrowUp"===e.key?(this.upHandler(),!0):"ArrowDown"===e.key?(this.downHandler(),!0):"Enter"===e.key&&(this.enterHandler(),!0)},upHandler(){this.selectedIndex=(this.selectedIndex+this.items.length-1)%this.items.length},downHandler(){this.selectedIndex=(this.selectedIndex+1)%this.items.length},enterHandler(){this.selectItem(this.selectedIndex)},selectItem(e){const t=this.items[e];t&&this.command({id:t.key,label:t.value})}},render(){const e=arguments[0];return e("ul",{class:"mention-list"},[this.items.map((t,n)=>e("li",{class:{"is-selected":t.id===this.selectedIndex,item:!0},key:t.id,on:{click:()=>this.selectItem(n)}},[t.value]))])}},z=N,R=(n("6125"),n("2877")),B=Object(R["a"])(z,H,O,!1,null,null,null),$=B.exports,U={items:async({query:e})=>{const t=await Object(D["c"])(D["b"].USER_LIST)(e);return t&&t.length>0?t.map(e=>({key:e.uid,value:e.nickname})):[]},render:()=>{let e,t;return{onStart:n=>{e=new i["c"]($,{parent:void 0,propsData:n}),t=Object(M["a"])("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"right-start",theme:"light",arrow:!1})},onUpdate(n){var a;e.updateProps(n),t[0].setProps({getReferenceClientRect:n.clientRect}),0===(null===(a=n.items)||void 0===a?void 0:a.length)&&t[0].hide()},onKeyDown(n){var a,s;if(0!==(null===(a=e.ref.$props.items)||void 0===a?void 0:a.length))return"Escape"===n.event.key?(t[0].hide(),!0):null===(s=e.ref)||void 0===s?void 0:s.onKeyDown(n)},onExit(){t[0].destroy(),e.destroy()}}}},F={items:async({query:e})=>{const t=await Object(D["c"])(D["b"].TAG_LIST)(e);return t&&t.length>0?t.map(e=>({key:e.id,value:e.name})):[]},render:()=>{let e,t;return{onStart:n=>{e=new i["c"]($,{parent:void 0,propsData:n}),t=Object(M["a"])("body",{getReferenceClientRect:n.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"right-start",theme:"light",arrow:!1})},onUpdate(n){var a;e.updateProps(n),t[0].setProps({getReferenceClientRect:n.clientRect}),0===(null===(a=n.items)||void 0===a?void 0:a.length)&&t[0].hide()},onKeyDown(n){var a,s;if(0!==(null===(a=e.ref.$props.items)||void 0===a?void 0:a.length))return"Escape"===n.event.key?(t[0].hide(),!0):null===(s=e.ref)||void 0===s?void 0:s.onKeyDown(n)},onExit(){t[0].destroy(),e.destroy()}}}},V=n("46f9"),G={name:"EditorProvider",data(){return{observedEditor:a["default"].observable({editor:null}),anchorPosition:{pos:0}}},provide(){return{observedEditor:this.observedEditor,anchorPosition:this.anchorPosition}},props:{rootClass:String,type:String,plugins:Object},computed:{...Object(s["d"])({userInfo:e=>e.users.userInfo})},methods:{handleUploadPasteAndDrop:async function(e,t,n,a){const s=Array.from(e);if(s.some(e=>!e.type.startsWith("image/")))return this.$message({type:"danger",message:"请勿将图片以外的文件拖入编辑器"}),!1;const i=await Object(V["f"])(s,t,"chat"===n);for(const o of i)a.editor.commands.insertContent(`<img class='upload-img' src=${o} />`);return!0}},mounted(){var e,t,n;const a=Object.keys(this.plugins);this.observedEditor.editor=new i["a"]({onTransaction:({transaction:e})=>{try{this.anchorPosition.pos=e.curSelection.$anchor.pos}catch(t){console.log(t)}},onUpdate:({editor:e,transaction:t})=>{w(e,t)},extensions:[u["b"],u["b"].extend({content:"paper"}),p["b"],C["a"],v,o["a"].configure({orderedList:!1,bulletList:!1}),l["a"].configure({placeholder:"请填写内容~"}),c["a"].configure({multicolor:!0,HTMLAttributes:{class:"spoiler"}}),a.includes(D["a"].IMAGE)&&S.configure(this.plugins[D["a"].IMAGE]||{inline:!0}),a.includes(D["a"].LINK)&&r["a"].configure(this.plugins[D["a"].LINK]||{HTMLAttributes:{class:(null!==(e=this.rootClass)&&void 0!==e?e:"editor")+"-link"},openOnClick:!1}),a.includes(D["a"].MENTION)&&I.configure(this.plugins[D["a"].MENTION]||{HTMLAttributes:{class:(null!==(t=this.rootClass)&&void 0!==t?t:"editor")+"-mention",href:"/space"},suggestion:U}),a.includes(D["a"].HASH_TAG)&&T.configure(this.plugins[D["a"].HASH_TAG]||{HTMLAttributes:{class:(null!==(n=this.rootClass)&&void 0!==n?n:"editor")+"-hash-tag",href:"/tag"},suggestion:F}),a.includes(D["a"].CHARACTER_COUNT)&&d["a"].configure(this.plugins[D["a"].CHARACTER_COUNT]||{limit:260})],editorProps:{handleDrop:async(e,t,n,a)=>{if(!a&&t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){var s;const e=t.dataTransfer.files,n=this.handleUploadPasteAndDrop(e,null===this||void 0===this||null===(s=this.userInfo)||void 0===s?void 0:s.uid,this.type,this.observedEditor);return n}return this.observedEditor.editor.commands.insertContent(t.dataTransfer.getData("text/plain")),!1},handlePaste:async(e,t)=>{if(t.clipboardData&&t.clipboardData.files&&t.clipboardData.files.length){var n;const e=t.clipboardData.files,a=this.handleUploadPasteAndDrop(e,null===this||void 0===this||null===(n=this.userInfo)||void 0===n?void 0:n.uid,this.type,this.observedEditor);return a}return this.observedEditor.editor.commands.insertContent(t.clipboardData.getData("text/plain")),!1}}}),this.$once("hook:beforeDestroy",()=>{var e;null===(e=this.observedEditor.editor)||void 0===e||e.destroy()})},render(){return this.$slots.default}},W=G,q=(n("7857"),Object(R["a"])(W,E,j,!1,null,null,null));t["a"]=q.exports},ff92:function(e,t,n){"use strict";n("b3fe")}});