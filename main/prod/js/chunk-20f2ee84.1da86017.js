(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20f2ee84"],{"0dc7":function(t,a,e){},1078:function(t,a,e){"use strict";a["a"]={backupList:"/backup/list",backupDetail:"/backup/detail/",backupReply:"/backup/post/reply/"}},1351:function(t,a,e){"use strict";e("301e")},"18ca":function(t,a,e){},"301e":function(t,a,e){},"3dba":function(t,a,e){"use strict";e("aa7c")},"44f1":function(t,a,e){"use strict";e("57a1")},"57a1":function(t,a,e){},"5a80":function(t,a,e){},7150:function(t,a,e){"use strict";var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"avatar",style:t.avatarStyle,on:{click:t.toHomepage}},[a("img",{attrs:{src:t.avatarUrl,width:t.size,height:t.size,alt:t.alt||""}})])},i=[],l={name:"avatar",props:["url","size","alt","uid"],computed:{avatarStyle(){return`width: ${this.size}px; height: ${this.size}px`},avatarUrl(){return this.url||"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png"}},methods:{toHomepage(){window.open("/space/"+this.uid)}}},n=l,r=(e("a708"),e("2877")),o=Object(r["a"])(n,s,i,!1,null,"5f6430d2",null);a["a"]=o.exports},8432:function(t,a,e){"use strict";e("d1b9")},a708:function(t,a,e){"use strict";e("0dc7")},aa7c:function(t,a,e){},b034:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"backup"},[a("div",{staticClass:"post-editor"}),a("div",{staticClass:"backup__wrapper"},[a("div",{staticClass:"backup__container"},[t.contentShow?a("backup-content",{attrs:{detail:t.postData}}):t._e(),t.replyShow?a("backup-reply",{attrs:{replies:t.replyData,page:t.page,total:t.total},on:{changePage:t.changePage}}):t._e()],1)]),a("div",{staticClass:"backup__right"},[t.authorInfoShow?a("backup-author",{attrs:{author:t.postData}}):t._e()],1)])},i=[],l=(e("14d9"),function(){var t=this,a=t._self._c;return a("div",{staticClass:"backup-author"},[t._m(0),a("div",{staticClass:"backup-author-baseInfo"},[a("div",{staticClass:"backup-author-baseInfo__avatar"},[a("avatar",{attrs:{url:t.author.avatar,size:80,alt:t.author.nickname}})],1),a("div",{staticClass:"backup-author-baseInfo__nickname"},[a("span",[t._v(" "+t._s(t.author.nickname)+" ")])])])])}),n=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"backup-author-title"},[a("span",[t._v("帖主")])])}],r=e("7150"),o={name:"backup-author",props:["author"],components:{Avatar:r["a"]},data(){return{defaultAvatar:"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png"}},computed:{avatar(){var t;return(null===(t=this.author)||void 0===t?void 0:t.avatar)||this.defaultAvatar}}},p=o,c=(e("8432"),e("2877")),u=Object(c["a"])(p,l,n,!1,null,"d07fb3b6",null),d=u.exports,h=function(){var t=this,a=t._self._c;return a("div",{staticClass:"backup-content"},[t.detail.title?a("div",{staticClass:"backup-content-title"},[t._v(" "+t._s(t.detail.title.length>36?t.detail.title.substr(0,36)+"...":t.detail.title)+" ")]):t._e(),a("div",{staticClass:"backup-content__inner"},[a("div",{staticClass:"backup-content__inner-aside"},[a("avatar",{attrs:{url:t.detail.avatar,size:50,alt:t.detail.nickname}})],1),a("div",{staticClass:"backup-content__inner-main"},[a("div",{staticClass:"backup-content__inner-top"},[a("span",[t._v(" "+t._s(t.detail.nickname)+" ")])]),a("div",{staticClass:"backup-content__inner-text",domProps:{innerHTML:t._s(t.detail.content)}}),a("div",{staticClass:"backup-content__inner-text",domProps:{innerHTML:t._s(t.detail.addition)}}),a("div",{staticClass:"backup-content__inner-banner"},[a("span",{staticClass:"backup-content__time"},[t._v(" "+t._s(t.detail.time)+" ")])])])])])},_=[],v={name:"backup-details",props:["detail"],components:{Avatar:r["a"]},data(){return{defaultAvatar:"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png"}},computed:{avatar(){return this.detail.author.avatar||this.defaultAvatar}}},b=v,g=(e("d7d6"),Object(c["a"])(b,h,_,!1,null,"21823bba",null)),m=g.exports,k=function(){var t=this,a=t._self._c;return a("div",{staticClass:"backup-reply"},[t._m(0),t.replies.length>0?a("div",{staticClass:"backup-reply-main"},[(t.isMobile,t._l(t.replies,(function(e){return a("div",{key:e.floorId,staticClass:"backup-reply__box"},[a("div",{staticClass:"backup-reply__box-aside"},[a("div",{staticClass:"backup-reply__photograph"},[a("avatar",{attrs:{url:e.author.avatar,size:50,alt:e.author.nickname}})],1)]),a("div",{staticClass:"backup-reply__box-main"},[a("div",{staticClass:"backup-reply__box-top"},[a("span",[t._v(" "+t._s(e.author.nickname)+" ")])]),a("div",{staticClass:"backup-reply__box-text",domProps:{innerHTML:t._s(`<p>${e.content}</p>`)}}),a("div",{staticClass:"backup-reply__box-banner"},[a("span",{staticClass:"backup-reply__tag-time"},[t._v(" "+t._s(e.date)+" ")]),a("span",{staticClass:"backup-reply__tag-like"},[a("div",{staticClass:"backup-reply__tag-icon"},[a("icon",{attrs:{icon:"hanser icon-dianzan"}})],1),t._v(" "+t._s(e.likes)+" ")])]),a("div",{staticClass:"backup-reply__box-reply"},[e.replies.length>0?a("list-reply",{ref:"listReply",refInFor:!0,attrs:{replies:e.replies}}):t._e()],1)])])})))],2):a("div",{staticClass:"backup-reply-main"},[a("p",[t._v("暂无回复")])]),a("div",{staticClass:"backup-reply-bottom"},[t.isMobile?a("load-more",{key:"backup-reply",attrs:{name:"backup-reply","have-more":!t.loadDone},on:{"load-more":t.loadMoreReplies}}):a("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":20,layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)])},y=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"backup-reply-head"},[a("div",{staticClass:"backup-reply-head__title"},[a("span",[t._v("帖子回复")])])])}],f=function(){var t=this,a=t._self._c;return a("div",{staticClass:"list-reply"},[t._l(t.showReplies,(function(e,s){return a("div",{key:s},[a("div",{staticClass:"list-reply__box"},[t.isMobile?t._e():a("div",{staticClass:"list-reply__box-aside"},[a("div",{staticClass:"list-reply__photograph"},[a("avatar",{attrs:{size:50,url:e.avatar,iconSize:14,user:e}})],1)]),a("div",{staticClass:"list-reply__box-main"},[a("div",{staticClass:"list-reply__box-top"},[a("div",{staticClass:"list-reply__username"},[a("span",{staticClass:"username-text"},[t._v(" "+t._s(e.nickname)+" ")]),a("span",{staticClass:"reply-text"},[t._v(" 回复 ")]),a("span",{staticClass:"username-text"},[t._v(" @"+t._s(e.to)+" ")]),a("span",{},[t._v("：")]),a("div",{staticClass:"list-reply__text post-content",domProps:{innerHTML:t._s(e.content)}})])]),e.location?a("div",{staticClass:"ip-location"},[t._v("IP归属地: "+t._s(e.location))]):t._e(),a("div",{staticClass:"list-reply__box-banner"},[a("span",{staticClass:"list-reply__tag-time"},[t._v(" "+t._s(e.time)+" ")])])])])])})),t.replies.length>10&&t.showAllReplies?a("div",{staticClass:"list-reply-bottom"},[a("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":10,layout:"prev, pager, next, jumper",total:t.replies.length},on:{"current-change":t.handleCurrentChange}})],1):t._e(),t.replies.length>3?a("div",{staticClass:"list-reply__action"},[a("span",{staticClass:"list-reply__action-text"},[t._v("共"+t._s(t.replies.length)+"条回复")]),a("span",{staticClass:"list-reply__action-expand",on:{click:t.expandReply}},[t._v(t._s(t.expandShowText))])]):t._e()],2)},C=[],x=e("2f62"),w={name:"list-reply",props:["replies"],components:{Avatar:r["a"]},data(){return{defaultAvatar:"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png",replyContent:"",repliesLocal:[],repliesShowBrief:[],showAllReplies:!1,page:1}},created(){let t=JSON.parse(JSON.stringify(this.replies));this.repliesLocal=t,this.repliesShowBrief=t.slice(0,3)},computed:{...Object(x["d"])({isMobile:t=>t.media.isMobile}),showReplies(){return this.showAllReplies?this.repliesLocal.slice(10*(this.page-1),10*this.page):this.repliesShowBrief},expandShowText(){return this.showAllReplies?"点击收起":"展开全部"}},methods:{expandReply(){this.showAllReplies=!this.showAllReplies},handleCurrentChange(t){this.page=t}}},S=w,z=(e("3dba"),e("44f1"),Object(c["a"])(S,f,C,!1,null,"72442055",null)),D=z.exports,M=e("4445"),R=e("a026");const A=Object(R["ref"])(1);var I={name:"backup-reply",props:["replies","page","total"],data(){return{defaultAvatar:"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png",newPage:1,loadDone:this.total==this.replies.length!=20}},components:{ListReply:D,Avatar:r["a"],LoadMore:M["a"]},computed:{...Object(x["d"])({isMobile:t=>t.media.isMobile})},methods:{handleCurrentChange(t){this.newPage=t,this.$emit("changePage",t)},loadMoreReplies(){this.loadDone=this.total==this.replies.length,0==this.loadDone&&(A.value++,this.$emit("changePage",A.value))}}},P=I,j=(e("1351"),Object(c["a"])(P,k,y,!1,null,"3358eea6",null)),O=j.exports,L=e("db04"),B=e("1078"),H={name:"backup",components:{BackupAuthor:d,BackupContent:m,BackupReply:O},data(){return{page:1,pageSize:20,postData:null,replyData:null,total:null,authorInfoShow:!1,contentShow:!1,replyShow:!1}},metaInfo(){var t,a,e;return{title:null!==(t=this.postData)&&void 0!==t&&t.title?(null===(a=this.postData)||void 0===a?void 0:a.title)+" - 毛怪俱乐部":"毛怪俱乐部",meta:[{name:"description",content:""+((null===(e=this.postData)||void 0===e?void 0:e.title)||"")}]}},computed:{postId(){return this.$route.params.postId},...Object(x["d"])({isMobile:t=>t.media.isMobile})},async mounted(){const[t,a]=await Promise.all([L["a"].get(B["a"].backupDetail+this.postId),L["a"].get(B["a"].backupReply+this.postId,{params:{page:this.page,pageSize:this.pageSize}})]);this.postData=t.info,this.replyData=a.list,this.total=a.total,this.authorInfoShow=!0,this.contentShow=!0,this.replyShow=!0},methods:{async changePage(t){this.isMobile||(this.replyShow=!1),this.page=t,await L["a"].get(B["a"].backupReply+this.postId,{params:{page:this.page,pageSize:this.pageSize}}).then(t=>{0===t.code?(this.isMobile?this.replyData.push(...t.list):this.replyData=t.list,this.total=t.total):this.changePage(1)}),this.replyShow=!0}}},T=H,$=(e("b673"),Object(c["a"])(T,s,i,!1,null,"02e935cc",null));a["default"]=$.exports},b673:function(t,a,e){"use strict";e("5a80")},d1b9:function(t,a,e){},d7d6:function(t,a,e){"use strict";e("18ca")}}]);