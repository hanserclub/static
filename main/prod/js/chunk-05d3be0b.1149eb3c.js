(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05d3be0b"],{"146b":function(t,e,a){"use strict";a("6721")},"1d6e":function(t,e,a){},2653:function(t,e,a){"use strict";a("8fc3")},3559:function(t,e,a){},4892:function(t,e,a){"use strict";a("1d6e")},5491:function(t,e,a){"use strict";a("8128")},"56a2":function(t,e,a){"use strict";a("3559")},6721:function(t,e,a){},"69d5":function(t,e,a){"use strict";a.d(e,"g",(function(){return i})),a.d(e,"d",(function(){return o})),a.d(e,"i",(function(){return l})),a.d(e,"j",(function(){return r})),a.d(e,"h",(function(){return c})),a.d(e,"l",(function(){return m})),a.d(e,"k",(function(){return b})),a.d(e,"n",(function(){return f})),a.d(e,"m",(function(){return v})),a.d(e,"o",(function(){return k})),a.d(e,"f",(function(){return y})),a.d(e,"e",(function(){return w})),a.d(e,"c",(function(){return _})),a.d(e,"b",(function(){return L})),a.d(e,"a",(function(){return C}));var s=a("db04"),n=a("50fc");const i=t=>s["a"].get(n["a"].getAvatarCheckList,{params:t}),o=t=>s["a"].post(n["a"].approveAvatarCheck,t),l=t=>s["a"].get(n["a"].getLogList,{params:t}),r=t=>s["a"].get(n["a"].getRecoverList,{params:t}),c=t=>s["a"].get(n["a"].banList,{params:t}),u=t=>s["a"].post(`${n["a"].removePost}/${t}`),p=t=>s["a"].post(`${n["a"].setPostValued}/${t}`),h=t=>s["a"].post(`${n["a"].removePostValued}/${t}`),d=t=>s["a"].post(`${n["a"].setPostTopping}/${t}`),g=t=>s["a"].post(`${n["a"].removePostTopping}/${t}`),m=t=>s["a"].get(n["a"].nicknameApplyList,{params:t}),b=t=>s["a"].post(n["a"].nicknameApplyCheck,t),f=t=>s["a"].get(n["a"].signApplyList,{params:t}),v=t=>s["a"].post(n["a"].signApplyCheck,t),k=t=>s["a"].post(`${n["a"].unban}${t.uid}`,t),y=[{key:void 0,value:"全部"},{key:0,value:"待审核"},{key:1,value:"审核通过"},{key:2,value:"审核不通过"}],w=[{key:0,value:"在使用"},{key:1,value:"已过期"},{key:2,value:"被撤销"},{key:3,value:"全部"}],_=[{key:void 0,value:"全部"},{key:1,value:"删帖相关"},{key:2,value:"屏蔽相关"},{key:3,value:"加精相关"},{key:4,value:"置顶相关"}],L={5:"加精",6:"取消加精",7:"置顶",8:"取消置顶"},C={1:u,3:null,4:null,5:p,6:h,7:d,8:g}},"74e6":function(t,e,a){},8128:function(t,e,a){},"8fc3":function(t,e,a){},9445:function(t,e,a){"use strict";a("fa99")},"94cf":function(t,e,a){"use strict";a("9944")},9944:function(t,e,a){},a01f:function(t,e,a){"use strict";a("74e6")},b6a5:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"admin"},[e("div",{staticClass:"header"},[e("div",{staticClass:"header-content--wrapper"},[e("ul",{staticClass:"menu-list"},t._l(t.permissionMenuList,(function(a){return e("li",{key:a.hash,staticClass:"menu",class:{active:t.active===a.hash},on:{click:function(e){return t.switchItem(a)}}},[t._v(" "+t._s(a.text)+" ")])})),0)])]),e("div",{staticClass:"content"},[e(t.display,{tag:"component"})],1),e("el-image",{ref:"showing-img",staticClass:"showing-img",attrs:{src:t.firstPicture,width:"0",height:"0","preview-src-list":t.showingPictures}})],1)},n=[],i=a("2f62"),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post"},[e("el-select",{attrs:{placeholder:"日志类型"},on:{change:t.handleChangeActionType},model:{value:t.actionType,callback:function(e){t.actionType=e},expression:"actionType"}},t._l(t.actionTypeList,(function(t){return e("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.postList}},[e("el-table-column",{attrs:{type:"index"}}),e("el-table-column",{attrs:{prop:"title",label:"帖子标题"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticClass:"link",on:{click:function(e){return t.handleLink(a.row)}}},[t._v(t._s(a.row.title))])]}}])}),e("el-table-column",{attrs:{prop:"authorName",label:"帖子作者",width:"200"}}),e("el-table-column",{attrs:{prop:"postLabel",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.operation))])]}}])}),e("el-table-column",{attrs:{prop:"operator",label:"操作者",width:"200"}}),e("el-table-column",{attrs:{prop:"reason",label:"操作理由",width:"100"}})],1),e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.totalPosts},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},l=[],r=(a("14d9"),a("69d5")),c={name:"post",data(){return{actionType:void 0,page:1,pageSize:20,totalPosts:0,postList:[],actionTypeList:r["c"]}},computed:{actionNameList(){const t=[];for(const[e,a]of Object.entries(r["b"]))t.push({id:e,name:a});return t}},methods:{labelStyle(t){return`background: ${t.color};`},getActionName(t){return r["b"][t]},handleChangeActionType(){this.getList()},handleSizeChange(t){this.pageSize=t,this.page=1,this.getList()},handleCurrentChange(t){this.page=t,this.getList()},handleLink(t){window.open("/postDetails/"+t.id)},async getList(){try{const t=await Object(r["i"])({page:this.page,pageSize:this.pageSize,filter:this.actionType});this.postList=t.list.map(t=>({id:t.post.id,title:t.post.title,authorName:t.post.author.nickname,postLabel:t.labels,operation:t.operation.text,operator:t.operator.nickname,reason:t.reason})),this.totalPosts=t.total}catch(t){console.error(t)}}},mounted(){this.getList()}},u=c,p=(a("56a2"),a("2877")),h=Object(p["a"])(u,o,l,!1,null,"77e85208",null),d=h.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.postList}},[e("el-table-column",{attrs:{prop:"title",label:"帖子名"}}),e("el-table-column",{attrs:{prop:"authorName",label:"帖子作者",width:"200"}}),e("el-table-column",{attrs:{prop:"action",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticClass:"link",on:{click:function(e){return t.handleRecover(a.row)}}},[t._v("恢复")])]}}])})],1),e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.totalPosts},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},m=[],b={name:"recover",data(){return{page:1,pageSize:20,totalPosts:0,postList:[]}},methods:{handleSizeChange(t){this.pageSize=t,this.page=1,this.getList()},handleCurrentChange(t){this.page=t,this.getList()},async handleRecover(t,e){console.log(t,e)},async getList(){try{const t=await Object(r["j"])({page:this.page,pageSize:this.pageSize});this.postList=t.list,this.totalPosts=t.total}catch(t){console.error(t)}}},mounted(){this.getList()}},f=b,v=(a("9445"),Object(p["a"])(f,g,m,!1,null,"514105c8",null)),k=v.exports,y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"chat"},[e("div",{staticClass:"search"},[e("h-input",{staticClass:"search-input",attrs:{placeholder:"会话对象uid"},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}}),e("h-input",{staticClass:"search-input",attrs:{placeholder:"会话对象uid"},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}}),e("h-input",{staticClass:"search-input",attrs:{placeholder:"关键字"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),e("h-button",{on:{click:t.getList}},[t._v("查询")])],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.chatList}},[e("el-table-column",{attrs:{type:"index",width:"50"}}),e("el-table-column",{attrs:{prop:"id",label:"ID",width:"120"}}),e("el-table-column",{attrs:{prop:"time",label:"时间",width:"200"}}),e("el-table-column",{attrs:{prop:"from",label:"发送人",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.from.uid)+" ")]}}])}),e("el-table-column",{attrs:{prop:"content",label:"内容"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"message-content",style:t.bubbleStyle,domProps:{innerHTML:t._s(a.row.content)}})]}}])}),e("el-table-column",{attrs:{prop:"to",label:"接收人",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.to.uid)+" ")]}}])})],1),e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},w=[],_=a("6275"),L=a("dbbe"),C=a("db04"),S=a("50fc"),z=a("365c"),x={name:"chat",data(){return{from:"",to:"",keyword:"",page:1,pageSize:50,chatList:[],total:0}},components:{HInput:_["a"],HButton:L["a"]},computed:{bubbleStyle(){return"background-color: var(--theme-chat-other-bubble-bg-color)"}},methods:{handleSizeChange(t){this.pageSize=t,this.page=1,this.getList()},handleCurrentChange(t){this.page=t,this.getList()},level(t){let e=this.levels[0];return this.levels.forEach(a=>{a.exp<=t&&a.level>e.level&&(e=a)}),e},levelLabel(){const t=this.levels.find(t=>t.level===this.level.level);return t},getList(){C["a"].get(S["a"].chatList,{params:{page:this.page,pageSize:this.pageSize,from:this.from,to:this.to,keyword:this.keyword}}).then(t=>{0===t.code&&(this.chatList=t.list,this.total=t.total)})}},mounted(){this.getList(),C["a"].get(z["a"].getLevelList).then(t=>{0===t.code&&(this.levels=t.list)})}},T=x,j=(a("2653"),Object(p["a"])(T,y,w,!1,null,"676a5412",null)),P=j.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post"},[e("el-select",{attrs:{placeholder:"审核类型"},on:{change:t.handleChangeCheckType},model:{value:t.checkType,callback:function(e){t.checkType=e},expression:"checkType"}},t._l(t.checkTypeList,(function(t){return e("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.postList}},[e("el-table-column",{attrs:{type:"index"}}),e("el-table-column",{attrs:{prop:"user",label:"申请人",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.user.nickname)+" ")]}}])}),e("el-table-column",{attrs:{prop:"using_avatar",label:"使用中的头像"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-image",{staticClass:"avatar",attrs:{fit:"cover",lazy:"","preview-src-list":t.usingImgList,src:a.row.using_avatar}})]}}])}),e("el-table-column",{attrs:{prop:"wanted_avatar",label:"申请的头像"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-image",{staticClass:"avatar",attrs:{fit:"cover","preview-src-list":t.wantedImgList,src:a.row.wanted_avatar}})]}}])}),e("el-table-column",{attrs:{prop:"time",label:"申请时间",width:"200"}}),e("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(" "+t._s(t.checkStatus[a.row.status])+" ")])]}}])}),e("el-table-column",{attrs:{prop:"operator",label:"审核人",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.operator?e.row.operator.nickname:"--")+" ")]}}])}),e("el-table-column",{attrs:{prop:"action",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[0===a.row.status?[e("h-button",{attrs:{size:"small"},on:{click:function(e){return t.handleApprove(a.row.user.uid,1,a.row.id)}}},[t._v("允许")]),e("h-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){return t.handleApprove(a.row.user.uid,2,a.row.id)}}},[t._v("拒绝")])]:e("span",[t._v("--")])]}}])})],1),e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.totalPosts},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},$=[],O={name:"avatar-check",data(){return{page:1,pageSize:20,totalPosts:0,postList:[],usingImgList:[],wantedImgList:[],checkTypeList:r["f"],checkType:0,checkStatus:{0:"待审核",1:"审核通过",2:"审核不通过"}}},components:{HButton:L["a"]},methods:{handleSizeChange(t){this.pageSize=t,this.page=1,this.getList()},handleCurrentChange(t){this.page=t,this.getList()},handleChangeCheckType(){this.getList()},async handleApprove(t,e,a){try{const s=await Object(r["d"])({uid:t,check:e,id:a});if(0!==s.code)throw s;this.$message({type:"success",message:s.msg}),this.getList()}catch(s){this.$message({type:"danger",message:s.msg})}},async handleRefuse(){},async getList(){try{const t=await Object(r["g"])({page:this.page,pageSize:this.pageSize,filter:this.checkType});this.postList=t.list,this.totalPosts=t.total,this.usingImgList=t.list.map(t=>t.using_avatar),this.wantedImgList=t.list.map(t=>t.wanted_avatar)}catch(t){console.error(t)}}},mounted(){this.getList()}},I=O,B=(a("94cf"),Object(p["a"])(I,V,$,!1,null,"7e0dcc60",null)),A=B.exports,H=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post"},[e("el-select",{attrs:{placeholder:"审核类型"},on:{change:t.handleChangeCheckType},model:{value:t.checkType,callback:function(e){t.checkType=e},expression:"checkType"}},t._l(t.checkTypeList,(function(t){return e("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.postList}},[e("el-table-column",{attrs:{type:"index"}}),e("el-table-column",{attrs:{prop:"using_nickname",label:"使用中的名称",width:"200"}}),e("el-table-column",{attrs:{prop:"wanted_nickname",label:"申请昵称",width:"200"}}),e("el-table-column",{attrs:{prop:"bilibili",label:"B站昵称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.bilibili?e("router-link",{attrs:{to:"https://space.bilibili.com/"+a.row.bilibili.uid}}):t._e(),t._v(" "+t._s(a.row.bilibili?a.row.bilibili.nickname:"无")+" ")]}}])}),e("el-table-column",{attrs:{prop:"douyu",label:"斗鱼昵称",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.douyu?e.row.douyu.nickname:"无")+" ")]}}])}),e("el-table-column",{attrs:{prop:"time",label:"申请时间",width:"200"}}),e("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(" "+t._s(t.checkStatus[a.row.status])+" ")])]}}])}),e("el-table-column",{attrs:{prop:"operator",label:"审核人",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.operator?e.row.operator.nickname:"--")+" ")]}}])}),e("el-table-column",{attrs:{prop:"action",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[0===a.row.status?[e("h-button",{attrs:{size:"small"},on:{click:function(e){return t.handleApprove(a.row.user.uid,1,a.row.id)}}},[t._v("允许")]),e("h-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){return t.handleApprove(a.row.user.uid,2,a.row.id)}}},[t._v("拒绝")])]:1===a.row.status?[e("h-button",{attrs:{size:"small"},on:{click:function(e){return t.handleApprove(a.row.user.uid,3,a.row.id)}}},[t._v("撤回")])]:e("span",[t._v("--")])]}}])})],1),e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.totalPosts},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},R=[],M={name:"nickname-check",data(){return{page:1,pageSize:20,totalPosts:0,postList:[],checkTypeList:r["f"],checkType:0,checkStatus:{0:"待审核",1:"审核通过",2:"审核不通过"}}},components:{HButton:L["a"]},methods:{handleSizeChange(t){this.pageSize=t,this.page=1,this.getList()},handleCurrentChange(t){this.page=t,this.getList()},handleChangeCheckType(){this.getList()},async handleApprove(t,e,a){try{const s=await Object(r["k"])({uid:t,check:e,id:a});if(0!==s.code)throw s;this.$message({type:"success",message:s.msg}),this.getList()}catch(s){this.$message({type:"danger",message:s.msg})}},async getList(){try{const t=await Object(r["l"])({page:this.page,pageSize:this.pageSize,filter:this.checkType});this.postList=t.list,this.totalPosts=t.total}catch(t){console.error(t)}}},mounted(){this.getList()}},D=M,W=(a("5491"),Object(p["a"])(D,H,R,!1,null,"b73f125e",null)),N=W.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post"},[e("el-select",{attrs:{placeholder:"审核类型"},on:{change:t.handleChangeCheckType},model:{value:t.checkType,callback:function(e){t.checkType=e},expression:"checkType"}},t._l(t.checkTypeList,(function(t){return e("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.postList}},[e("el-table-column",{attrs:{type:"index"}}),e("el-table-column",{attrs:{prop:"user",label:"申请人",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.user.nickname)+" ")]}}])}),e("el-table-column",{attrs:{prop:"using_sign",label:"使用中的签名",width:"200"}}),e("el-table-column",{attrs:{prop:"wanted_sign",label:"申请签名",width:"200"}}),e("el-table-column",{attrs:{prop:"time",label:"申请时间",width:"200"}}),e("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(" "+t._s(t.checkStatus[a.row.status])+" ")])]}}])}),e("el-table-column",{attrs:{prop:"operator",label:"审核人",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.operator?e.row.operator.nickname:"--")+" ")]}}])}),e("el-table-column",{attrs:{prop:"action",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[0===a.row.status?[e("h-button",{attrs:{size:"small"},on:{click:function(e){return t.handleApprove(a.row.user.uid,1,a.row.id)}}},[t._v("允许")]),e("h-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){return t.handleApprove(a.row.user.uid,2,a.row.id)}}},[t._v("拒绝")])]:e("span",[t._v("--")])]}}])})],1),e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.totalPosts},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},U=[],J={name:"sign-check",data(){return{page:1,pageSize:20,totalPosts:0,postList:[],checkTypeList:r["f"],checkType:0,checkStatus:{0:"待审核",1:"审核通过",2:"审核不通过"}}},components:{HButton:L["a"]},methods:{handleSizeChange(t){this.pageSize=t,this.page=1,this.getList()},handleCurrentChange(t){this.page=t,this.getList()},handleChangeCheckType(){this.getList()},async handleApprove(t,e,a){try{const s=await Object(r["m"])({uid:t,check:e,id:a});if(0!==s.code)throw s;this.$message({type:"success",message:s.msg}),this.getList()}catch(s){this.$message({type:"danger",message:s.msg})}},async getList(){try{const t=await Object(r["n"])({page:this.page,pageSize:this.pageSize,filter:this.checkType});this.postList=t.list,this.totalPosts=t.total}catch(t){console.error(t)}}},mounted(){this.getList()}},q=J,F=(a("e699"),Object(p["a"])(q,E,U,!1,null,"1f81ebd2",null)),G=F.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ban-words"},[e("div",{staticClass:"ban-words--wrapper"},[t._l(t.banWordsList,(function(a,s){return e("el-tag",{key:a,attrs:{closable:"",type:"danger","disable-transitions":!1},on:{close:function(e){return t.handleDelete(s)}}},[t._v(" "+t._s(a)+" ")])})),t.inputVisible?e("el-input",{ref:"saveWordInput",staticClass:"input-new-words",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm.apply(null,arguments)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):e("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ 添加")])],2),e("div",{staticClass:"operations"},[e("h-button",{attrs:{size:"small"},on:{click:t.save}},[t._v("保存")])],1)])},Q=[],X={name:"ban-words",data(){return{banWordsList:[],inputVisible:!1,inputValue:""}},components:{HButton:L["a"]},methods:{getBanWordsList(){C["a"].get(S["a"].banWords).then(t=>{0===t.code&&(this.banWordsList=t.list)})},handleDelete(t){this.banWordsList.splice(t,1)},handleInputConfirm(){let t=this.inputValue;t&&this.banWordsList.push(t),this.inputVisible=!1,this.inputValue=""},showInput(){this.inputVisible=!0,this.$nextTick(()=>{this.$refs.saveWordInput.$refs.input.focus()})},save(){C["a"].post(S["a"].updateBanWords,{words:this.banWordsList.join(" ")}).then(t=>{this.$message({type:"success",message:t.msg}),this.banWordsList=t.list})}},mounted(){this.getBanWordsList()}},Y=X,Z=(a("146b"),Object(p["a"])(Y,K,Q,!1,null,"517c4c2a",null)),tt=Z.exports,et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report"},[e("el-select",{attrs:{placeholder:"类型"},on:{change:t.reSearch},model:{value:t.reportType,callback:function(e){t.reportType=e},expression:"reportType"}},t._l(t.checkBanTypeList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.key,value:t.value}})})),1),e("div",{staticClass:"reported-posts"},[e("el-collapse",{model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},t._l(t.reportList,(function(a){return e("el-collapse-item",{key:a.postId,attrs:{name:a.postId}},[e("template",{slot:"title"},[e("div",{staticClass:"post"},[e("a",{staticClass:"author",attrs:{href:"/space/"+a.post.author.uid,target:"_blank"}},[e("div",{staticClass:"author-avatar"},[e("img",{attrs:{src:a.post.author.avatar,width:"50",height:"50",alt:a.post.author.nickname}})]),e("div",{staticClass:"author-nickname"},[t._v(" "+t._s(a.post.author.nickname)+" ")])]),e("a",{staticClass:"post-info",attrs:{href:"/postDetails/"+a.post.id,target:"_blank"},on:{click:function(t){t.stopPropagation()}}},[t._v(" "+t._s(a.post.title)+" ")]),e("div",{staticClass:"operations"},[e("h-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return e.stopPropagation(),t.handleReport(a.postId,0)}}},[e("div",{staticClass:"btn-wrapper"},[e("i",{staticClass:"iconfont chehui"}),t._v(" 恢复")])]),e("h-button",{attrs:{size:"mini",type:"warning"},on:{click:function(e){return e.stopPropagation(),t.handleReport(a.postId,2)}}},[e("div",{staticClass:"btn-wrapper"},[e("i",{staticClass:"iconfont suoding"}),t._v(" 锁定")])]),e("h-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return e.stopPropagation(),t.handleReport(a.postId,1)}}},[e("div",{staticClass:"btn-wrapper"},[e("i",{staticClass:"iconfont shanchu"}),t._v(" 删除")])])],1)])]),t._l(a.reporter,(function(a){return e("div",{key:a.id,staticClass:"report-content"},[e("a",{staticClass:"author",attrs:{href:"/space/"+a.uid,target:"_blank"}},[e("div",{staticClass:"author-avatar"},[e("img",{attrs:{src:a.avatar,width:"50",height:"50",alt:a.nickname}})]),e("div",{staticClass:"author-nickname"},[t._v(" "+t._s(a.nickname)+" ")])]),e("div",{staticClass:"report"},[t._v(t._s(a.description))])])}))],2)})),1)],1),e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},at=[],st={name:"report",data(){return{page:1,pageSize:10,total:0,reportType:0,reportList:[],opened:[],checkBanTypeList:[{id:1,key:"未处理",value:0},{id:2,key:"所有",value:""},{id:3,key:"已处理",value:1}]}},components:{HButton:L["a"]},methods:{reSearch(){this.page=1,this.getReportList()},handleSizeChange(t){this.pageSize=t,this.getReportList()},handleCurrentChange(t){this.page=t,this.getReportList()},getReportList(){C["a"].get(S["a"].reportList,{params:{page:this.page,pageSize:this.pageSize,status:this.reportType}}).then(t=>{0===t.code&&(this.reportList=t.list,this.total=t.total,this.opened=this.reportList.map(t=>t.postId))})},handleReport(t,e){C["a"].post(S["a"].handleReport,{postId:t,action:e}).then(t=>{0===t.code&&(this.$message({type:"success",message:t.msg}),this.getReportList())})}},mounted(){this.getReportList()}},nt=st,it=(a("e448"),Object(p["a"])(nt,et,at,!1,null,"4232015e",null)),ot=it.exports,lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post"},[e("el-select",{attrs:{placeholder:"封禁类型"},on:{change:t.handleChangeCheckType},model:{value:t.checkType,callback:function(e){t.checkType=e},expression:"checkType"}},t._l(t.checkBanTypeList,(function(t){return e("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.banList}},[e("el-table-column",{attrs:{prop:"user.nickname",label:"昵称",width:"100"}}),e("el-table-column",{attrs:{prop:"user.avatar",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-image",{staticClass:"avatar",attrs:{fit:"cover",lazy:"","preview-src-list":t.imgList,src:a.row.user.avatar}})]}}])}),e("el-table-column",{attrs:{prop:"user.uid",label:"UID"}}),e("el-table-column",{attrs:{prop:"startTime",label:"起始时间",width:"200"}}),e("el-table-column",{attrs:{prop:"endTime",label:"终止时间",width:"200"}}),e("el-table-column",{attrs:{prop:"operator.nickname",label:"封禁管理员",width:"100"}}),e("el-table-column",{attrs:{prop:"reason",label:"封禁理由",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.reason?e.row.reason:"--")+" ")]}}])}),e("el-table-column",{attrs:{prop:"unbanOpetator",label:"解封管理员",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.unbanOpetator?e.row.unbanOpetator.nickname:"--")+" ")]}}])}),e("el-table-column",{attrs:{prop:"action",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[0==a.row.status?e("h-button",{staticClass:"link",attrs:{size:"small",plain:""},on:{click:function(e){return t.handleRecover(a.row)}}},[t._v("取消封禁")]):t._e(),0==a.row.status?e("h-button",{staticClass:"link",attrs:{size:"small",plain:""},on:{click:function(e){return t.handleBanChange(a.row)}}},[t._v("修改封禁时间")]):e("span",[t._v("--")])]}}])})],1),e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.totalBans},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},rt=[],ct=(a("d9e2"),{name:"ban",components:{HButton:L["a"]},data(){return{page:1,pageSize:20,totalBans:0,banList:[],checkType:3,checkBanTypeList:r["e"],checkStatus:{0:"在使用",1:"已过期",2:"被撤销",3:"全部"},imgList:[]}},computed:{...Object(i["d"])({isMobile:t=>t.media.isMobile})},methods:{handleSizeChange(t){this.pageSize=t,this.page=1,this.getList()},handleCurrentChange(t){this.page=t,this.getList()},handleChangeCheckType(){this.getList()},async handleRecover(t){try{const e=await Object(r["o"])({id:t.id,uid:t.user.uid});switch(e.code){case 0:this.$message({type:"success",message:e.msg});break;default:throw new Error(e.msg)}this.getList()}catch(e){this.$message({type:"danger",message:e})}},handleBanChange(t){this.$showBanDialog(t,1,this.isMobile,()=>this.getList())},async getList(){try{const t=await Object(r["h"])({page:this.page,pageSize:this.pageSize,filter:this.checkType});this.banList=t.list,this.totalBans=t.total,this.imgList=t.list.map(t=>t.user.avatar)}catch(t){console.error(t)}}},mounted(){this.getList()}}),ut=ct,pt=(a("d1bb"),Object(p["a"])(ut,lt,rt,!1,null,"04354ce6",null)),ht=pt.exports,dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hot-posts"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.hotListWithHotValue}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),e("el-table-column",{attrs:{prop:"title",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("a",{staticClass:"link",on:{click:function(e){return t.handleLink(a.row)}}},[t._v(t._s(a.row.title))])]}}])}),e("el-table-column",{attrs:{prop:"author.nickname",label:"作者"}}),e("el-table-column",{attrs:{prop:"readings",label:"阅读量"}}),e("el-table-column",{attrs:{prop:"replies",label:"回复数"}}),e("el-table-column",{attrs:{prop:"likes",label:"点赞数"}}),e("el-table-column",{attrs:{prop:"post_time",label:"发布时间"}}),e("el-table-column",{attrs:{prop:"hotValue",label:"热度值"}}),e("el-table-column",{attrs:{prop:"action",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("h-button",{attrs:{size:"small"},on:{click:function(e){return t.openHotValueModal(a.row)}}},[t._v("修改")])]}}])})],1),e("el-dialog",{attrs:{title:"调整热度",visible:t.isModalVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.isModalVisible=e}}},[e("div",[e("p",[t._v("当前热度值: "+t._s(t.selectedPost.hotValue))]),e("div",[e("p",[t._v("请输入调整值：")]),e("el-input",{attrs:{placeholder:"输入调整值",type:"number",step:"0.1"},model:{value:t.adjustmentValue,callback:function(e){t.adjustmentValue=t._n(e)},expression:"adjustmentValue"}}),e("p",{staticClass:"input-description"},[t._v("正数代表增加热度，负数代表减少热度")])],1),e("p",[t._v("新的热度值: "+t._s(t.newHotValue))])]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.isModalVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",disabled:""===t.adjustmentValue},on:{click:t.confirmHotValueUpdate}},[t._v("确定")])],1)])],1)},gt=[],mt={name:"hot-posts",components:{HButton:L["a"]},data(){return{hotList:[],dataList:[],isModalVisible:!1,selectedPost:{},adjustmentValue:0}},computed:{...Object(i["d"])({levels:t=>t.level.levels}),hotListWithHotValue(){return 0===this.dataList.length?this.hotList:this.hotList.map(t=>{const e=this.dataList.find(e=>e.id===t.id),{hot_value:a,...s}=e;return{...s,...t,hotValue:a}})},newHotValue(){return this.selectedPost.hotValue+this.adjustmentValue}},methods:{getHotList(){C["a"].get(z["a"].getHotList).then(t=>{0===t.code&&(this.hotList=t.result)})},getDataList(){C["a"].get(z["a"].hotData).then(t=>{0===t.code&&(this.dataList=t.list)})},fetchData(){this.getHotList(),this.getDataList()},openHotValueModal(t){this.selectedPost={...t},this.adjustmentValue=0,this.isModalVisible=!0},confirmHotValueUpdate(){const t=this.selectedPost.id;C["a"].post(z["a"].addHot,{hot:this.adjustmentValue,id:t}).then(t=>{0===t.code?this.$message({type:"success",message:t.msg}):this.$message({type:"error",message:t.msg}),this.isModalVisible=!1,this.fetchData()})},handleLink(t){window.open("/postDetails/"+t.id)}},mounted(){this.fetchData()}},bt=mt,ft=(a("4892"),Object(p["a"])(bt,dt,gt,!1,null,"31da2dc3",null)),vt=ft.exports,kt={name:"admin",data(){return{active:"#post",showingPictures:[],firstPicture:""}},components:{Post:d,AvatarCheck:A,NickNameCheck:N,SignCheck:G,Ban:ht,Recover:k},mounted(){document.addEventListener("click",this.handlePicturesShown,!1);const{hash:t}=this.$route;this.menuList.find(e=>e.hash===t)?this.active=t:this.active=this.menuList[0].hash},beforeDestroy(){document.removeEventListener("click",this.handlePicturesShown)},methods:{switchItem(t){this.$router.replace(`${this.$route.path}${t.hash}`)},handlePicturesShown(t){if(t.target.classList.contains("upload-img")){const e=t.target.parentNode,a=e.getElementsByClassName("upload-img");this.firstPicture=t.target.getAttribute("src"),this.showingPictures=[...a].map(t=>t.getAttribute("src")),this.$refs["showing-img"].showViewer=!0}}},computed:{...Object(i["b"])("users",{isChecker:"isChecker",isChatManager:"isChatManager"}),...Object(i["d"])({user:t=>t.users.userInfo}),display(){switch(this.active){case"#post":return d;case"#avatar-check":return A;case"#nickname-check":return N;case"#sign-check":return G;case"#ban":return ht;case"#recover":return k;case"#ban-words":return tt;case"#report":return ot;case"#chat":return P;case"#hot-posts":return vt}return d},menuList(){return[{text:"帖子",hash:"#post",show:!0},{text:"头像审核",hash:"#avatar-check",show:this.isChecker},{text:"昵称审核",hash:"#nickname-check",show:this.isChecker},{text:"签名审核",hash:"#sign-check",show:this.isChecker},{text:"封禁",hash:"#ban",show:!0},{text:"恢复",hash:"#recover",show:!0},{text:"拦截词",hash:"#ban-words",show:!0},{text:"举报",hash:"#report",show:!0},{text:"聊天",hash:"#chat",show:this.isChatManager},{text:"热门推荐",hash:"#hot-posts",show:!0}]},permissionMenuList(){return this.menuList.filter(t=>t.show)}},watch:{"$route.hash"(t){this.menuList.find(e=>e.hash===t)?this.active=t:this.active=this.menuList[0].hash}}},yt=kt,wt=(a("a01f"),Object(p["a"])(yt,s,n,!1,null,"1e6572ed",null));e["default"]=wt.exports},d1bb:function(t,e,a){"use strict";a("e2f2")},d47b:function(t,e,a){},e2f2:function(t,e,a){},e448:function(t,e,a){"use strict";a("f2da")},e699:function(t,e,a){"use strict";a("d47b")},f2da:function(t,e,a){},fa99:function(t,e,a){}}]);