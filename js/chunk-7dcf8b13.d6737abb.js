(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7dcf8b13"],{"13d5":function(t,e,s){"use strict";var a=s("23e7"),o=s("d58f").left,i=s("a640"),n=s("2d00"),r=s("605d"),c=i("reduce"),l=!r&&n>79&&n<83;a({target:"Array",proto:!0,forced:!c||l},{reduce:function(t){var e=arguments.length;return o(this,t,e,e>1?arguments[1]:void 0)}})},"250b":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-editor"},[e("editor-provider",{attrs:{plugins:t.pluginConfig}},[e("post-editor",{ref:"editor",attrs:{limit:t.limit,toolbar:t.toolbarConfig},model:{value:t.postContent,callback:function(e){t.postContent=e},expression:"postContent"}})],1),e("div",{staticClass:"detail-editor__action"},[e("h-button",{attrs:{debonus:1e3,loading:t.loading},on:{click:t.post}},[t._v("发表回复")])],1)],1)},o=[],i=s("feeb"),n=s("27e8"),r=s("dbbe"),c=s("f1f3"),l={name:"detail-editor",props:["loading","limit"],components:{EditorProvider:i["a"],PostEditor:n["a"],HButton:r["a"]},data(){return{postContent:"",toolbarConfig:["bold","italic","image","link","emoticons","video"],pluginConfig:{[c["a"].IMAGE]:null,[c["a"].LINK]:null,[c["a"].MENTION]:null,[c["a"].HASH_TAG]:null,[c["a"].CHARACTER_COUNT]:{limit:this.limit||2e3}}}},methods:{post(){this.$emit("postReply",this.postContent)},clear(){this.postContent="",this.$refs["editor"].clearContent(),this.loading=!1}}},h=l,d=(s("ddd8"),s("2877")),b=Object(d["a"])(h,a,o,!1,null,"e7e635de",null);e["a"]=b.exports},"2a52":function(t,e,s){"use strict";s("2e65")},"2e65":function(t,e,s){},"2f94":function(t,e,s){"use strict";e["a"]={addAddress:"/address/add",deleteAddress:"/address/delete",editAddress:"/address/edit",addressList:"/address/list"}},"48e5":function(t,e,s){},"4a38":function(t,e,s){"use strict";s("7231")},"4e5e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hobby"},[e("main-header"),e("div",{ref:"layout-body",staticClass:"layout-body"},[t.hobby?e("div",{staticClass:"layout-wrapper"},[e("div",{staticClass:"hobby-info"},[e("div",{staticClass:"left"},[e("el-carousel",{attrs:{width:"300",height:"200px"}},t._l(t.displayPictures,(function(s){return e("el-carousel-item",{key:s},[e("el-image",{staticClass:"img",attrs:{width:"300",height:"200",alt:t.hobby.name,src:s,fit:"contain","preview-src-list":t.displayPictures}})],1)})),1)],1),e("div",{staticClass:"right"},[e("h3",[t._v(t._s(t.hobby.name))]),e("div",{staticClass:"hobby-limitation"},[e("div",{staticClass:"hobby-limitation--item"},[t._v(" 积分 "),e("span",{staticClass:"hobby-limitation--item__value",class:t.siteClass},[t._v(t._s(t.hobby.point))])]),e("div",{staticClass:"hobby-limitation--item"},[t._v(" 适用平台 "),e("span",{class:t.siteClass},[t._v(t._s(t.platform))])]),e("div",{staticClass:"hobby-limitation--item"},[e("span",{class:t.getColorClass(t.hobby.gather)},[t._v(t._s(t.hobby.gather?"可借分兑换":"不可借分兑换"))])]),e("div",{staticClass:"hobby-limitation--item"},[e("span",{class:t.getColorClass(t.hobby.mix)},[t._v(t._s(t.hobby.mix?"可混用积分":"不可混用积分"))])])]),e("div",{staticClass:"hobby-limitation"},[e("div",{staticClass:"hobby-limitation--item"},[t._v(" 库存 "),e("span",{class:t.restClass},[t._v(t._s(t.restText))])])]),t.hobby.expire||t.hobby.max?e("div",{staticClass:"hobby-limitation"},[t.hobby.expire?e("div",{staticClass:"hobby-limitation--item"},[t._v(" 兑换期限 "),e("span",[t._v(t._s(t.hobby.expire))]),t._v(" 前 ")]):t._e(),t.hobby.max?e("div",{staticClass:"hobby-limitation--item"},[t._v(" 最多可兑换 "),e("span",[t._v(t._s(t.hobby.max))]),t._v(" 件 ")]):t._e()]):t._e(),e("div",{staticClass:"exchange"},[e("h-button",{attrs:{disabled:!t.canExchange},on:{click:t.editExchangeInfo}},[t._v("申请兑换")]),t.hobby.gather?e("h-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!t.canBorrow},on:{click:t.editBorrowExchangeInfo}},[t._v("借分兑换")]):t._e()],1)])]),e("div",{staticClass:"menu-bar"},[e("div",{staticClass:"menu-bar--item",class:{selected:0===t.type},on:{click:function(e){return t.setType(0)}}},[t._v("周边详情")]),e("div",{staticClass:"menu-bar--item",class:{selected:1===t.type},on:{click:function(e){return t.setType(1)}}},[t._v(" 评论("+t._s(t.hobby.comments)+") ")])]),e("div",{staticClass:"content"},[0===t.type?e("div",{staticClass:"description"},[t._v(" "+t._s(t.hobby.description)+" ")]):t._e(),1===t.type?e("div",{staticClass:"comments"},[e("hobby-comments",{attrs:{hobbyId:t.hobby.id},on:{"change-total":t.changeTotal,comment:t.commitComment}})],1):t._e()])]):t._e()]),e("el-dialog",{attrs:{title:"周边兑换",visible:t.showExchange,"append-to-body":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showExchange=e},closed:t.resetExchangeInfo}},[e("div",{staticClass:"quick-address"},[e("el-select",{attrs:{placeholder:"选择已保存的地址"},on:{change:t.userAddress},model:{value:t.addressId,callback:function(e){t.addressId=e},expression:"addressId"}},t._l(t.addressList,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("收件人")]),e("h-input",{staticClass:"hobby-record input",attrs:{maxlength:20},model:{value:t.exchangeInfo.receiver,callback:function(e){t.$set(t.exchangeInfo,"receiver",e)},expression:"exchangeInfo.receiver"}})],1),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("电话号码")]),e("h-input",{staticClass:"hobby-record input",model:{value:t.exchangeInfo.tel,callback:function(e){t.$set(t.exchangeInfo,"tel",e)},expression:"exchangeInfo.tel"}})],1),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("收件地址")]),e("h-input",{staticClass:"hobby-record input",attrs:{maxlength:200},model:{value:t.exchangeInfo.addr,callback:function(e){t.$set(t.exchangeInfo,"addr",e)},expression:"exchangeInfo.addr"}})],1),t.hobby.virtual?e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("淘宝账号")]),e("h-input",{staticClass:"hobby-record input",attrs:{placeholder:"淘宝账号（账号名）是您后续购买专辑的唯一凭证，专辑发货前请勿修改账号名！"},model:{value:t.exchangeInfo.tb_account,callback:function(e){t.$set(t.exchangeInfo,"tb_account",e)},expression:"exchangeInfo.tb_account"}})],1):t._e(),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("兑换数量")]),e("div",{staticClass:"input"},[e("el-input-number",{attrs:{min:1,max:t.max,step:1,"step-strictly":!0},model:{value:t.exchangeInfo.count,callback:function(e){t.$set(t.exchangeInfo,"count",e)},expression:"exchangeInfo.count"}})],1)]),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("留言")]),e("h-input",{staticClass:"hobby-record input",attrs:{maxlength:500},model:{value:t.exchangeInfo.note,callback:function(e){t.$set(t.exchangeInfo,"note",e)},expression:"exchangeInfo.note"}})],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("h-button",{staticStyle:{"margin-right":"20px"},attrs:{size:"small",plain:""},on:{click:function(e){t.showExchange=!1}}},[t._v("取 消")]),e("h-button",{attrs:{size:"small",type:"primary"},on:{click:t.commitExchange}},[t._v("确 定")])],1)]),e("el-dialog",{attrs:{title:"借分兑换",visible:t.showBorrowExchange,"append-to-body":!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.showBorrowExchange=e},closed:t.resetExchangeInfo}},[e("div",{staticClass:"quick-address"},[e("el-select",{attrs:{placeholder:"选择已保存的地址"},on:{change:t.userAddress},model:{value:t.addressId,callback:function(e){t.addressId=e},expression:"addressId"}},t._l(t.addressList,(function(t){return e("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("收件人")]),e("h-input",{staticClass:"hobby-record input",attrs:{maxlength:20},model:{value:t.exchangeInfo.receiver,callback:function(e){t.$set(t.exchangeInfo,"receiver",e)},expression:"exchangeInfo.receiver"}})],1),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("电话号码")]),e("h-input",{staticClass:"hobby-record input",model:{value:t.exchangeInfo.tel,callback:function(e){t.$set(t.exchangeInfo,"tel",e)},expression:"exchangeInfo.tel"}})],1),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("收件地址")]),e("h-input",{staticClass:"hobby-record input",attrs:{maxlength:200},model:{value:t.exchangeInfo.addr,callback:function(e){t.$set(t.exchangeInfo,"addr",e)},expression:"exchangeInfo.addr"}})],1),t.hobby.virtual?e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("淘宝账号")]),e("h-input",{staticClass:"hobby-record input",attrs:{placeholder:"淘宝账号（账号名）是您后续购买专辑的唯一凭证，专辑发货前请勿修改账号名！"},model:{value:t.exchangeInfo.tb_account,callback:function(e){t.$set(t.exchangeInfo,"tb_account",e)},expression:"exchangeInfo.tb_account"}})],1):t._e(),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("兑换数量")]),e("div",{staticClass:"input"},[e("el-input-number",{attrs:{min:1,max:t.max,step:1,"step-strictly":!0},model:{value:t.exchangeInfo.count,callback:function(e){t.$set(t.exchangeInfo,"count",e)},expression:"exchangeInfo.count"}})],1)]),e("div",{staticClass:"hobby-item-short"},[e("div",{staticClass:"hobby-label-short"},[t._v("留言")]),e("h-input",{staticClass:"hobby-record input",attrs:{placeholder:"to签需说明写谁的ID",maxlength:500},model:{value:t.exchangeInfo.note,callback:function(e){t.$set(t.exchangeInfo,"note",e)},expression:"exchangeInfo.note"}})],1),e("div",{staticClass:"hobby-item-long"},[e("div",{staticClass:"hobby-label-short"},[t._v("借分")]),e("div",{staticClass:"collections"},[t._l(t.collection,(function(s,a){return e("div",{key:s.id,staticClass:"collection"},[e("el-select",{attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选择借分人"},model:{value:s.uid,callback:function(e){t.$set(s,"uid",e)},expression:"c.uid"}},t._l(t.friends,(function(s){return e("el-option",{key:s.uid,attrs:{disabled:t.uidSelected(s.uid),label:s.nickname,value:s.uid}})})),1),e("el-input-number",{staticClass:"point-borrow",attrs:{size:"small",min:1,step:1,"step-strictly":!0},model:{value:s.borrow,callback:function(e){t.$set(s,"borrow",e)},expression:"c.borrow"}}),e("h-button",{staticClass:"borrow-delete",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.removeCollection(a)}}},[e("i",{staticClass:"iconfont shanchu"})])],1)})),e("el-popover",{attrs:{placement:"right",trigger:"hover"}},[e("span",[t._v("借分必须是互相关注好友")]),e("div",{attrs:{slot:"reference"},slot:"reference"},[e("h-button",{attrs:{size:"small"},on:{click:t.addCollection}},[e("i",{staticClass:"iconfont guanzhu"}),t._v(" 添加借分人")])],1)])],2)]),e("div",{staticClass:"hobby-item-result"},[e("div",{staticClass:"hobby-label-short"},[t._v("所需积分")]),e("span",[t._v(t._s(t.exchangeTotalScore))])]),e("div",{staticClass:"hobby-item-result"},[e("div",{staticClass:"hobby-label-short"},[t._v("总借用积分")]),e("span",[t._v(t._s(t.borrowTotalScore))])]),e("div",{staticClass:"hobby-item-result"},[e("div",{staticClass:"hobby-label-short"},[t._v("兑换人贡献积分")]),e("span",[t._v(t._s(t.masterScore))])]),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("h-button",{staticStyle:{"margin-right":"20px"},attrs:{size:"small",plain:""},on:{click:function(e){t.showBorrowExchange=!1}}},[t._v("取 消")]),e("h-button",{attrs:{size:"small",type:"primary"},on:{click:t.commitBorrowExchange}},[t._v("确 定")])],1)])],1)},o=[],i=(s("13d5"),s("14d9"),s("ed89")),n=s("4360"),r=s("db04"),c=s("5ee2"),l=s("365c"),h=s("2f94"),d=s("dbbe"),b=s("6275"),u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hobby-comments"},[t._l(t.commentList,(function(s){return e("hobby-reply",{key:s.id,attrs:{reply:s},on:{"comment-delete":t.refresh}})})),t.isMobile?e("load-more",{key:"comment-list",attrs:{name:"comment-list","have-more":!t.loadDone},on:{"load-more":t.getCommentList}}):e("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","current-page":t.page,"page-size":t.pageSize,layout:"prev, pager, next, jumper, total",total:t.total},on:{"current-change":t.getComments}}),e("detail-editor",{ref:"editor",attrs:{loading:!1},on:{postReply:t.handlePost}})],2)},m=[],g=s("250b"),p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hobby-reply"},[e("div",{staticClass:"user-info"},[e("brief-author",{attrs:{nickname:t.user.nickname,colors:t.levelInfo.color,iconSize:16,uid:t.user.uid,avatar:t.user.avatar,size:40,auth:t.user.auth,authentication:t.user.authentication}}),e("level-label",{attrs:{level:t.levelInfo}})],1),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.reply.content)}}),e("div",{staticClass:"time-and-operations"},[e("div",{staticClass:"time"},[t._v(t._s(t.time))]),t.isAdmin||t.isSelf?e("hobby-reply-expand",{staticClass:"expand",attrs:{isAdmin:t.isAdmin,isSelf:t.isSelf},on:{ban:t.ban,delete:t.deleteReply}}):t._e()],1)])},f=[],v=s("2f62"),y=s("ed08"),x=s.n(y),C=s("9fbf"),_=s("99ca"),I=function(){var t=this,e=t._self._c;return e("el-popover",{attrs:{width:80,"popper-class":"post-action-popover",placement:"bottom",trigger:"click"}},[e("ul",{staticClass:"post-action-list"},[t._l(t.expandList,(function(s){return[s.show?e("li",{key:s.eventName,staticClass:"post-action-list-item",on:{click:function(e){return t.handleEvent(s.eventName)}}},[t._v(" "+t._s(s.text)+" ")]):t._e()]}))],2),e("div",{staticClass:"post-action__origin",attrs:{slot:"reference"},slot:"reference"},[e("i",{staticClass:"hanser icon-gengduo"})])])},w=[],k={name:"post-action",props:["isAdmin","isSelf"],computed:{expandList(){return[{text:"封禁",eventName:"ban",show:this.isAdmin},{text:"删除回复",eventName:"delete",show:this.isAdmin||this.isSelf}]}},methods:{handleEvent(t){this.$emit(t)}}},E=k,S=(s("e941"),s("2877")),$=Object(S["a"])(E,I,w,!1,null,null,null),L=$.exports,z=s("e100"),B={name:"hobby-reply",props:["reply"],components:{BriefAuthor:C["a"],LevelLabel:_["a"],HobbyReplyExpand:L},computed:{...Object(v["d"])({levels:t=>t.level.levels,loginUser:t=>t.users.userInfo,isMobile:t=>t.media.isMobile}),...Object(v["b"])("users",{isAdmin:"isAdmin"}),isSelf(){return this.user.uid===this.loginUser.uid},levelInfo(){return x.a.getLevelInfo(this.user.exp,this.levels)},user(){return this.reply.user},userLink(){return"/space/"+this.user.uid},time(){return Object(z["a"])(this.reply.time)}},methods:{ban(){this.$showBanDialog(this.user,0,this.isMobile,()=>{})},deleteReply(){this.$confirm("确认删除","删除评论",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r["a"].post(c["a"].hobbyCommentDelete+this.reply.id).then(t=>{0===t.code?(this.$message({type:"success",message:t.msg}),this.$emit("comment-delete")):this.$message({type:"warning",message:t.msg})})}).catch(()=>{this.$message({type:"success",message:"已取消删除~"})})}}},A=B,T=(s("a6c3"),Object(S["a"])(A,p,f,!1,null,"397f68da",null)),H=T.exports,D=s("4445"),M={name:"hobby-comments",data(){return{commentList:[],page:1,pageSize:20,total:0,loadDone:!1,loading:!1}},props:["hobbyId"],components:{DetailEditor:g["a"],HobbyReply:H,LoadMore:D["a"]},computed:{...Object(v["d"])({isMobile:t=>t.media.isMobile})},methods:{handlePost(t){this.$emit("comment",t)},getComments(t){this.page=t,this.getCommentList()},getCommentList(){this.loading||(this.loading=!0,r["a"].get(c["a"].hobbyComments,{params:{page:this.page,pageSize:this.pageSize,id:this.hobbyId}}).then(t=>{0===t.code?(this.total=t.total,this.$emit("change-total",this.total),this.isMobile?(this.commentList.push(...t.list),this.page++):this.commentList=t.list,t.list.length<this.pageSize&&(this.loadDone=!0)):this.$message({type:"warning",message:t.msg}),this.loading=!1}))},refresh(){this.commentList=[],this.page=1,this.pageSize=20,this.total=0,this.loadDone=!1,this.loading=!1,this.getCommentList()}},mounted(){this.getCommentList()}},O=M,U=Object(S["a"])(O,u,m,!1,null,"11baf8c4",null),j=U.exports,N={name:"hobby",data(){return{hobby:null,type:0,canExchange:!1,canBorrow:!1,addressId:"",id:1,addressList:[],exchangeInfo:{count:1,receiver:"",tel:"",addr:"",tb_account:"",note:""},showExchange:!1,showBorrowExchange:!1,collection:[],friends:[],defaultCover:"https://cdn.2550505.com/share/legacy-sso/default-hobby.jpg"}},components:{MainHeader:i["a"],HButton:d["a"],HInput:b["a"],HobbyComments:j},computed:{hobbyId(){return Number(this.$route.params.hobbyId)},displayPictures(){return this.hobby.pictures.length?this.hobby.pictures:[this.defaultCover]},siteClass(){switch(this.hobby.platform){case 1:return"hobby-douyu";case 2:return"hobby-bilibili";case 3:return"hobby-both"}return""},platform(){switch(this.hobby.platform){case 1:return"斗鱼";case 2:return"B站";case 3:return"全部平台"}return""},restText(){return 0===this.hobby.count?"库存不限":String(this.hobby.rest)},restClass(){return 0===this.hobby.count||this.hobby.rest>10?"hobby-status--normal":this.hobby.rest>0?"hobby-status--warning":"hobby-status--danger"},max(){var t;return(null===(t=this.hobby)||void 0===t?void 0:t.max)||99999},borrowTotalScore(){return this.collection.length?this.collection.filter(t=>t.uid).map(t=>t.borrow).reduce((t,e)=>t+e,0):0},exchangeTotalScore(){var t;return(null===(t=this.hobby)||void 0===t?void 0:t.point)*this.exchangeInfo.count},masterScore(){return this.exchangeTotalScore-this.borrowTotalScore}},methods:{getHobbyInfo(){r["a"].get(c["a"].hobby+this.hobbyId).then(t=>{0!==t.code?(this.$message({type:"warning",message:t.msg}),this.$router.replace("/404")):(this.hobby=t.info,t.info.id||this.$router.replace("/404"))})},resetExchangeInfo(){this.addressId="",this.exchangeInfo={count:0,receiver:"",tel:"",addr:"",tb_account:"",note:""},this.collection=[]},getColorClass(t){return t?"hobby-status--normal":"hobby-status--warning"},setType(t){this.type=t},commitComment(t){r["a"].post(c["a"].hobbyComment+this.hobby.id,{content:t}).then(t=>{0===t.code?(this.$message({type:"success",message:t.msg}),window.location.reload()):this.$message({type:"warning",message:t.msg})})},changeTotal(t){this.hobby.comments=t},getCanExchange(){r["a"].get(c["a"].hobbyCanExchange,{params:{id:this.hobbyId}}).then(t=>{0===t.code?(this.canExchange=!!t.canExchange,this.canBorrow=!!t.canBorrow,this.canBorrow&&r["a"].get(l["a"].friending).then(t=>{0===t.code&&(this.friends=t.list)})):(this.canExchange=!1,this.canBorrow=!1)})},editExchangeInfo(){this.showExchange=!0},editBorrowExchangeInfo(){this.showBorrowExchange=!0},getAddressList(){r["a"].get(h["a"].addressList).then(t=>{0===t.code?this.addressList=t.list:this.$message({type:"warning",message:t.msg})})},userAddress(){const t=this.addressList.find(t=>t.id===this.addressId);t&&(this.exchangeInfo.receiver=t.receiver,this.exchangeInfo.tel=t.tel,this.exchangeInfo.addr=t.addr,this.exchangeInfo.tb_account=t.tb_account)},commitExchange(){this.$confirm(`你将使用 ${this.hobby.point*this.exchangeInfo.count} 积分兑换 ${this.exchangeInfo.count} 份 ${this.hobby.name} 周边，请确认所有信息后按确认提交兑换`,"兑换周边",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r["a"].post(c["a"].exchangeHobby,{id:this.hobbyId,...this.exchangeInfo}).then(t=>{0===t.code?(this.$message({type:"success",message:t.msg}),this.showExchange=!1,n["a"].dispatch("score/updateScore"),this.getHobbyInfo(),this.getCanExchange(),this.resetExchangeInfo()):this.$message({type:"warning",message:t.msg})})}).catch(()=>{this.$message({type:"success",message:"已取消兑换~"})})},commitBorrowExchange(){this.$confirm("即将向好友借分兑换周边，提交后会扣除自己相应的积分，并向推送借分消息","借分兑换周边",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{r["a"].post(c["a"].borrowExchange,{id:this.hobby.id,...this.exchangeInfo,collection:this.collection.map(t=>({uid:t.uid,borrow:t.borrow}))}).then(t=>{0===t.code?(this.$alert(t.msg,"提交成功",{type:"success"}),this.showBorrowExchange=!1,n["a"].dispatch("score/updateScore"),this.getHobbyInfo(),this.getCanExchange(),this.resetExchangeInfo()):this.$message({type:"warning",message:t.msg})})}).catct(()=>{this.$message({type:"success",message:"已取消兑换~"})})},addCollection(){this.collection.push({id:this.id++,uid:"",borrow:1})},removeCollection(t){this.collection.splice(t,1)},uidSelected(t){return!!this.collection.some(e=>e.uid===t)}},mounted(){this.getHobbyInfo(),this.getCanExchange(),this.getAddressList()}},P=N,R=(s("2a52"),Object(S["a"])(P,a,o,!1,null,"356199fe",null));e["default"]=R.exports},"5ee2":function(t,e,s){"use strict";e["a"]={hobbyCreate:"/hobby/create",hobbyList:"/hobby/list",hobbyDelete:"/hobby/delete",hobbyOn:"/hobby/set-on",hobbyDown:"/hobby/set-down",hobbyEdit:"/hobby/edit",userHobbyList:"/hobby/score/list",hobby:"/hobby/",hobbyComment:"/hobby/comment/",hobbyComments:"/hobby/comments",hobbyCommentDelete:"/hobby/comment/delete/",hobbyCanExchange:"/hobby/can-exchange",exchangeHobby:"/hobby/exchange",borrowExchange:"/hobby/borrow-exchange"}},"605d":function(t,e,s){var a=s("c6b6"),o=s("da84");t.exports="process"==a(o.process)},7231:function(t,e,s){},"7a9c":function(t,e,s){},"8b39":function(t,e,s){},"9fbf":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"brief-author"},["post-details"===t.type?e("detail-avatar",{attrs:{avatar:t.avatar,level:t.level,uid:t.uid,nickname:t.nickname,focusHe:t.focusHe,exp:t.exp,auth:t.auth,iconSize:t.iconSize,authentication:t.authentication},on:{getUserInfo:t.getUserInfo,followUser:t.followUser}},[e("template",{slot:"avatar-slot"},[e("link-avatar",{attrs:{avatar:t.avatar,size:t.size,auth:t.auth,uid:t.uid,iconSize:t.iconSize,authentication:t.authentication,nickname:t.nickname}})],1)],2):e("link-avatar",{attrs:{avatar:t.avatarUrl,size:t.size,auth:t.auth,uid:t.uid,iconSize:t.iconSize,authentication:t.authentication,nickname:t.nickname}}),e("level-nickname",{staticClass:"level-nickname-wrapper",attrs:{colors:t.colors,uid:t.uid,nickname:t.nickname}}),t._t("default")],2)},o=[],i=s("c362"),n=s("e51f"),r=s("919f"),c={name:"brief-author",props:["type","nickname","colors","iconSize","uid","avatar","size","auth","authentication","level","exp","focusHe"],components:{LinkAvatar:i["a"],LevelNickname:n["a"],DetailAvatar:r["a"]},computed:{avatarUrl(){return this.avatar||"https://cdn.2550505.com/share/legacy-sso/thumbnail.default.png"}},methods:{getUserInfo(){this.$emit("getUserInfo",this.uid)},followUser(t,e){this.$emit("followUser",t,e)}}},l=c,h=(s("4a38"),s("2877")),d=Object(h["a"])(l,a,o,!1,null,"5ff0f064",null);e["a"]=d.exports},a640:function(t,e,s){"use strict";var a=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&a((function(){s.call(null,e||function(){return 1},1)}))}},a6c3:function(t,e,s){"use strict";s("7a9c")},d58f:function(t,e,s){var a=s("59ed"),o=s("7b0b"),i=s("44ad"),n=s("07fa"),r=TypeError,c=function(t){return function(e,s,c,l){a(s);var h=o(e),d=i(h),b=n(h),u=t?b-1:0,m=t?-1:1;if(c<2)while(1){if(u in d){l=d[u],u+=m;break}if(u+=m,t?u<0:b<=u)throw r("Reduce of empty array with no initial value")}for(;t?u>=0:b>u;u+=m)u in d&&(l=s(l,d[u],u,h));return l}};t.exports={left:c(!1),right:c(!0)}},ddd8:function(t,e,s){"use strict";s("48e5")},e941:function(t,e,s){"use strict";s("8b39")},ed08:function(t,e){const s={dateFormat:(t,e)=>{let s;const a={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(let o in a)s=new RegExp("("+o+")").exec(t),s&&(t=t.replace(s[1],1==s[1].length?a[o]:a[o].padStart(s[1].length,"0")));return t},getLevelInfo(t,e){let s=0;while(s<e.length){if(s===e.length-1)return e[s];if(t>=e[s].exp&&t<e[s+1].exp)return e[s];s++}},imagesLoadDone:async t=>{const e=t.map(t=>new Promise(e=>{const s=new Image;s.src=t,s.onload=()=>{e(t)}}));return Promise.all(e)},dateInrange:(t,e,s)=>{const a=new Date(t),o=new Date(e);return o.valueOf()-a.valueOf()<s}};t.exports=s}}]);